const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/2.-QGo-h7B.js","../chunks/disclose-version.Bg9kRutz.js","../chunks/legacy.CtaTdtmd.js","../chunks/index.BFqC5wTN.js","../chunks/3.Du_TGS8_.js","../chunks/index-client.D_7LkImg.js","../chunks/template.AcjnxTEE.js","../chunks/each.CPMWh782.js","../chunks/svelte-component.ClNcW8Uq.js","../chunks/props.BhoiTsxR.js","../chunks/T.po24HVTg.js","../chunks/index.7ttzKC12.js","../assets/T.C-GW8brK.css","../chunks/index.TNnlVa_5.js","../chunks/Outlines.DIGU5gAT.js","../chunks/BufferGeometryUtils.C3F9rohb.js","../chunks/revision.CllSKRig.js","../chunks/auth.svelte.BGMa6fhg.js","../chunks/color.D7bleQK4.js","../chunks/4.CBZb4YN8.js","../chunks/RoundedBoxGeometry.CbXKmbir.js","../chunks/5.TA-hcgi6.js","../chunks/lifecycle.BmmF2N16.js","../chunks/Line2.CvH1ko9F.js","../chunks/6.ChkLkKIC.js","../chunks/7.BADrcE1O.js","../chunks/OrbitControls.DwGhhjL-.js","../chunks/useControlsContext.B6ZDUX2E.js","../chunks/user.BQ59VRrd.js","../chunks/MarchingCubes.DIi6b0rk.js","../chunks/MarchingCube.b3twkSPT.js","../chunks/MarchingPlane.CPSd7---.js","../chunks/types.veUJwuSQ.js","../chunks/8.pZ3XCWG_.js","../chunks/if.DtYMiTuA.js","../chunks/9.BZe6vOQ9.js","../chunks/10.BkCz40vM.js","../chunks/cache.H-yOZn-Z.js","../chunks/useEnvironment.svelte.DKnT4xFR.js","../chunks/11.OUAXAP15.js","../chunks/Ribbon.CpVCCAIF.js","../chunks/12.BH_4cmzm.js","../chunks/Lightformer.BwLk9RQw.js","../chunks/13.FCyp5ouJ.js","../chunks/applyColliderActiveEvents.D2fXT2Oo.js","../chunks/createCollidersFromChildren.Cm4lVrJe.js","../chunks/14.jaYIoiLM.js","../chunks/Rope.ACVn6MX4.js","../chunks/Skin.Dfbm31X6.js"])))=>i.map(i=>d[i]);
var St=e=>{throw TypeError(e)};var Ke=(e,t,r)=>t.has(e)||St("Cannot "+r);var U=(e,t,r)=>(Ke(e,t,"read from private field"),r?r.call(e):t.get(e)),F=(e,t,r)=>t.has(e)?St("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),J=(e,t,r,i)=>(Ke(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),re=(e,t,r)=>(Ke(e,t,"access private method"),r);var Xe=(e,t,r,i)=>({set _(o){J(e,t,o,r)},get _(){return U(e,t,i)}});import"../chunks/disclose-version.Bg9kRutz.js";import{J as mt,o as _e,q as pr,aH as mr,n as gr,aI as _r,M as Qe,U as yt,Y as Tt,X as Et,ao as De,au as Oe,aJ as wt,y as Ye,z as Ze,A as Je,aC as xr,B as Sr,e as yr,aK as at,ae as Tr,aL as Er,E as wr,aM as Mr,aN as Rr,a4 as br,h as Ar,K as Mt,ak as Br,$ as K,aO as zr,V as Ur,p as V,f as O,a as W,k as z,a3 as ee,c as D,r as I,a2 as j,d as te,aP as Le,aG as Cr,aE as Vt,aQ as Pr,s as N,t as he,aR as Ir,as as ot,b as Dr,u as Rt,aF as Or,aS as Lr}from"../chunks/index-client.D_7LkImg.js";import{i as Nr,c as Hr,d as ke,n as Fr,a as Gr,b as kr,e as Ne,o as Vr,s as we,r as Wr}from"../chunks/render.DEq_Y2d5.js";import{c as k,a as A,t as L,d as jr}from"../chunks/template.AcjnxTEE.js";import{i as X}from"../chunks/if.DtYMiTuA.js";import{ag as $r,a9 as Kr,ah as Xr,ai as Qr,aj as Yr,ak as Zr,al as Jr,am as qr,s as ve,u as gt,an as ei,c as qe,g as G,ao as pe,ap as H,aq as ti,ar as ri,as as ii,at as si,au as le,av as C,aw as Ve,ax as bt,ay as ni,M as ai,az as He,i as ze,D as Ue,h as ge,aA as oi,aB as _t,aC as Wt,aD as jt,R as $t,aE as Te,aF as li,m as ui,B as At,aG as Kt,aH as Xt,C as ci,O as Bt,e as fi}from"../chunks/T.po24HVTg.js";import{p as Qt}from"../chunks/index.BDLa6Qah.js";import{b as lt,_ as P}from"../chunks/preload-helper.DoybbStK.js";import{r as We,s as Yt,a as ae,p as zt,b as hi,c as Ut}from"../chunks/props.BhoiTsxR.js";import{c as di}from"../chunks/cache.H-yOZn-Z.js";import{c as vi}from"../chunks/user.BQ59VRrd.js";import{u as Zt,a as pi}from"../chunks/auth.svelte.BGMa6fhg.js";import{a as mi,g as xt,o as gi}from"../chunks/types.veUJwuSQ.js";import"../chunks/legacy.CtaTdtmd.js";import{i as je}from"../chunks/lifecycle.BmmF2N16.js";import{e as Jt,i as _i}from"../chunks/each.CPMWh782.js";import{O as ut,c as Ce,d as xi,f as Si}from"../chunks/createCollidersFromChildren.Cm4lVrJe.js";import{w as Ct,d as yi}from"../chunks/index.7ttzKC12.js";function Ti(e,t){if(t){const r=document.body;e.autofocus=!0,mt(()=>{document.activeElement===r&&e.focus()})}}const et=0,Pe=1,tt=2;function Ei(e,t,r,i,o){_e&&pr();var u=e,h=mr(),v=yr,l=yt,a,m,s,n=(h?Tt:Et)(void 0),d=(h?Tt:Et)(void 0),f=!1;function c(y,p){f=!0,p&&(De(S),Oe(S),wt(v));try{y===et&&r&&(a?Ye(a):a=Ze(()=>r(u))),y===Pe&&i&&(m?Ye(m):m=Ze(()=>i(u,n))),y===tt&&o&&(s?Ye(s):s=Ze(()=>o(u,d))),y!==et&&a&&Je(a,()=>a=null),y!==Pe&&m&&Je(m,()=>m=null),y!==tt&&s&&Je(s,()=>s=null)}finally{p&&(wt(null),Oe(null),De(null),xr())}}var S=gr(()=>{if(l!==(l=t())){if(_r(l)){var y=l;f=!1,y.then(p=>{y===l&&(Qe(n,p),c(Pe,!0))},p=>{if(y===l&&(Qe(d,p),c(tt,!0),!o))throw d.v}),_e||mt(()=>{f||c(et,!0)})}else Qe(n,l),c(Pe,!1);return()=>l=yt}});_e&&(u=Sr)}function qt(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=qt(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function wi(){for(var e,t,r=0,i="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=qt(e))&&(i&&(i+=" "),i+=t);return i}function Mi(e){return typeof e=="object"?wi(e):e??""}function Ri(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Fe(e,t,r,i){var o=e.__attributes??(e.__attributes={});_e&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[at]=r),r==null?e.removeAttribute(t):typeof r!="string"&&er(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function bi(e,t,r,i,o=!1,u=!1,h=!1){var v=t||{},l=e.tagName==="OPTION";for(var a in t)a in r||(r[a]=null);r.class&&(r.class=Mi(r.class));var m=er(e),s=e.__attributes??(e.__attributes={});for(const y in r){let p=r[y];if(l&&y==="value"&&p==null){e.value=e.__value="",v[y]=p;continue}var n=v[y];if(p!==n){v[y]=p;var d=y[0]+y[1];if(d!=="$$"){if(d==="on"){const x={},g="$$"+y;let _=y.slice(2);var f=Gr(_);if(Nr(_)&&(_=_.slice(0,-7),x.capture=!0),!f&&n){if(p!=null)continue;e.removeEventListener(_,v[g],x),v[g]=null}if(p!=null)if(f)e[`__${_}`]=p,ke([_]);else{let T=function(B){v[y].call(this,B)};v[g]=Hr(_,e,T,x)}else f&&(e[`__${_}`]=void 0)}else if(y==="style"&&p!=null)e.style.cssText=p+"";else if(y==="autofocus")Ti(e,!!p);else if(y==="__value"||y==="value"&&p!=null)e.value=e[y]=e.__value=p;else if(y==="selected"&&l)Ri(e,p);else{var c=y;o||(c=Fr(c));var S=c==="defaultValue"||c==="defaultChecked";if(p==null&&!u&&!S)if(s[y]=null,c==="value"||c==="checked"){let x=e;if(c==="value"){let g=x.defaultValue;x.removeAttribute(c),x.defaultValue=g}else{let g=x.defaultChecked;x.removeAttribute(c),x.defaultChecked=g}}else e.removeAttribute(y);else S||m.includes(c)&&(u||typeof p!="string")?e[c]=p:typeof p!="function"&&(_e&&(c==="src"||c==="href"||c==="srcset")||Fe(e,c,p))}y==="style"&&"__styles"in e&&(e.__styles={})}}}return v}var Pt=new Map;function er(e){var t=Pt.get(e.nodeName);if(t)return t;Pt.set(e.nodeName,t=[]);for(var r,i=e,o=Element.prototype;o!==i;){r=Er(i);for(var u in r)r[u].set&&t.push(u);i=Tr(i)}return t}function Ai(e){if(!_e&&e.loading==="lazy"){var t=e.src;e[at]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[at]!=="eager"&&(e.loading="lazy"),e.src=t})}}function Bi(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}const zi=()=>performance.now(),q={tick:e=>requestAnimationFrame(e),now:()=>zi(),tasks:new Set};function tr(){const e=q.now();q.tasks.forEach(t=>{t.c(e)||(q.tasks.delete(t),t.f())}),q.tasks.size!==0&&q.tick(tr)}function Ui(e){let t;return q.tasks.size===0&&q.tick(tr),{promise:new Promise(r=>{q.tasks.add(t={c:e,f:r})}),abort(){q.tasks.delete(t)}}}function Ie(e,t){e.dispatchEvent(new CustomEvent(t))}function Ci(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function It(e){const t={},r=e.split(";");for(const i of r){const[o,u]=i.split(":");if(!o||u===void 0)break;const h=Ci(o.trim());t[h]=u.trim()}return t}const Pi=e=>e;function rr(e,t,r,i){var o=(e&zr)!==0,u="both",h,v=t.inert,l,a;function m(){var c=Ur,S=Mt;Oe(null),De(null);try{return h??(h=r()(t,(i==null?void 0:i())??{},{direction:u}))}finally{Oe(c),De(S)}}var s={is_global:o,in(){t.inert=v,Ie(t,"introstart"),l=ct(t,m(),a,1,()=>{Ie(t,"introend"),l==null||l.abort(),l=h=void 0})},out(c){t.inert=!0,Ie(t,"outrostart"),a=ct(t,m(),l,0,()=>{Ie(t,"outroend"),c==null||c()})},stop:()=>{l==null||l.abort(),a==null||a.abort()}},n=Mt;if((n.transitions??(n.transitions=[])).push(s),kr){var d=o;if(!d){for(var f=n.parent;f&&f.f&wr;)for(;(f=f.parent)&&!(f.f&Mr););d=!f||(f.f&Rr)!==0}d&&br(()=>{Ar(()=>s.in())})}}function ct(e,t,r,i,o){var u=i===1;if(Br(t)){var h,v=!1;return mt(()=>{if(!v){var S=t({direction:u?"in":"out"});h=ct(e,S,r,i,o)}}),{abort:()=>{v=!0,h==null||h.abort()},deactivate:()=>h.deactivate(),reset:()=>h.reset(),t:()=>h.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return o(),{abort:K,deactivate:K,reset:K,t:()=>i};const{delay:l=0,css:a,tick:m,easing:s=Pi}=t;var n=[];if(u&&r===void 0&&(m&&m(0,1),a)){var d=It(a(0,1));n.push(d,d)}var f=()=>1-i,c=e.animate(n,{duration:l});return c.onfinish=()=>{var S=(r==null?void 0:r.t())??1-i;r==null||r.abort();var y=i-S,p=t.duration*Math.abs(y),x=[];if(p>0){if(a)for(var g=Math.ceil(p/16.666666666666668),_=0;_<=g;_+=1){var T=S+y*s(_/g),B=a(T,1-T);x.push(It(B))}f=()=>{var R=c.currentTime;return S+y*s(R/p)},m&&Ui(()=>{if(c.playState!=="running")return!1;var R=f();return m(R,1-R),!0})}c=e.animate(x,{duration:p,fill:"forwards"}),c.onfinish=()=>{f=()=>i,m==null||m(i,1-i),o()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=K)},deactivate:()=>{o=K},reset:()=>{i===0&&(m==null||m(1,0))},t:()=>f()}}const Ii=!0,Di=!1,Oi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ii,ssr:Di},Symbol.toStringTag,{value:"Module"})),Li=e=>{$r(e),di();const{scene:t}=Kr();Xr(t),Qr(t),Yr(),Zr(e),Jr(),qr(e),vi()};function Ni(e,t){V(t,!0);let r=We(t,["$$slots","$$events","$$legacy","children"]);Li(r);var i=k(),o=O(i);ve(o,()=>t.children),A(e,i),W()}var Hi=L('<div class="svelte-1osucwe"><canvas class="svelte-1osucwe"><!></canvas></div>');function Fi(e,t){V(t,!0);let r=We(t,["$$slots","$$events","$$legacy","children"]),i=ee(void 0),o=ee(void 0);var u=Hi(),h=D(u),v=D(h);{var l=a=>{Ni(a,Yt({get dom(){return z(o)},get canvas(){return z(i)}},()=>r,{children:(m,s)=>{var n=k(),d=O(n);ve(d,()=>t.children??K),A(m,n)},$$slots:{default:!0}}))};X(v,a=>{z(i)&&z(o)&&a(l)})}I(h),lt(h,a=>j(i,a),()=>z(i)),I(u),lt(u,a=>j(o,a),()=>z(o)),A(e,u),W()}function Dt(e,t){const{scheduler:r}=gt();return r.getStage(e)??r.createStage(e,t)}var Me;class Gi{constructor(){F(this,Me,ee())}get current(){return z(U(this,Me))}set current(t){j(U(this,Me),ae(t))}}Me=new WeakMap;const ir=new Gi;let Ot=!1;const ki={NO_TRACK_PLAYING:204},Vi=async e=>{const t="https://api.spotify.com/v1/me/player/currently-playing";try{const r=await fetch(t,{headers:{Authorization:`Bearer ${e.access}`,"Content-Type":"application/json"}});if(r.status===ki.NO_TRACK_PLAYING){console.log("No track is currently playing.");return}if(!r.ok){console.error(`fetchCurrentlyPlayingTrack: ${r.status} - ${r.statusText}`);return}return r.json()}catch(r){console.error("Error fetching currently playing track:",r)}},ft=async e=>{const t=await Vi(e);if(ir.current=t,t===void 0){setTimeout(ft,3e3,e);return}const r=t.item.duration_ms-t.progress_ms+1e3;setTimeout(ft,r,e)},sr=()=>{const{token:e,authenticated:t}=Zt();return Ot||(te(()=>{t.current==="logged-in"&&ft(e)}),Ot=!0),{track:ir}},Wi=["tubeman"],ji=Object.assign({"../routes/+layout.svelte":()=>P(()=>Promise.resolve().then(()=>Qn),void 0,import.meta.url),"../routes/+layout.ts":()=>P(()=>Promise.resolve().then(()=>Oi),void 0,import.meta.url),"../routes/+page.svelte":()=>P(()=>import("../chunks/2.-QGo-h7B.js").then(e=>e.a),__vite__mapDeps([0,1,2,3]),import.meta.url),"../routes/bars/+page.svelte":()=>P(()=>import("../chunks/3.Du_TGS8_.js").then(e=>e.a),__vite__mapDeps([4,1,5,3,6,7,8,9,10,11,12,13,2,14,15,16,17,18]),import.meta.url),"../routes/cubes/+page.svelte":()=>P(()=>import("../chunks/4.CBZb4YN8.js").then(e=>e.a),__vite__mapDeps([19,1,5,3,6,8,10,9,11,12,17,13,20,15,2]),import.meta.url),"../routes/curves/+page.svelte":()=>P(()=>import("../chunks/5.TA-hcgi6.js").then(e=>e.a),__vite__mapDeps([21,1,2,3,5,6,7,22,10,9,11,12,13,17,18,23]),import.meta.url),"../routes/grid/+page.svelte":()=>P(()=>import("../chunks/6.ChkLkKIC.js").then(e=>e.a),__vite__mapDeps([24,1,5,3,6,7,8,9,10,11,12,13,2,14,15,16,17,18]),import.meta.url),"../routes/lava/+page.svelte":()=>P(()=>import("../chunks/7.BADrcE1O.js").then(e=>e.a),__vite__mapDeps([25,1,5,3,6,7,8,10,9,11,12,13,26,27,28,2,29,30,31,17]),import.meta.url),"../routes/lava/MarchingCube.ts":()=>P(()=>import("../chunks/MarchingCube.b3twkSPT.js"),__vite__mapDeps([30,10,1,5,3,6,9,11,12]),import.meta.url),"../routes/lava/MarchingCubes.svelte":()=>P(()=>import("../chunks/MarchingCubes.DIi6b0rk.js"),__vite__mapDeps([29,1,5,3,6,10,9,11,12,30,31]),import.meta.url),"../routes/lava/MarchingPlane.ts":()=>P(()=>import("../chunks/MarchingPlane.CPSd7---.js"),__vite__mapDeps([31,10,1,5,3,6,9,11,12]),import.meta.url),"../routes/lava/types.ts":()=>P(()=>import("../chunks/types.veUJwuSQ.js").then(e=>e.t),__vite__mapDeps([32,5,3,11]),import.meta.url),"../routes/lines/+page.svelte":()=>P(()=>import("../chunks/8.pZ3XCWG_.js").then(e=>e.a),__vite__mapDeps([33,1,5,3,6,7,8,9,10,11,12,13,34,16,2,18,17,23]),import.meta.url),"../routes/pulsar/+page.svelte":()=>P(()=>import("../chunks/9.BZe6vOQ9.js").then(e=>e.a),__vite__mapDeps([35,1,2,3,5,6,7,22,17,9,10,11,12,13,26,27,28,23]),import.meta.url),"../routes/reflection/+page.svelte":()=>P(()=>import("../chunks/10.BkCz40vM.js").then(e=>e.a),__vite__mapDeps([36,1,5,3,6,34,8,9,10,11,12,13,37,38,26,27,28,2]),import.meta.url),"../routes/ribbons/+page.svelte":()=>P(()=>import("../chunks/11.OUAXAP15.js").then(e=>e.a),__vite__mapDeps([39,1,2,3,5,6,22,10,9,11,12,13,26,27,28,16]),import.meta.url),"../routes/ribbons/Ribbon.svelte":()=>P(()=>import("../chunks/Ribbon.CpVCCAIF.js"),__vite__mapDeps([40,1,2,3]),import.meta.url),"../routes/rubix/+page.svelte":()=>P(()=>import("../chunks/12.BH_4cmzm.js").then(e=>e.a),__vite__mapDeps([41,1,5,3,6,7,8,17,9,10,11,12,13,20,15,2,42,34,38,27,28]),import.meta.url),"../routes/rubix/Lightformer.svelte":()=>P(()=>import("../chunks/Lightformer.BwLk9RQw.js"),__vite__mapDeps([42,1,2,3,5,6,34,10,9,11,12,13,38,27,28]),import.meta.url),"../routes/shatter/+page.svelte":()=>P(()=>import("../chunks/13.FCyp5ouJ.js").then(e=>e.a),__vite__mapDeps([43,1,5,3,6,7,8,9,10,11,12,44,45,34]),import.meta.url),"../routes/tubeman/+page.svelte":()=>P(()=>import("../chunks/14.jaYIoiLM.js").then(e=>e.a),__vite__mapDeps([46,1,5,3,6,8,9,10,11,12,47,7,45,44,13,26,27,28,2]),import.meta.url),"../routes/tubeman/Rope.svelte":()=>P(()=>import("../chunks/Rope.ACVn6MX4.js").then(e=>e.a),__vite__mapDeps([47,1,5,3,6,7,8,9,10,11,12,45,44]),import.meta.url),"../routes/tubeman/Skin.svelte":()=>P(()=>import("../chunks/Skin.Dfbm31X6.js"),__vite__mapDeps([48,1,5,3,6,8,10,9,11,12]),import.meta.url)}),Ee=Object.keys(ji).map(e=>e.split("/")[2]).filter(e=>!e.startsWith("+")).filter(e=>!Wi.includes(e)),$i=()=>{const e=[...Ee],t=r=>{mi(r);const i=e.pop();i!==void 0&&setTimeout(t,1e3,i)};setTimeout(t,1e3,e.pop())},rt={Settings:"s",Studio:"`",Fullscreen:"f",PreviousPage:"arrowleft",NextPage:"arrowright"};function Ki(e,t){V(t,!1);const r=async()=>{document.body.requestFullscreen()},i=u=>{const h=Qt.url.pathname.replace("/","");let l=Ee.findIndex(a=>a===h)+u;l===Ee.length?l=0:l===-1&&(l=Ee.length-1),xt(`/${Ee[l]}`)},o=u=>{switch(u.key.toLowerCase()){case rt.Fullscreen:return r();case rt.PreviousPage:return i(-1);case rt.NextPage:return i(1)}};je(),Ne("keydown",Le,o),W()}const Xi=e=>e;function nr(e,{delay:t=0,duration:r=400,easing:i=Xi}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:i,css:u=>`opacity: ${u*o}`}}const ar=window;function Qi(e){let t=e.activeElement;for(;t!=null&&t.shadowRoot;){const r=t.shadowRoot.activeElement;if(r===t)break;t=r}return t}function Lt(e,t,r,i){const o=Array.isArray(t)?t:[t];for(const u of o)e.addEventListener(u,r,i);return()=>{for(const u of o)e.removeEventListener(u,r,i)}}var xe,Re,se,ce,oe,ht,dt;class Yi{constructor(t,r){F(this,oe);F(this,xe,ee());F(this,Re);F(this,se,0);F(this,ce,null);U(this,xe).v=ae(t),J(this,Re,r)}get current(){return Cr()?te(()=>(Xe(this,se)._++,U(this,se)===1&&re(this,oe,ht).call(this,!0),()=>{Vt().then(()=>{Xe(this,se)._--,U(this,se)===0&&re(this,oe,dt).call(this)})})):U(this,se)===0&&(re(this,oe,ht).call(this,!1),re(this,oe,dt).call(this)),z(U(this,xe))}}xe=new WeakMap,Re=new WeakMap,se=new WeakMap,ce=new WeakMap,oe=new WeakSet,ht=function(t){J(this,ce,U(this,Re).call(this,r=>{j(U(this,xe),ae(r))},t)??null)},dt=function(){U(this,ce)!==null&&(U(this,ce).call(this),J(this,ce,null))};function Zi(e={}){const{window:t=ar}=e,r=e.document??(t==null?void 0:t.document);return new Yi(null,(i,o)=>{function u(){r&&i(Qi(r))}if(u(),!o||!t)return;const h=Lt(t,"focusin",u),v=Lt(t,"focusout",u);return()=>{h(),v()}})}Zi();function Ji(e,t){switch(e){case"local":return t.localStorage;case"session":return t.sessionStorage}}var fe,ne,Se,ye,be,Ge,me,vt,lr;class or{constructor(t,r,i={}){F(this,me);F(this,fe,ee());F(this,ne);F(this,Se);F(this,ye);F(this,be);F(this,Ge,t=>{t.key!==U(this,ne)||t.newValue===null||re(this,me,vt).call(this,t.newValue)});const{storage:o="local",serializer:u={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:h=!0,window:v=ar}=i;if(U(this,fe).v=ae(r),J(this,ne,t),J(this,Se,u),v===void 0)return;const l=Ji(o,v);J(this,ye,l);const a=l.getItem(t);a!==null&&re(this,me,vt).call(this,a),h&&o==="local"&&J(this,be,ei(()=>Vr(v,"storage",U(this,Ge))))}get current(){var t;return(t=U(this,be))==null||t.call(this),z(U(this,fe))}set current(t){j(U(this,fe),ae(t)),re(this,me,lr).call(this,t)}}fe=new WeakMap,ne=new WeakMap,Se=new WeakMap,ye=new WeakMap,be=new WeakMap,Ge=new WeakMap,me=new WeakSet,vt=function(t){try{j(U(this,fe),ae(U(this,Se).deserialize(t)))}catch(r){console.error(`Error when parsing "${t}" from persisted store "${U(this,ne)}"`,r)}},lr=function(t){var r;try{(r=U(this,ye))==null||r.setItem(U(this,ne),U(this,Se).serialize(t))}catch(i){console.error(`Error when writing value from persisted store "${U(this,ne)}" to ${U(this,ye)}`,i)}};var qi=L('<span class="svelte-101a3xu"> </span>'),es=L('<div class="absolute bottom-0 left-0 flex items-end gap-1.5 p-4 text-white"><div class="h-[120px] w-[120px] overflow-hidden rounded-lg shadow-2xl"><img class="select-none" width="120" height="120"></div> <div class="flex flex-col gap-1 px-2 py-2"><p class="text-lg font-bold leading-none"> </p> <p class="text-xs leading-none opacity-75"></p></div></div>');function ts(e,t){V(t,!1);const{track:r}=sr(),i=Pr(new or("trackinfo-visible",!0));je();var o=k();Ne("keydown",Le,v=>{v.key.toLowerCase()==="t"&&Ir(i,z(i).current=!z(i).current)});var u=O(o);{var h=v=>{var l=es();const a=ot(()=>{const{item:S}=r.current;return{item:S}});var m=D(l),s=D(m);I(m);var n=N(m,2),d=D(n),f=D(d,!0);I(d);var c=N(d,2);Jt(c,5,()=>z(a).item.artists,S=>S.name,(S,y)=>{var p=qi(),x=D(p,!0);I(p),he(()=>we(x,z(y).name)),A(S,p)}),I(c),I(n),I(l),he(()=>{Fe(s,"alt",z(a).item.album.name),Fe(s,"src",z(a).item.album.images[0].url),we(f,z(a).item.name)}),rr(3,l,()=>nr,()=>({duration:200})),A(v,l)};X(u,v=>{z(i).current&&r.current&&v(h)})}A(e,o),W()}const Nt=(e,t=K,r=K)=>{var i=rs();i.__click=function(...u){var h;(h=r())==null||h.apply(this,u)};var o=N(D(i));I(i),he(()=>we(o,` ${t()??""}`)),A(e,i)};var rs=L('<button class="flex gap-1 bg-zinc-900 px-2 py-1 text-xs text-slate-100"><svg id="icon-spotify" viewBox="0 0 24 28" class="h-4 fill-slate-100"><path d="M17.609 18.906c0-0.438-0.172-0.609-0.469-0.797-2.016-1.203-4.359-1.797-6.984-1.797-1.531 0-3 0.203-4.484 0.531-0.359 0.078-0.656 0.313-0.656 0.812 0 0.391 0.297 0.766 0.766 0.766 0.141 0 0.391-0.078 0.578-0.125 1.219-0.25 2.5-0.422 3.797-0.422 2.297 0 4.469 0.562 6.203 1.609 0.187 0.109 0.313 0.172 0.516 0.172 0.391 0 0.734-0.313 0.734-0.75zM19.109 15.547c0-0.422-0.156-0.719-0.547-0.953-2.391-1.422-5.422-2.203-8.563-2.203-2.016 0-3.391 0.281-4.734 0.656-0.5 0.141-0.75 0.484-0.75 1s0.422 0.938 0.938 0.938c0.219 0 0.344-0.063 0.578-0.125 1.094-0.297 2.406-0.516 3.922-0.516 2.969 0 5.672 0.781 7.625 1.937 0.172 0.094 0.344 0.203 0.594 0.203 0.531 0 0.938-0.422 0.938-0.938zM20.797 11.672c0-0.578-0.25-0.875-0.625-1.094-2.703-1.578-6.406-2.312-9.938-2.312-2.078 0-3.984 0.234-5.688 0.734-0.438 0.125-0.844 0.5-0.844 1.156 0 0.641 0.484 1.141 1.125 1.141 0.234 0 0.453-0.078 0.625-0.125 1.516-0.422 3.156-0.578 4.797-0.578 3.25 0 6.625 0.719 8.797 2.016 0.219 0.125 0.375 0.187 0.625 0.187 0.594 0 1.125-0.469 1.125-1.125zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12 12 5.375 12 12z"></path></svg> </button>'),is=L("<div><!></div>");function ss(e,t){V(t,!1);const{authenticated:r,login:i,logout:o}=Zt();je();var u=is(),h=D(u);{var v=a=>{var m=jr("...");A(a,m)},l=a=>{var m=k(),s=O(m);{var n=f=>{var c=ot(()=>()=>o());Nt(f,()=>"Logout Spotify",()=>z(c))},d=f=>{var c=k(),S=O(c);{var y=p=>{var x=ot(()=>()=>i());Nt(p,()=>"Connect Spotify",()=>z(x))};X(S,p=>{r.current==="logged-out"&&p(y)},!0)}A(f,c)};X(s,f=>{r.current==="logged-in"?f(n):f(d,!1)},!0)}A(a,m)};X(h,a=>{r.current==="pending"?a(v):a(l,!1)})}I(u),A(e,u),W()}ke(["click"]);var ns=L("<img>");function ur(e,t){let r=We(t,["$$slots","$$events","$$legacy"]);var i=ns();let o;he(()=>o=bi(i,o,{...r,src:"zestyplus.png"})),Ai(i),Wr(i),A(e,i)}var as=L('<button class="absolute right-2 top-2 z-10 h-6 w-6 p-1" aria-label="Open settings"><svg class="h-full fill-white" viewBox="0 0 32 32"><path d="M13,16c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,14.346,13,16z"></path><path d="M13,26c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,24.346,13,26z"></path><path d="M13,6c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,4.346,13,6z"></path></svg></button>'),os=L('<div class="absolute left-0 top-0 z-20 grid h-screen w-screen backdrop-blur-sm"></div> <div class="absolute left-0 top-0 z-20 grid h-screen w-screen place-content-center"><div class="h-44 w-80 rounded-sm bg-white p-2 shadow-xl"><div class="-mt-12 mb-4 flex w-full justify-center"><!></div> <div class="flex justify-center"><!></div></div></div>',1),ls=L("<!> <!>",1);function us(e,t){V(t,!0);const r=new or("settings-open",!1);let i=-1,o=ee(!1);const u=()=>{clearTimeout(i),j(o,!0),i=setTimeout(()=>j(o,!1),5e3)},h=n=>{const d=n.key.toLowerCase();d==="s"&&(r.current=!r.current),r.current&&d==="escape"&&(r.current=!1)};var v=ls();Ne("mousemove",Le,u),Ne("keydown",Le,h);var l=O(v);{var a=n=>{var d=as();d.__click=()=>r.current=!r.current,rr(3,d,()=>nr),A(n,d)};X(l,n=>{z(o)&&n(a)})}var m=N(l,2);{var s=n=>{var d=os(),f=N(O(d),2),c=D(f),S=D(c),y=D(S);ur(y,{class:"w-24"}),I(S);var p=N(S,2),x=D(p);ss(x,{}),I(p),I(c),I(f),A(n,d)};X(m,n=>{r.current&&n(s)})}A(e,v),W()}ke(["click"]);function cs(e,t){V(t,!1),gi(r=>{if(document.startViewTransition)return new Promise(i=>{document.startViewTransition(async()=>{i(),await r.complete})})}),je(),W()}let Ht=!1,it;const fs=()=>Ht?!0:(it||(it=new Promise(e=>{ut.init().then(()=>{Ht=!0,e()})})),it),hs=(e,t,r,i)=>{var m,s,n,d;let o=0,u=0,h=0;const{renderStage:v}=gt(),l=Dt(Ce,{after:(m=i==null?void 0:i.simulationStageOptions)==null?void 0:m.after,before:(s=i==null?void 0:i.simulationStageOptions)==null?void 0:s.before,callback(f,c){if(e.current==="varying")c();else{const S=1/e.current;u+=f,o+=f;const y=Math.ceil(o/S);for(let p=0;p<y;p++)r.set(p>=y-2),c(S),o-=S,h+=S;t.set((u-h)/S+1)}}}),a=Dt(xi,{after:(n=i==null?void 0:i.synchronizationStageOptions)!=null&&n.after?Array.isArray(i.synchronizationStageOptions.after)?[...i.synchronizationStageOptions.after,Ce]:[i.synchronizationStageOptions.after,Ce]:Ce,before:(d=i==null?void 0:i.synchronizationStageOptions)!=null&&d.before?Array.isArray(i.synchronizationStageOptions.before)?[...i.synchronizationStageOptions.before,v]:[i.synchronizationStageOptions.before,v]:v});return{simulationStage:l,synchronizationStage:a}},ds=(e,t)=>{const r=new ut.World(...e),i=new Map,o=new Map,u=new Map,h=new Map,v=(g,_,T)=>{i.set(g.handle,_),h.set(g.handle,T)},l=g=>{i.delete(g.handle),h.delete(g.handle)},a=(g,_,T)=>{o.set(g.handle,_),u.set(g.handle,T)},m=g=>{o.delete(g.handle),u.delete(g.handle)},s=qe(t.framerate??"varying"),n=qe(1),d=qe(s.current==="varying"),{simulationStage:f,synchronizationStage:c}=hs(s,n,d,t),S=t.autoStart??!0,y=Ct(!S);S||(f.stop(),c.stop());const{simulationTask:p,synchronizationTask:x}=Si(r,s,n,o,d,h,u,f,c);return{rapier:ut,world:r,colliderObjects:i,rigidBodyObjects:o,rigidBodyEventDispatchers:u,colliderEventDispatchers:h,addColliderToContext:v,removeColliderFromContext:l,addRigidBodyToContext:a,removeRigidBodyFromContext:m,debug:Ct(!1),pause:()=>{y.set(!0),f.stop(),c.stop()},resume:()=>{y.set(!1),f.start(),c.start()},paused:yi(y,g=>g),framerate:s,simulationOffset:n,simulationStage:f,synchronizationStage:c,updateRigidBodySimulationData:d,simulationTask:p,synchronizationTask:x}};function vs(e,t){V(t,!0);let r=zt(t,"gravity",19,()=>[0,-9.81,0]),i=zt(t,"autoStart",3,!0);const o=ds([{x:r()[0],y:r()[1],z:r()[2]},t.rawIntegrationParameters,t.rawIslands,t.rawBroadPhase,t.rawNarrowPhase,t.rawBodies,t.rawColliders,t.rawImpulseJoints,t.rawMultibodyJoints,t.rawCCDSolver,t.rawQueryPipeline,t.rawPhysicsPipeline,t.rawSerializationPipeline,t.rawDebugRenderPipeline],{framerate:t.framerate,autoStart:i(),simulationStageOptions:t.simulationStageOptions,synchronizationStageOptions:t.synchronizationStageOptions});Dr("threlte-rapier-context",o),Rt(()=>{r()!==void 0&&(o.world.gravity={x:r()[0],y:r()[1],z:r()[2]})}),Rt(()=>{t.framerate!==void 0&&o.framerate.set(t.framerate)}),Or(async()=>{await Vt(),o.world.free()});var u=k(),h=O(u);ve(h,()=>t.children??K),A(e,u),W()}function ps(e,t){V(t,!0);let r=We(t,["$$slots","$$events","$$legacy","fallback","children"]);var i=k(),o=O(i);Ei(o,fs,null,(u,h)=>{vs(u,Yt(()=>r,{children:(v,l)=>{var a=k(),m=O(a);ve(m,()=>t.children??K),A(v,a)},$$slots:{default:!0}}))},(u,h)=>{var v=k(),l=O(v);ve(l,()=>t.fallback??K,()=>z(h)),A(u,v)}),A(e,i),W()}/**
 * postprocessing v6.36.4 build Tue Nov 05 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rüschen
 * @license Zlib
 */var st=1/1e3,ms=1e3,gs=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*st}get fixedDelta(){return this._fixedDelta*st}set fixedDelta(e){this._fixedDelta=e*ms}get elapsed(){return this._elapsed*st}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},_s=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),r=new ui;return r.setAttribute("position",new At(e,3)),r.setAttribute("uv",new At(t,2)),r})(),Q=class pt{static get fullscreenGeometry(){return _s}constructor(t="Pass",r=new bt,i=new ni){this.name=t,this.renderer=null,this.scene=r,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const r=this.fullscreenMaterial;r!==null&&(r.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let r=this.screen;r!==null?r.material=t:(r=new ai(pt.fullscreenGeometry,t),r.frustumCulled=!1,this.scene===null&&(this.scene=new bt),this.scene.add(r),this.screen=r)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,r=Ve){}render(t,r,i,o,u){throw new Error("Render method not implemented!")}setSize(t,r){}initialize(t,r,i){}dispose(){for(const t of Object.keys(this)){const r=this[t];(r instanceof le||r instanceof Kt||r instanceof Xt||r instanceof pt)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},xs=class extends Q{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,o){const u=e.state.buffers.stencil;u.setLocked(!1),u.setTest(!1)}},Ss=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,cr="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",fr=class extends ge{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new C(null),opacity:new C(1)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ss,vertexShader:cr})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},ys=class extends Q{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new fr,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new le(1,1,{minFilter:He,magFilter:He,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,o){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==pe?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===H&&(this.renderTarget.texture.colorSpace=H))}},Ft=new ci,hr=class extends Q{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,o){const u=this.overrideClearColor,h=this.overrideClearAlpha,v=e.getClearAlpha(),l=u!==null,a=h>=0;l?(e.getClearColor(Ft),e.setClearColor(u,a?h:v)):a&&e.setClearAlpha(h),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Ft,v):a&&e.setClearAlpha(v)}},Ts=class extends Q{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new hr(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,o){const u=e.getContext(),h=e.state.buffers,v=this.scene,l=this.camera,a=this.clearPass,m=this.inverted?0:1,s=1-m;h.color.setMask(!1),h.depth.setMask(!1),h.color.setLocked(!0),h.depth.setLocked(!0),h.stencil.setTest(!0),h.stencil.setOp(u.REPLACE,u.REPLACE,u.REPLACE),h.stencil.setFunc(u.ALWAYS,m,4294967295),h.stencil.setClear(s),h.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?a.render(e,null):(a.render(e,t),a.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(v,l)):(e.setRenderTarget(t),e.render(v,l),e.setRenderTarget(r),e.render(v,l)),h.color.setLocked(!1),h.depth.setLocked(!1),h.stencil.setLocked(!1),h.stencil.setFunc(u.EQUAL,1,4294967295),h.stencil.setOp(u.KEEP,u.KEEP,u.KEEP),h.stencil.setLocked(!0)}},Es=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:o}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,o,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new ys,this.depthTexture=null,this.passes=[],this.timer=new gs,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new G),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===pe&&e.outputColorSpace===H&&(this.inputBuffer.texture.colorSpace=H,this.outputBuffer.texture.colorSpace=H,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const o of this.passes)o.initialize(e,r,i)}}replaceRenderer(e,t=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new ti;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=ri,e.type=ii):e.type=si,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){const o=this.renderer,u=o===null?new G:o.getDrawingBufferSize(new G),h={minFilter:He,magFilter:He,stencilBuffer:t,depthBuffer:e,type:r},v=new le(u.width,u.height,h);return i>0&&(v.ignoreDepthForMultisampleCopy=!1,v.samples=i),r===pe&&o!==null&&o.outputColorSpace===H&&(v.texture.colorSpace=H),v.texture.name="EffectComposer.Buffer",v.texture.generateMipmaps=!1,v}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,i=this.renderer,o=i.getDrawingBufferSize(new G),u=i.getContext().getContextAttributes().alpha,h=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(o.width,o.height),e.initialize(i,u,h),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const v=this.createDepthTexture();for(e of r)e.setDepthTexture(v)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const u=(v,l)=>v||l.needsDepthTexture;t.reduce(u,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let i=this.inputBuffer,o=this.outputBuffer,u=!1,h,v,l;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const a of this.passes)a.enabled&&(a.render(t,i,o,e,u),a.needsSwap&&(u&&(r.renderToScreen=a.renderToScreen,h=t.getContext(),v=t.state.buffers.stencil,v.setFunc(h.NOTEQUAL,1,4294967295),r.render(t,i,o,e,u),v.setFunc(h.EQUAL,1,4294967295)),l=i,i=o,o=l),a instanceof Ts?u=!0:a instanceof xs&&(u=!1))}setSize(e,t,r){const i=this.renderer,o=i.getSize(new G);(e===void 0||t===void 0)&&(e=o.width,t=o.height),(o.width!==e||o.height!==t)&&i.setSize(e,t,r);const u=i.getDrawingBufferSize(new G);this.inputBuffer.setSize(u.width,u.height),this.outputBuffer.setSize(u.width,u.height);for(const h of this.passes)h.setSize(u.width,u.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Q.fullscreenGeometry.dispose()}},de={NONE:0,DEPTH:1,CONVOLUTION:2},b={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},ws=class{constructor(){this.shaderParts=new Map([[b.FRAGMENT_HEAD,null],[b.FRAGMENT_MAIN_UV,null],[b.FRAGMENT_MAIN_IMAGE,null],[b.VERTEX_HEAD,null],[b.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=de.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Wt}},nt=!1,Gt=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case Ue:r=this.materialsFlatShadedDoubleSide;break;case ze:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case Ue:r=this.materialsDoubleSide;break;case ze:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof ge))return e.clone();const t=e.uniforms,r=new Map;for(const o in t){const u=t[o].value;u.isRenderTargetTexture&&(t[o].value=null,r.set(o,u))}const i=e.clone();for(const o of r)t[o[0]].value=o[1],i.uniforms[o[0]].value=o[1];return i}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const r of t)r.uniforms=Object.assign({},e.uniforms),r.side=oi;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.side=ze,i}),this.materialsDoubleSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.side=Ue,i}),this.materialsFlatShaded=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=ze,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Ue,i})}}render(e,t,r){const i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,nt){const o=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(const u of o)u[0].material=u[1];this.meshCount!==o.size&&o.clear()}else{const o=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=o}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return nt}static set workaroundEnabled(e){nt=e}},ie=-1,Y=class extends _t{constructor(e,t=ie,r=ie,i=1){super(),this.resizable=e,this.baseSize=new G(1,1),this.preferredSize=new G(t,r),this.target=this.preferredSize,this.s=i,this.effectiveSize=new G,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,r=this.effectiveSize,i=this.scale;t.width!==ie?r.width=t.width:t.height!==ie?r.width=Math.round(t.height*(e.width/Math.max(e.height,1))):r.width=Math.round(e.width*i),t.height!==ie?r.height=t.height:t.width!==ie?r.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r.height=Math.round(e.height*i)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(ie),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ie}},M={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Ms="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Rs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",bs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",As="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Bs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",zs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Us="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Cs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Ps="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Is="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Ds="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Os="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Ls="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Ns="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Hs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Fs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Gs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",ks="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Vs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Ws="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",js="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",$s="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Ks="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Xs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Qs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Ys="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Zs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Js="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",qs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",en="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",tn="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",rn="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",sn=new Map([[M.ADD,Ms],[M.ALPHA,Rs],[M.AVERAGE,bs],[M.COLOR,As],[M.COLOR_BURN,Bs],[M.COLOR_DODGE,zs],[M.DARKEN,Us],[M.DIFFERENCE,Cs],[M.DIVIDE,Ps],[M.DST,null],[M.EXCLUSION,Is],[M.HARD_LIGHT,Ds],[M.HARD_MIX,Os],[M.HUE,Ls],[M.INVERT,Ns],[M.INVERT_RGB,Hs],[M.LIGHTEN,Fs],[M.LINEAR_BURN,Gs],[M.LINEAR_DODGE,ks],[M.LINEAR_LIGHT,Vs],[M.LUMINOSITY,Ws],[M.MULTIPLY,js],[M.NEGATION,$s],[M.NORMAL,Ks],[M.OVERLAY,Xs],[M.PIN_LIGHT,Qs],[M.REFLECT,Ys],[M.SATURATION,Zs],[M.SCREEN,Js],[M.SOFT_LIGHT,qs],[M.SRC,en],[M.SUBTRACT,tn],[M.VIVID_LIGHT,rn]]),nn=class extends _t{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new C(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return sn.get(this.blendFunction)}},$e={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},an=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,on="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ln=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],un=class extends ge{constructor(e=new Bt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new C(null),texelSize:new C(new Bt),scale:new C(1),kernel:new C(0)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:an,vertexShader:on}),this.setTexelSize(e.x,e.y),this.kernelSize=$e.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return ln[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const r=1/e,i=1/t;this.uniforms.texelSize.value.set(r,i,r*.5,i*.5)}},cn=class extends Q{constructor({kernelSize:e=$e.MEDIUM,resolutionScale:t=.5,width:r=Y.AUTO_SIZE,height:i=Y.AUTO_SIZE,resolutionX:o=r,resolutionY:u=i}={}){super("KawaseBlurPass"),this.renderTargetA=new le(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const h=this.resolution=new Y(this,o,u,t);h.addEventListener("change",v=>this.setSize(h.baseWidth,h.baseHeight)),this._blurMaterial=new un,this._blurMaterial.kernelSize=e,this.copyMaterial=new fr}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,o){const u=this.scene,h=this.camera,v=this.renderTargetA,l=this.renderTargetB,a=this.blurMaterial,m=a.kernelSequence;let s=t;this.fullscreenMaterial=a;for(let n=0,d=m.length;n<d;++n){const f=n&1?l:v;a.kernel=m[n],a.inputBuffer=s.texture,e.setRenderTarget(f),e.render(u,h),s=f}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=s.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(u,h)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t);const i=r.width,o=r.height;this.renderTargetA.setSize(i,o),this.renderTargetB.setSize(i,o),this.blurMaterial.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==pe?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===H&&(this.renderTargetA.texture.colorSpace=H,this.renderTargetB.texture.colorSpace=H))}static get AUTO_SIZE(){return Y.AUTO_SIZE}},fn=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,hn=class extends ge{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:$t.replace(/\D+/g,"")},uniforms:{inputBuffer:new C(null),threshold:new C(0),smoothing:new C(1),range:new C(null)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:fn,vertexShader:cr}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},dn=class extends Q{constructor({renderTarget:e,luminanceRange:t,colorOutput:r,resolutionScale:i=1,width:o=Y.AUTO_SIZE,height:u=Y.AUTO_SIZE,resolutionX:h=o,resolutionY:v=u}={}){super("LuminancePass"),this.fullscreenMaterial=new hn(r,t),this.needsSwap=!1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Y(this,h,v,i);l.addEventListener("change",a=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,o){const u=this.fullscreenMaterial;u.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==pe&&(this.renderTarget.texture.type=r,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},vn=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,pn="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",mn=class extends ge{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new C(null),texelSize:new C(new G)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:vn,vertexShader:pn})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},gn=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,_n="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",xn=class extends ge{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new C(null),supportBuffer:new C(null),texelSize:new C(new G),radius:new C(.85)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:gn,vertexShader:_n})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Sn=class extends Q{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new mn,this.upsamplingMaterial=new xn,this.resolution=new G}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let r=0;r<e;++r){const i=t.clone();i.texture.name="Downsampling.Mipmap"+r,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(t);for(let r=1,i=e-1;r<i;++r){const o=t.clone();o.texture.name="Upsampling.Mipmap"+r,this.upsamplingMipmaps.push(o)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,r,i,o){const{scene:u,camera:h}=this,{downsamplingMaterial:v,upsamplingMaterial:l}=this,{downsamplingMipmaps:a,upsamplingMipmaps:m}=this;let s=t;this.fullscreenMaterial=v;for(let n=0,d=a.length;n<d;++n){const f=a[n];v.setSize(s.width,s.height),v.inputBuffer=s.texture,e.setRenderTarget(f),e.render(u,h),s=f}this.fullscreenMaterial=l;for(let n=m.length-1;n>=0;--n){const d=m[n];l.setSize(s.width,s.height),l.inputBuffer=s.texture,l.supportBuffer=a[n].texture,e.setRenderTarget(d),e.render(u,h),s=d}}setSize(e,t){const r=this.resolution;r.set(e,t);let i=r.width,o=r.height;for(let u=0,h=this.downsamplingMipmaps.length;u<h;++u)i=Math.round(i*.5),o=Math.round(o*.5),this.downsamplingMipmaps[u].setSize(i,o),u<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[u].setSize(i,o)}initialize(e,t,r){if(r!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const o of i)o.texture.type=r;if(r!==pe)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e!==null&&e.outputColorSpace===H)for(const o of i)o.texture.colorSpace=H}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},yn=class extends _t{constructor(e,t,{attributes:r=de.NONE,blendFunction:i=M.NORMAL,defines:o=new Map,uniforms:u=new Map,extensions:h=null,vertexShader:v=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=v,this.defines=o,this.uniforms=u,this.extensions=h,this.blendMode=new nn(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Wt,this._outputColorSpace=jt}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Ve){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof le||t instanceof Kt||t instanceof Xt||t instanceof Q)&&this[e].dispose()}}},Tn=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,En=class extends yn{constructor({blendFunction:e=M.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,mipmapBlur:i=!1,intensity:o=1,radius:u=.85,levels:h=8,kernelSize:v=$e.LARGE,resolutionScale:l=.5,width:a=Y.AUTO_SIZE,height:m=Y.AUTO_SIZE,resolutionX:s=a,resolutionY:n=m}={}){super("BloomEffect",Tn,{blendFunction:e,uniforms:new Map([["map",new C(null)],["intensity",new C(o)]])}),this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new cn({kernelSize:v}),this.luminancePass=new dn({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r,this.mipmapBlurPass=new Sn,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=u,this.mipmapBlurPass.levels=h,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const d=this.resolution=new Y(this,s,n,l);d.addEventListener("change",f=>this.setSize(d.baseWidth,d.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){const i=this.renderTarget,o=this.luminancePass;o.enabled?(o.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,o.renderTarget):this.blurPass.render(e,o.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,i)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.blurPass.resolution.copy(r),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,r){this.blurPass.initialize(e,t,r),this.luminancePass.initialize(e,t,r),this.mipmapBlurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e!==null&&e.outputColorSpace===H&&(this.renderTarget.texture.colorSpace=H))}},wn=class extends Q{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new hr,this.overrideMaterialManager=r===null?null:new Gt(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new Gt(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,o){const u=this.scene,h=this.camera,v=this.selection,l=h.layers.mask,a=u.background,m=e.shadowMap.autoUpdate,s=this.renderToScreen?null:t;v!==null&&h.layers.set(v.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(u.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(s),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,u,h):e.render(u,h),h.layers.mask=l,u.background=a,e.shadowMap.autoUpdate=m}},Mn=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Rn="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",bn=class extends ge{constructor(e,t,r,i,o=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:$t.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new G),texelSize:new C(new G),cameraNear:new C(.3),cameraFar:new C(1e3),aspect:new C(1),time:new C(0)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:o}),e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.copyCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Ve){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=Mn.replace(b.FRAGMENT_HEAD,e.get(b.FRAGMENT_HEAD)||"").replace(b.FRAGMENT_MAIN_UV,e.get(b.FRAGMENT_MAIN_UV)||"").replace(b.FRAGMENT_MAIN_IMAGE,e.get(b.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Rn.replace(b.VERTEX_HEAD,e.get(b.VERTEX_HEAD)||"").replace(b.VERTEX_MAIN_SUPPORT,e.get(b.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof li?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return b}};function kt(e,t,r){for(const i of t){const o="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),u=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const h of r.entries())h[1]!==null&&r.set(h[0],h[1].replace(u,o))}}function An(e,t,r){let i=t.getFragmentShader(),o=t.getVertexShader();const u=i!==void 0&&/mainImage/.test(i),h=i!==void 0&&/mainUv/.test(i);if(r.attributes|=t.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(h&&r.attributes&de.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!u&&!h)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const v=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=r.shaderParts;let a=l.get(b.FRAGMENT_HEAD)||"",m=l.get(b.FRAGMENT_MAIN_UV)||"",s=l.get(b.FRAGMENT_MAIN_IMAGE)||"",n=l.get(b.VERTEX_HEAD)||"",d=l.get(b.VERTEX_MAIN_SUPPORT)||"";const f=new Set,c=new Set;if(h&&(m+=`	${e}MainUv(UV);
`,r.uvTransformation=!0),o!==null&&/mainSupport/.test(o)){const p=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o);d+=`	${e}MainSupport(`,d+=p?`vUv);
`:`);
`;for(const x of o.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const g of x[1].split(/\s*,\s*/))r.varyings.add(g),f.add(g),c.add(g);for(const x of o.matchAll(v))c.add(x[1])}for(const p of i.matchAll(v))c.add(p[1]);for(const p of t.defines.keys())c.add(p.replace(/\([\w\s,]*\)/g,""));for(const p of t.uniforms.keys())c.add(p);c.delete("while"),c.delete("for"),c.delete("if"),t.uniforms.forEach((p,x)=>r.uniforms.set(e+x.charAt(0).toUpperCase()+x.slice(1),p)),t.defines.forEach((p,x)=>r.defines.set(e+x.charAt(0).toUpperCase()+x.slice(1),p));const S=new Map([["fragment",i],["vertex",o]]);kt(e,c,r.defines),kt(e,c,S),i=S.get("fragment"),o=S.get("vertex");const y=t.blendMode;if(r.blendModes.set(y.blendFunction,y),u){t.inputColorSpace!==null&&t.inputColorSpace!==r.colorSpace&&(s+=t.inputColorSpace===H?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==jt?r.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(r.colorSpace=t.inputColorSpace);const p=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;s+=`${e}MainImage(color0, UV, `,r.attributes&de.DEPTH&&p.test(i)&&(s+="depth, ",r.readDepth=!0),s+=`color1);
	`;const x=e+"BlendOpacity";r.uniforms.set(x,y.opacity),s+=`color0 = blend${y.blendFunction}(color0, color1, ${x});

	`,a+=`uniform float ${x};

`}if(a+=i+`
`,o!==null&&(n+=o+`
`),l.set(b.FRAGMENT_HEAD,a),l.set(b.FRAGMENT_MAIN_UV,m),l.set(b.FRAGMENT_MAIN_IMAGE,s),l.set(b.VERTEX_HEAD,n),l.set(b.VERTEX_MAIN_SUPPORT,d),t.extensions!==null)for(const p of t.extensions)r.extensions.add(p)}}var Bn=class extends Q{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new bn(null,null,null,e),this.listener=r=>this.handleEvent(r),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,r)=>r.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new ws;let t=0;for(const h of this.effects)if(h.blendMode.blendFunction===M.DST)e.attributes|=h.getAttributes()&de.DEPTH;else{if(e.attributes&h.getAttributes()&de.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${h.name})`);An("e"+t++,h,e)}let r=e.shaderParts.get(b.FRAGMENT_HEAD),i=e.shaderParts.get(b.FRAGMENT_MAIN_IMAGE),o=e.shaderParts.get(b.FRAGMENT_MAIN_UV);const u=/\bblend\b/g;for(const h of e.blendModes.values())r+=h.getShaderCode().replace(u,`blend${h.blendFunction}`)+`
`;e.attributes&de.DEPTH?(e.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===H&&(i+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(o=`vec2 transformedUv = vUv;
`+o,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(b.FRAGMENT_HEAD,r),e.shaderParts.set(b.FRAGMENT_MAIN_IMAGE,i),e.shaderParts.set(b.FRAGMENT_MAIN_UV,o);for(const[h,v]of e.shaderParts)v!==null&&e.shaderParts.set(h,v.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Ve){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,o){for(const u of this.effects)u.update(e,t,i);if(!this.skipRendering||this.renderToScreen){const u=this.fullscreenMaterial;u.inputBuffer=t.texture,u.time+=i*this.timeScale,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(const i of this.effects)i.initialize(e,t,r);this.updateMaterial(),r!==void 0&&r!==pe&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}};function zn(e,t){V(t,!0);const r=hi(),i=()=>Ut(v,"$camera",r),o=()=>Ut(l,"$size",r),{scene:u,renderer:h,camera:v,size:l,autoRender:a,renderStage:m}=gt(),s=new Es(h);te(()=>{s.removeAllPasses(),s.addPass(new wn(u,i())),s.addPass(new Bn(i(),new En({intensity:.8,luminanceThreshold:.15,height:1024,width:1024,luminanceSmoothing:.5,mipmapBlur:!0,kernelSize:$e.MEDIUM})))}),te(()=>{const n=o().width*window.devicePixelRatio,d=o().height*window.devicePixelRatio;s.setSize(n,d)}),te(()=>{const n=a.current;return a.set(!1),()=>a.set(n)}),fi(n=>{s.render(n)},{stage:m,autoInvalidate:!1}),W()}var Un=L("<!> <!>",1);function Cn(e,t){V(t,!0);var r=Un(),i=O(r);zn(i,{});var o=N(i,2);ps(o,{children:(u,h)=>{var v=k(),l=O(v);ve(l,()=>t.children),A(u,v)},$$slots:{default:!0}}),A(e,r),W()}const Pn=(e,t)=>{const r=e.getTime()-Date.now();if(r>0){const i=setTimeout(t,r);return()=>clearTimeout(i)}else return console.error("Target time is in the past. Check system clock."),()=>{}},In=(e=1)=>{const t=new Date().getFullYear()+1,r=new Date(t,0,1,0,0,0);return new Date(r.getTime()-6e4*e)},Dn=e=>{const t=Math.floor(e/1e3),r=Math.floor(t/60).toString(),i=(t%60).toString().padStart(2,"0");return`${r}:${i}`};var On=L('<div class="z-1 pointer-events-none absolute grid h-full w-full place-content-center text-8xl text-white svelte-xkzlrh"><div class="flex gap-2 svelte-xkzlrh">🫲 <div class="w-48 svelte-xkzlrh"> </div> 🫱</div></div>'),Ln=L('<div class="emoji absolute svelte-xkzlrh"> </div>'),Nn=L('<div class="z-1 pointer-events-none absolute h-full w-full place-content-center text-8xl text-white svelte-xkzlrh"></div>');function Hn(e,t){V(t,!0);const r=["👺","😱","🤩","🥳","😘","🤌","👏","🫶","💥","🍾","🎺","🎻","🎉","🎊","🪩","🙂‍↕️","🤝","🤙","🫂","🤸","💸","📈","🎈","🧘‍♀️","🏄‍♂️","🫵"];let i=ae([]),o=-1,u=ee("idle"),h=ee(""),v=ee(!1);const l=()=>{const S=new Date().getTime(),y=o-S;j(h,ae(Dn(y))),S<=o?requestAnimationFrame(l):j(u,"celebrating")},a=()=>{j(u,"counting"),requestAnimationFrame(l)},m=()=>{const c={emoji:r.at((Math.random()*r.length|0)-1)??"",x:Math.random()*100,y:Math.random()*100};i.push(c),i.length>50&&i.shift()};te(()=>{const c=In(10);return o=c.getTime(),Pn(c,a)}),te(()=>{if(z(u)==="celebrating"){setInterval(m,500);const c=1e3*60*3;setTimeout(()=>{j(v,!0),setTimeout(()=>{j(u,"idle")},c)},c)}});var s=k(),n=O(s);{var d=c=>{var S=On(),y=D(S),p=N(D(y)),x=D(p,!0);I(p),Lr(),I(y),I(S),he(()=>we(x,z(h))),A(c,S)},f=c=>{var S=k(),y=O(S);{var p=x=>{var g=Nn();Jt(g,21,()=>i,_i,(_,T)=>{let B=()=>z(T).emoji,R=()=>z(T).x,w=()=>z(T).y;var E=Ln(),$=D(E,!0);I(E),he(()=>{Fe(E,"style",`left: ${R()??""}%; top: ${w()??""}%`),we($,B())}),A(_,E)}),I(g),he(()=>Bi(g,"fading",z(v))),A(x,g)};X(y,x=>{z(u)==="celebrating"&&x(p)},!0)}A(c,S)};X(n,c=>{z(u)==="counting"?c(d):c(f,!1)})}A(e,s),W()}let dr=null;class vr{}vr.render=function(e,t){dr(e,t)};self.QrCreator=vr;(function(e){function t(v,l,a,m){var s={},n=e(a,l);n.u(v),n.J(),m=m||0;var d=n.h(),f=n.h()+2*m;return s.text=v,s.level=l,s.version=a,s.O=f,s.a=function(c,S){return c-=m,S-=m,0>c||c>=d||0>S||S>=d?!1:n.a(c,S)},s}function r(v,l,a,m,s,n,d,f,c,S){function y(p,x,g,_,T,B,R){p?(v.lineTo(x+B,g+R),v.arcTo(x,g,_,T,n)):v.lineTo(x,g)}d?v.moveTo(l+n,a):v.moveTo(l,a),y(f,m,a,m,s,-n,0),y(c,m,s,l,s,0,-n),y(S,l,s,l,a,n,0),y(d,l,a,m,a,0,n)}function i(v,l,a,m,s,n,d,f,c,S){function y(p,x,g,_){v.moveTo(p+g,x),v.lineTo(p,x),v.lineTo(p,x+_),v.arcTo(p,x,p+g,x,n)}d&&y(l,a,n,n),f&&y(m,a,-n,n),c&&y(m,s,-n,-n),S&&y(l,s,n,-n)}function o(v,l){var a=l.fill;if(typeof a=="string")v.fillStyle=a;else{var m=a.type,s=a.colorStops;if(a=a.position.map(d=>Math.round(d*l.size)),m==="linear-gradient")var n=v.createLinearGradient.apply(v,a);else if(m==="radial-gradient")n=v.createRadialGradient.apply(v,a);else throw Error("Unsupported fill");s.forEach(([d,f])=>{n.addColorStop(d,f)}),v.fillStyle=n}}function u(v,l){e:{var a=l.text,m=l.v,s=l.N,n=l.K,d=l.P;for(s=Math.max(1,s||1),n=Math.min(40,n||40);s<=n;s+=1)try{var f=t(a,m,s,d);break e}catch{}f=void 0}if(!f)return null;for(a=v.getContext("2d"),l.background&&(a.fillStyle=l.background,a.fillRect(l.left,l.top,l.size,l.size)),m=f.O,n=l.size/m,a.beginPath(),d=0;d<m;d+=1)for(s=0;s<m;s+=1){var c=a,S=l.left+s*n,y=l.top+d*n,p=d,x=s,g=f.a,_=S+n,T=y+n,B=p-1,R=p+1,w=x-1,E=x+1,$=Math.floor(Math.min(.5,Math.max(0,l.R))*n),Z=g(p,x),ue=g(B,w),Ae=g(B,x);B=g(B,E);var Be=g(p,E);E=g(R,E),x=g(R,x),R=g(R,w),p=g(p,w),S=Math.round(S),y=Math.round(y),_=Math.round(_),T=Math.round(T),Z?r(c,S,y,_,T,$,!Ae&&!p,!Ae&&!Be,!x&&!Be,!x&&!p):i(c,S,y,_,T,$,Ae&&p&&ue,Ae&&Be&&B,x&&Be&&E,x&&p&&R)}return o(a,l),a.fill(),v}var h={minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:.5,quiet:0};dr=function(v,l){var a={};Object.assign(a,h,v),a.N=a.minVersion,a.K=a.maxVersion,a.v=a.ecLevel,a.left=a.left,a.top=a.top,a.size=a.size,a.fill=a.fill,a.background=a.background,a.text=a.text,a.R=a.radius,a.P=a.quiet,l instanceof HTMLCanvasElement?((l.width!==a.size||l.height!==a.size)&&(l.width=a.size,l.height=a.size),l.getContext("2d").clearRect(0,0,l.width,l.height),u(l,a)):(v=document.createElement("canvas"),v.width=a.size,v.height=a.size,a=u(v,a),l.appendChild(a))}})(function(){function e(l){var a=r.s(l);return{S:function(){return 4},b:function(){return a.length},write:function(m){for(var s=0;s<a.length;s+=1)m.put(a[s],8)}}}function t(){var l=[],a=0,m={B:function(){return l},c:function(s){return(l[Math.floor(s/8)]>>>7-s%8&1)==1},put:function(s,n){for(var d=0;d<n;d+=1)m.m((s>>>n-d-1&1)==1)},f:function(){return a},m:function(s){var n=Math.floor(a/8);l.length<=n&&l.push(0),s&&(l[n]|=128>>>a%8),a+=1}};return m}function r(l,a){function m(p,x){for(var g=-1;7>=g;g+=1)if(!(-1>=p+g||f<=p+g))for(var _=-1;7>=_;_+=1)-1>=x+_||f<=x+_||(d[p+g][x+_]=0<=g&&6>=g&&(_==0||_==6)||0<=_&&6>=_&&(g==0||g==6)||2<=g&&4>=g&&2<=_&&4>=_)}function s(p,x){for(var g=f=4*l+17,_=Array(g),T=0;T<g;T+=1){_[T]=Array(g);for(var B=0;B<g;B+=1)_[T][B]=null}for(d=_,m(0,0),m(f-7,0),m(0,f-7),g=u.G(l),_=0;_<g.length;_+=1)for(T=0;T<g.length;T+=1){B=g[_];var R=g[T];if(d[B][R]==null)for(var w=-2;2>=w;w+=1)for(var E=-2;2>=E;E+=1)d[B+w][R+E]=w==-2||w==2||E==-2||E==2||w==0&&E==0}for(g=8;g<f-8;g+=1)d[g][6]==null&&(d[g][6]=g%2==0);for(g=8;g<f-8;g+=1)d[6][g]==null&&(d[6][g]=g%2==0);for(g=u.w(n<<3|x),_=0;15>_;_+=1)T=!p&&(g>>_&1)==1,d[6>_?_:8>_?_+1:f-15+_][8]=T,d[8][8>_?f-_-1:9>_?15-_:14-_]=T;if(d[f-8][8]=!p,7<=l){for(g=u.A(l),_=0;18>_;_+=1)T=!p&&(g>>_&1)==1,d[Math.floor(_/3)][_%3+f-8-3]=T;for(_=0;18>_;_+=1)T=!p&&(g>>_&1)==1,d[_%3+f-8-3][Math.floor(_/3)]=T}if(c==null){for(p=v.I(l,n),g=t(),_=0;_<S.length;_+=1)T=S[_],g.put(4,4),g.put(T.b(),u.f(4,l)),T.write(g);for(_=T=0;_<p.length;_+=1)T+=p[_].j;if(g.f()>8*T)throw Error("code length overflow. ("+g.f()+">"+8*T+")");for(g.f()+4<=8*T&&g.put(0,4);g.f()%8!=0;)g.m(!1);for(;!(g.f()>=8*T)&&(g.put(236,8),!(g.f()>=8*T));)g.put(17,8);var $=0;for(T=_=0,B=Array(p.length),R=Array(p.length),w=0;w<p.length;w+=1){var Z=p[w].j,ue=p[w].o-Z;for(_=Math.max(_,Z),T=Math.max(T,ue),B[w]=Array(Z),E=0;E<B[w].length;E+=1)B[w][E]=255&g.B()[E+$];for($+=Z,E=u.C(ue),Z=i(B[w],E.b()-1).l(E),R[w]=Array(E.b()-1),E=0;E<R[w].length;E+=1)ue=E+Z.b()-R[w].length,R[w][E]=0<=ue?Z.c(ue):0}for(E=g=0;E<p.length;E+=1)g+=p[E].o;for(g=Array(g),E=$=0;E<_;E+=1)for(w=0;w<p.length;w+=1)E<B[w].length&&(g[$]=B[w][E],$+=1);for(E=0;E<T;E+=1)for(w=0;w<p.length;w+=1)E<R[w].length&&(g[$]=R[w][E],$+=1);c=g}for(p=c,g=-1,_=f-1,T=7,B=0,x=u.F(x),R=f-1;0<R;R-=2)for(R==6&&--R;;){for(w=0;2>w;w+=1)d[_][R-w]==null&&(E=!1,B<p.length&&(E=(p[B]>>>T&1)==1),x(_,R-w)&&(E=!E),d[_][R-w]=E,--T,T==-1&&(B+=1,T=7));if(_+=g,0>_||f<=_){_-=g,g=-g;break}}}var n=o[a],d=null,f=0,c=null,S=[],y={u:function(p){p=e(p),S.push(p),c=null},a:function(p,x){if(0>p||f<=p||0>x||f<=x)throw Error(p+","+x);return d[p][x]},h:function(){return f},J:function(){for(var p=0,x=0,g=0;8>g;g+=1){s(!0,g);var _=u.D(y);(g==0||p>_)&&(p=_,x=g)}s(!1,x)}};return y}function i(l,a){if(typeof l.length>"u")throw Error(l.length+"/"+a);var m=function(){for(var n=0;n<l.length&&l[n]==0;)n+=1;for(var d=Array(l.length-n+a),f=0;f<l.length-n;f+=1)d[f]=l[f+n];return d}(),s={c:function(n){return m[n]},b:function(){return m.length},multiply:function(n){for(var d=Array(s.b()+n.b()-1),f=0;f<s.b();f+=1)for(var c=0;c<n.b();c+=1)d[f+c]^=h.i(h.g(s.c(f))+h.g(n.c(c)));return i(d,0)},l:function(n){if(0>s.b()-n.b())return s;for(var d=h.g(s.c(0))-h.g(n.c(0)),f=Array(s.b()),c=0;c<s.b();c+=1)f[c]=s.c(c);for(c=0;c<n.b();c+=1)f[c]^=h.i(h.g(n.c(c))+d);return i(f,0).l(n)}};return s}r.s=function(l){for(var a=[],m=0;m<l.length;m++){var s=l.charCodeAt(m);128>s?a.push(s):2048>s?a.push(192|s>>6,128|s&63):55296>s||57344<=s?a.push(224|s>>12,128|s>>6&63,128|s&63):(m++,s=65536+((s&1023)<<10|l.charCodeAt(m)&1023),a.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63))}return a};var o={L:1,M:0,Q:3,H:2},u=function(){function l(s){for(var n=0;s!=0;)n+=1,s>>>=1;return n}var a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],m={w:function(s){for(var n=s<<10;0<=l(n)-l(1335);)n^=1335<<l(n)-l(1335);return(s<<10|n)^21522},A:function(s){for(var n=s<<12;0<=l(n)-l(7973);)n^=7973<<l(n)-l(7973);return s<<12|n},G:function(s){return a[s-1]},F:function(s){switch(s){case 0:return function(n,d){return(n+d)%2==0};case 1:return function(n){return n%2==0};case 2:return function(n,d){return d%3==0};case 3:return function(n,d){return(n+d)%3==0};case 4:return function(n,d){return(Math.floor(n/2)+Math.floor(d/3))%2==0};case 5:return function(n,d){return n*d%2+n*d%3==0};case 6:return function(n,d){return(n*d%2+n*d%3)%2==0};case 7:return function(n,d){return(n*d%3+(n+d)%2)%2==0};default:throw Error("bad maskPattern:"+s)}},C:function(s){for(var n=i([1],0),d=0;d<s;d+=1)n=n.multiply(i([1,h.i(d)],0));return n},f:function(s,n){if(s!=4||1>n||40<n)throw Error("mode: "+s+"; type: "+n);return 10>n?8:16},D:function(s){for(var n=s.h(),d=0,f=0;f<n;f+=1)for(var c=0;c<n;c+=1){for(var S=0,y=s.a(f,c),p=-1;1>=p;p+=1)if(!(0>f+p||n<=f+p))for(var x=-1;1>=x;x+=1)0>c+x||n<=c+x||(p!=0||x!=0)&&y==s.a(f+p,c+x)&&(S+=1);5<S&&(d+=3+S-5)}for(f=0;f<n-1;f+=1)for(c=0;c<n-1;c+=1)S=0,s.a(f,c)&&(S+=1),s.a(f+1,c)&&(S+=1),s.a(f,c+1)&&(S+=1),s.a(f+1,c+1)&&(S+=1),(S==0||S==4)&&(d+=3);for(f=0;f<n;f+=1)for(c=0;c<n-6;c+=1)s.a(f,c)&&!s.a(f,c+1)&&s.a(f,c+2)&&s.a(f,c+3)&&s.a(f,c+4)&&!s.a(f,c+5)&&s.a(f,c+6)&&(d+=40);for(c=0;c<n;c+=1)for(f=0;f<n-6;f+=1)s.a(f,c)&&!s.a(f+1,c)&&s.a(f+2,c)&&s.a(f+3,c)&&s.a(f+4,c)&&!s.a(f+5,c)&&s.a(f+6,c)&&(d+=40);for(c=S=0;c<n;c+=1)for(f=0;f<n;f+=1)s.a(f,c)&&(S+=1);return d+=Math.abs(100*S/n/n-50)/5*10}};return m}(),h=function(){for(var l=Array(256),a=Array(256),m=0;8>m;m+=1)l[m]=1<<m;for(m=8;256>m;m+=1)l[m]=l[m-4]^l[m-5]^l[m-6]^l[m-8];for(m=0;255>m;m+=1)a[l[m]]=m;return{g:function(s){if(1>s)throw Error("glog("+s+")");return a[s]},i:function(s){for(;0>s;)s+=255;for(;256<=s;)s-=255;return l[s]}}}(),v=function(){function l(s,n){switch(n){case o.L:return a[4*(s-1)];case o.M:return a[4*(s-1)+1];case o.Q:return a[4*(s-1)+2];case o.H:return a[4*(s-1)+3]}}var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],m={I:function(s,n){var d=l(s,n);if(typeof d>"u")throw Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+n);s=d.length/3,n=[];for(var f=0;f<s;f+=1)for(var c=d[3*f],S=d[3*f+1],y=d[3*f+2],p=0;p<c;p+=1){var x=y,g={};g.o=S,g.j=x,n.push(g)}return n}};return m}();return r}());const Fn=QrCreator;var Gn=L('<div class="z-1 inline-flex w-24 p-4 svelte-x226nl"></div>');function kn(e,t){V(t,!0);const{track:r}=sr();let i;const o=(h,v)=>{h.innerHTML="",v!==void 0&&Fn.render({text:v,radius:0,ecLevel:"H",fill:"#fff",background:null,size:128},h)};te(()=>{var v,l,a;if(i===void 0)return;const h=(a=(l=(v=r.current)==null?void 0:v.context)==null?void 0:l.external_urls)==null?void 0:a.spotify;o(i,h)});var u=Gn();lt(u,h=>i=h,()=>i),A(e,u),W()}var Vn=()=>xt("/lines"),Wn=()=>xt("/about"),jn=L('<div class="absolute left-0 top-0 flex h-screen w-screen flex-col items-center justify-center"><!> <div class="flex gap-2"><button class="flex items-center gap-1 bg-slate-600 px-3 py-1 text-white"><span class="text-xs">get zesty</span> 🤌</button> <button class="flex items-center gap-1 bg-slate-600 px-3 py-1 text-white"><span class="text-xs">what the zest?</span> 🧐</button></div></div>'),$n=L("<!> <!> <!> <!> <!> <!>",1),Kn=L('<div class="absolute left-0 top-0 h-screen w-screen"><!></div> <!>',1);function Xn(e,t){V(t,!0);const{startAnalyser:r}=pi();te(()=>{$i(),r()});var i=Kn(),o=O(i),u=D(o);Fi(u,{children:(a,m)=>{var s=k(),n=O(s);{var d=f=>{Cn(f,{children:(c,S)=>{var y=k(),p=O(y);ve(p,()=>t.children),A(c,y)},$$slots:{default:!0}})};X(n,f=>{f(d,!1)})}A(a,s)},$$slots:{default:!0}}),I(o);var h=N(o,2);{var v=a=>{var m=jn(),s=D(m);ur(s,{class:"w-1/2"});var n=N(s,2),d=D(n);d.__click=[Vn];var f=N(d,2);f.__click=[Wn],I(n),I(m),A(a,m)},l=a=>{var m=$n(),s=O(m);Ki(s,{});var n=N(s,2);cs(n,{});var d=N(n,2);us(d,{});var f=N(d,2);ts(f,{});var c=N(f,2);Hn(c,{});var S=N(c,2);kn(S,{}),A(a,m)};X(h,a=>{Qt.route.id==="/"?a(v):a(l,!1)})}A(e,i),W()}ke(["click"]);const Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Xn},Symbol.toStringTag,{value:"Module"}));export{Xn as component,Oi as universal};
