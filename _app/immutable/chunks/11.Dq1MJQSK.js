import"./disclose-version.Bg9kRutz.js";import{l as pt,ab as ft,p as dn,b as bn,i as ye,f as qe,a as Cn,k as Ye,a6 as mt,s as Xe,a5 as vt}from"./index-client.jNqP-yUK.js";import{c as In,a as Je,t as mn}from"./template.dxe18lOp.js";import{i as hn}from"./if.D7726KUx.js";import{c as Ke}from"./svelte-component.D4HszQ7S.js";import{p as Ve,a as Et}from"./props.6OPtkU23.js";import{bi as Rn,bj as Oe,aG as pn,bk as Ze,bl as wt,bm as gt,aH as _t,aD as on,bn as Le,M as Tn,ab as St,V as yt,v as It,u as dt,bo as bt,aU as Ct,d as Fe,h as Rt,bp as Tt}from"./T.Hd49IpQl.js";import"./index.bsilHA1h.js";import{u as At}from"./cache.DUKstImg.js";import{d as Ut,r as Nt}from"./index.DevEpOn0.js";import{u as Mt}from"./useEnvironment.svelte.DMTbIc-X.js";import{O as xt}from"./OrbitControls.IEQpOwPq.js";import"./legacy.CtaTdtmd.js";const Ot=Symbol("THRELTE_SUSPENSE_CONTEXT_IDENTIFIER"),kt=()=>{const p=pt(Ot),u=new Set,g=y=>(p&&(p.suspend(y),u.add(y)),y),R={suspended:Ut((p==null?void 0:p.suspended)??Nt(!1),y=>y)};return ft(()=>{if(p){for(const y of u)p.onComponentDestroy(y);u.clear()}}),Object.assign(g,R)};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var _e=Uint8Array,Pe=Uint16Array,Dt=Int32Array,An=new _e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Un=new _e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ft=new _e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Nn=function(p,u){for(var g=new Pe(31),R=0;R<31;++R)g[R]=u+=1<<p[R-1];for(var y=new Dt(g[30]),R=1;R<30;++R)for(var P=g[R];P<g[R+1];++P)y[P]=P-g[R]<<5|R;return{b:g,r:y}},Mn=Nn(An,2),xn=Mn.b,Bt=Mn.r;xn[28]=258,Bt[258]=28;var Lt=Nn(Un,0),Pt=Lt.b,fn=new Pe(32768);for(var W=0;W<32768;++W){var xe=(W&43690)>>1|(W&21845)<<1;xe=(xe&52428)>>2|(xe&13107)<<2,xe=(xe&61680)>>4|(xe&3855)<<4,fn[W]=((xe&65280)>>8|(xe&255)<<8)>>1}var Qe=function(p,u,g){for(var R=p.length,y=0,P=new Pe(u);y<R;++y)p[y]&&++P[p[y]-1];var b=new Pe(u);for(y=1;y<u;++y)b[y]=b[y-1]+P[y-1]<<1;var D;if(g){D=new Pe(1<<u);var $=15-u;for(y=0;y<R;++y)if(p[y])for(var se=y<<4|p[y],te=u-p[y],_=b[p[y]-1]++<<te,C=_|(1<<te)-1;_<=C;++_)D[fn[_]>>$]=se}else for(D=new Pe(R),y=0;y<R;++y)p[y]&&(D[y]=fn[b[p[y]-1]++]>>15-p[y]);return D},$e=new _e(288);for(var W=0;W<144;++W)$e[W]=8;for(var W=144;W<256;++W)$e[W]=9;for(var W=256;W<280;++W)$e[W]=7;for(var W=280;W<288;++W)$e[W]=8;var On=new _e(32);for(var W=0;W<32;++W)On[W]=5;var Zt=Qe($e,9,1),Ht=Qe(On,5,1),cn=function(p){for(var u=p[0],g=1;g<p.length;++g)p[g]>u&&(u=p[g]);return u},Se=function(p,u,g){var R=u/8|0;return(p[R]|p[R+1]<<8)>>(u&7)&g},un=function(p,u){var g=u/8|0;return(p[g]|p[g+1]<<8|p[g+2]<<16)>>(u&7)},zt=function(p){return(p+7)/8|0},Gt=function(p,u,g){return(g==null||g>p.length)&&(g=p.length),new _e(p.subarray(u,g))},Wt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ie=function(p,u,g){var R=new Error(u||Wt[p]);if(R.code=p,Error.captureStackTrace&&Error.captureStackTrace(R,Ie),!g)throw R;return R},Yt=function(p,u,g,R){var y=p.length,P=0;if(!y||u.f&&!u.l)return g||new _e(0);var b=!g,D=b||u.i!=2,$=u.i;b&&(g=new _e(y*3));var se=function(He){var en=g.length;if(He>en){var ze=new _e(Math.max(en*2,He));ze.set(g),g=ze}},te=u.f||0,_=u.p||0,C=u.b||0,j=u.l,pe=u.d,fe=u.m,H=u.n,V=y*8;do{if(!j){te=Se(p,_,1);var ae=Se(p,_+1,3);if(_+=3,ae)if(ae==1)j=Zt,pe=Ht,fe=9,H=5;else if(ae==2){var de=Se(p,_,31)+257,me=Se(p,_+10,15)+4,d=de+Se(p,_+5,31)+1;_+=14;for(var N=new _e(d),k=new _e(19),U=0;U<me;++U)k[Ft[U]]=Se(p,_+U*3,7);_+=me*3;for(var O=cn(k),z=(1<<O)-1,A=Qe(k,O,1),U=0;U<d;){var Y=A[Se(p,_,z)];_+=Y&15;var ee=Y>>4;if(ee<16)N[U++]=ee;else{var M=0,ce=0;for(ee==16?(ce=3+Se(p,_,3),_+=2,M=N[U-1]):ee==17?(ce=3+Se(p,_,7),_+=3):ee==18&&(ce=11+Se(p,_,127),_+=7);ce--;)N[U++]=M}}var Ue=N.subarray(0,de),oe=N.subarray(de);fe=cn(Ue),H=cn(oe),j=Qe(Ue,fe,1),pe=Qe(oe,H,1)}else Ie(1);else{var ee=zt(_)+4,le=p[ee-4]|p[ee-3]<<8,re=ee+le;if(re>y){$&&Ie(0);break}D&&se(C+le),g.set(p.subarray(ee,re),C),u.b=C+=le,u.p=_=re*8,u.f=te;continue}if(_>V){$&&Ie(0);break}}D&&se(C+131072);for(var q=(1<<fe)-1,ke=(1<<H)-1,K=_;;K=_){var M=j[un(p,_)&q],J=M>>4;if(_+=M&15,_>V){$&&Ie(0);break}if(M||Ie(2),J<256)g[C++]=J;else if(J==256){K=_,j=null;break}else{var Re=J-254;if(J>264){var U=J-257,Ne=An[U];Re=Se(p,_,(1<<Ne)-1)+xn[U],_+=Ne}var B=pe[un(p,_)&ke],be=B>>4;B||Ie(3),_+=B&15;var oe=Pt[be];if(be>3){var Ne=Un[be];oe+=un(p,_)&(1<<Ne)-1,_+=Ne}if(_>V){$&&Ie(0);break}D&&se(C+131072);var Te=C+Re;if(C<oe){var je=P-oe,sn=Math.min(oe,Te);for(je+C<0&&Ie(3);C<sn;++C)g[C]=R[je+C]}for(;C<Te;++C)g[C]=g[C-oe]}}u.l=j,u.p=K,u.b=C,u.f=te,j&&(te=1,u.m=fe,u.d=pe,u.n=H)}while(!te);return C!=g.length&&b?Gt(g,0,C):g.subarray(0,C)},Xt=new _e(0),Kt=function(p,u){return((p[0]&15)!=8||p[0]>>4>7||(p[0]<<8|p[1])%31)&&Ie(6,"invalid zlib data"),(p[1]>>5&1)==+!u&&Ie(6,"invalid zlib data: "+(p[1]&32?"need":"unexpected")+" dictionary"),(p[1]>>3&4)+2};function rn(p,u){return Yt(p.subarray(Kt(p,u),-4),{i:2},u,u)}var Vt=typeof TextDecoder<"u"&&new TextDecoder,qt=0;try{Vt.decode(Xt,{stream:!0}),qt=1}catch{}class Jt extends Rn{constructor(u){super(u),this.type=Oe}parse(u){const N=Math.pow(2.7182818,2.2);function k(e,n){let t=0;for(let i=0;i<65536;++i)(i==0||e[i>>3]&1<<(i&7))&&(n[t++]=i);const r=t-1;for(;t<65536;)n[t++]=0;return r}function U(e){for(let n=0;n<16384;n++)e[n]={},e[n].len=0,e[n].lit=0,e[n].p=null}const O={l:0,c:0,lc:0};function z(e,n,t,r,i){for(;t<e;)n=n<<8|gn(r,i),t+=8;t-=e,O.l=n>>t&(1<<e)-1,O.c=n,O.lc=t}const A=new Array(59);function Y(e){for(let t=0;t<=58;++t)A[t]=0;for(let t=0;t<65537;++t)A[e[t]]+=1;let n=0;for(let t=58;t>0;--t){const r=n+A[t]>>1;A[t]=n,n=r}for(let t=0;t<65537;++t){const r=e[t];r>0&&(e[t]=r|A[r]++<<6)}}function M(e,n,t,r,i,o){const a=n;let h=0,c=0;for(;r<=i;r++){if(a.value-n.value>t)return!1;z(6,h,c,e,a);const l=O.l;if(h=O.c,c=O.lc,o[r]=l,l==63){if(a.value-n.value>t)throw new Error("Something wrong with hufUnpackEncTable");z(8,h,c,e,a);let s=O.l+6;if(h=O.c,c=O.lc,r+s>i+1)throw new Error("Something wrong with hufUnpackEncTable");for(;s--;)o[r++]=0;r--}else if(l>=59){let s=l-59+2;if(r+s>i+1)throw new Error("Something wrong with hufUnpackEncTable");for(;s--;)o[r++]=0;r--}}Y(o)}function ce(e){return e&63}function Ue(e){return e>>6}function oe(e,n,t,r){for(;n<=t;n++){const i=Ue(e[n]),o=ce(e[n]);if(i>>o)throw new Error("Invalid table entry");if(o>14){const a=r[i>>o-14];if(a.len)throw new Error("Invalid table entry");if(a.lit++,a.p){const h=a.p;a.p=new Array(a.lit);for(let c=0;c<a.lit-1;++c)a.p[c]=h[c]}else a.p=new Array(1);a.p[a.lit-1]=n}else if(o){let a=0;for(let h=1<<14-o;h>0;h--){const c=r[(i<<14-o)+a];if(c.len||c.p)throw new Error("Invalid table entry");c.len=o,c.lit=n,a++}}}return!0}const q={c:0,lc:0};function ke(e,n,t,r){e=e<<8|gn(t,r),n+=8,q.c=e,q.lc=n}const K={c:0,lc:0};function J(e,n,t,r,i,o,a,h,c){if(e==n){r<8&&(ke(t,r,i,o),t=q.c,r=q.lc),r-=8;let l=t>>r;if(l=new Uint8Array([l])[0],h.value+l>c)return!1;const s=a[h.value-1];for(;l-- >0;)a[h.value++]=s}else if(h.value<c)a[h.value++]=e;else return!1;K.c=t,K.lc=r}function Re(e){return e&65535}function Ne(e){const n=Re(e);return n>32767?n-65536:n}const B={a:0,b:0};function be(e,n){const t=Ne(e),i=Ne(n),o=t+(i&1)+(i>>1),a=o,h=o-i;B.a=a,B.b=h}function Te(e,n){const t=Re(e),r=Re(n),i=t-(r>>1)&65535,o=r+i-32768&65535;B.a=o,B.b=i}function je(e,n,t,r,i,o,a){const h=a<16384,c=t>i?i:t;let l=1,s,f;for(;l<=c;)l<<=1;for(l>>=1,s=l,l>>=1;l>=1;){f=0;const w=f+o*(i-s),m=o*l,I=o*s,v=r*l,S=r*s;let T,L,X,he;for(;f<=w;f+=I){let G=f;const x=f+r*(t-s);for(;G<=x;G+=S){const Q=G+v,we=G+m,ne=we+v;h?(be(e[G+n],e[we+n]),T=B.a,X=B.b,be(e[Q+n],e[ne+n]),L=B.a,he=B.b,be(T,L),e[G+n]=B.a,e[Q+n]=B.b,be(X,he),e[we+n]=B.a,e[ne+n]=B.b):(Te(e[G+n],e[we+n]),T=B.a,X=B.b,Te(e[Q+n],e[ne+n]),L=B.a,he=B.b,Te(T,L),e[G+n]=B.a,e[Q+n]=B.b,Te(X,he),e[we+n]=B.a,e[ne+n]=B.b)}if(t&l){const Q=G+m;h?be(e[G+n],e[Q+n]):Te(e[G+n],e[Q+n]),T=B.a,e[Q+n]=B.b,e[G+n]=T}}if(i&l){let G=f;const x=f+r*(t-s);for(;G<=x;G+=S){const Q=G+v;h?be(e[G+n],e[Q+n]):Te(e[G+n],e[Q+n]),T=B.a,e[Q+n]=B.b,e[G+n]=T}}s=l,l>>=1}return f}function sn(e,n,t,r,i,o,a,h,c){let l=0,s=0;const f=a,w=Math.trunc(r.value+(i+7)/8);for(;r.value<w;)for(ke(l,s,t,r),l=q.c,s=q.lc;s>=14;){const I=l>>s-14&16383,v=n[I];if(v.len)s-=v.len,J(v.lit,o,l,s,t,r,h,c,f),l=K.c,s=K.lc;else{if(!v.p)throw new Error("hufDecode issues");let S;for(S=0;S<v.lit;S++){const T=ce(e[v.p[S]]);for(;s<T&&r.value<w;)ke(l,s,t,r),l=q.c,s=q.lc;if(s>=T&&Ue(e[v.p[S]])==(l>>s-T&(1<<T)-1)){s-=T,J(v.p[S],o,l,s,t,r,h,c,f),l=K.c,s=K.lc;break}}if(S==v.lit)throw new Error("hufDecode issues")}}const m=8-i&7;for(l>>=m,s-=m;s>0;){const I=n[l<<14-s&16383];if(I.len)s-=I.len,J(I.lit,o,l,s,t,r,h,c,f),l=K.c,s=K.lc;else throw new Error("hufDecode issues")}return!0}function He(e,n,t,r,i,o){const a={value:0},h=t.value,c=Ee(n,t),l=Ee(n,t);t.value+=4;const s=Ee(n,t);if(t.value+=4,c<0||c>=65537||l<0||l>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const f=new Array(65537),w=new Array(16384);U(w);const m=r-(t.value-h);if(M(e,t,m,c,l,f),s>8*(r-(t.value-h)))throw new Error("Something wrong with hufUncompress");oe(f,c,l,w),sn(f,w,e,t,s,l,o,i,a)}function en(e,n,t){for(let r=0;r<t;++r)n[r]=e[n[r]]}function ze(e){for(let n=1;n<e.length;n++){const t=e[n-1]+e[n]-128;e[n]=t}}function vn(e,n){let t=0,r=Math.floor((e.length+1)/2),i=0;const o=e.length-1;for(;!(i>o||(n[i++]=e[t++],i>o));)n[i++]=e[r++]}function En(e){let n=e.byteLength;const t=new Array;let r=0;const i=new DataView(e);for(;n>0;){const o=i.getInt8(r++);if(o<0){const a=-o;n-=a+1;for(let h=0;h<a;h++)t.push(i.getUint8(r++))}else{const a=o;n-=2;const h=i.getUint8(r++);for(let c=0;c<a+1;c++)t.push(h)}}return t}function kn(e,n,t,r,i,o){let a=new DataView(o.buffer);const h=t[e.idx[0]].width,c=t[e.idx[0]].height,l=3,s=Math.floor(h/8),f=Math.ceil(h/8),w=Math.ceil(c/8),m=h-(f-1)*8,I=c-(w-1)*8,v={value:0},S=new Array(l),T=new Array(l),L=new Array(l),X=new Array(l),he=new Array(l);for(let x=0;x<l;++x)he[x]=n[e.idx[x]],S[x]=x<1?0:S[x-1]+f*w,T[x]=new Float32Array(64),L[x]=new Uint16Array(64),X[x]=new Uint16Array(f*64);for(let x=0;x<w;++x){let Q=8;x==w-1&&(Q=I);let we=8;for(let F=0;F<f;++F){F==f-1&&(we=m);for(let Z=0;Z<l;++Z)L[Z].fill(0),L[Z][0]=i[S[Z]++],Dn(v,r,L[Z]),Fn(L[Z],T[Z]),Bn(T[Z]);Ln(T);for(let Z=0;Z<l;++Z)Pn(T[Z],X[Z],F*64)}let ne=0;for(let F=0;F<l;++F){const Z=t[e.idx[F]].type;for(let Ae=8*x;Ae<8*x+Q;++Ae){ne=he[F][Ae];for(let We=0;We<s;++We){const Ce=We*64+(Ae&7)*8;a.setUint16(ne+0*2*Z,X[F][Ce+0],!0),a.setUint16(ne+1*2*Z,X[F][Ce+1],!0),a.setUint16(ne+2*2*Z,X[F][Ce+2],!0),a.setUint16(ne+3*2*Z,X[F][Ce+3],!0),a.setUint16(ne+4*2*Z,X[F][Ce+4],!0),a.setUint16(ne+5*2*Z,X[F][Ce+5],!0),a.setUint16(ne+6*2*Z,X[F][Ce+6],!0),a.setUint16(ne+7*2*Z,X[F][Ce+7],!0),ne+=8*2*Z}}if(s!=f)for(let Ae=8*x;Ae<8*x+Q;++Ae){const We=he[F][Ae]+8*s*2*Z,Ce=s*64+(Ae&7)*8;for(let tn=0;tn<we;++tn)a.setUint16(We+tn*2*Z,X[F][Ce+tn],!0)}}}const G=new Uint16Array(h);a=new DataView(o.buffer);for(let x=0;x<l;++x){t[e.idx[x]].decoded=!0;const Q=t[e.idx[x]].type;if(t[x].type==2)for(let we=0;we<c;++we){const ne=he[x][we];for(let F=0;F<h;++F)G[F]=a.getUint16(ne+F*2*Q,!0);for(let F=0;F<h;++F)a.setFloat32(ne+F*2*Q,E(G[F]),!0)}}}function Dn(e,n,t){let r,i=1;for(;i<64;)r=n[e.value],r==65280?i=64:r>>8==255?i+=r&255:(t[i]=r,i++),e.value++}function Fn(e,n){n[0]=E(e[0]),n[1]=E(e[1]),n[2]=E(e[5]),n[3]=E(e[6]),n[4]=E(e[14]),n[5]=E(e[15]),n[6]=E(e[27]),n[7]=E(e[28]),n[8]=E(e[2]),n[9]=E(e[4]),n[10]=E(e[7]),n[11]=E(e[13]),n[12]=E(e[16]),n[13]=E(e[26]),n[14]=E(e[29]),n[15]=E(e[42]),n[16]=E(e[3]),n[17]=E(e[8]),n[18]=E(e[12]),n[19]=E(e[17]),n[20]=E(e[25]),n[21]=E(e[30]),n[22]=E(e[41]),n[23]=E(e[43]),n[24]=E(e[9]),n[25]=E(e[11]),n[26]=E(e[18]),n[27]=E(e[24]),n[28]=E(e[31]),n[29]=E(e[40]),n[30]=E(e[44]),n[31]=E(e[53]),n[32]=E(e[10]),n[33]=E(e[19]),n[34]=E(e[23]),n[35]=E(e[32]),n[36]=E(e[39]),n[37]=E(e[45]),n[38]=E(e[52]),n[39]=E(e[54]),n[40]=E(e[20]),n[41]=E(e[22]),n[42]=E(e[33]),n[43]=E(e[38]),n[44]=E(e[46]),n[45]=E(e[51]),n[46]=E(e[55]),n[47]=E(e[60]),n[48]=E(e[21]),n[49]=E(e[34]),n[50]=E(e[37]),n[51]=E(e[47]),n[52]=E(e[50]),n[53]=E(e[56]),n[54]=E(e[59]),n[55]=E(e[61]),n[56]=E(e[35]),n[57]=E(e[36]),n[58]=E(e[48]),n[59]=E(e[49]),n[60]=E(e[57]),n[61]=E(e[58]),n[62]=E(e[62]),n[63]=E(e[63])}function Bn(e){const n=.5*Math.cos(.7853975),t=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(5*3.14159/16),a=.5*Math.cos(3*3.14159/8),h=.5*Math.cos(7*3.14159/16),c=new Array(4),l=new Array(4),s=new Array(4),f=new Array(4);for(let w=0;w<8;++w){const m=w*8;c[0]=r*e[m+2],c[1]=a*e[m+2],c[2]=r*e[m+6],c[3]=a*e[m+6],l[0]=t*e[m+1]+i*e[m+3]+o*e[m+5]+h*e[m+7],l[1]=i*e[m+1]-h*e[m+3]-t*e[m+5]-o*e[m+7],l[2]=o*e[m+1]-t*e[m+3]+h*e[m+5]+i*e[m+7],l[3]=h*e[m+1]-o*e[m+3]+i*e[m+5]-t*e[m+7],s[0]=n*(e[m+0]+e[m+4]),s[3]=n*(e[m+0]-e[m+4]),s[1]=c[0]+c[3],s[2]=c[1]-c[2],f[0]=s[0]+s[1],f[1]=s[3]+s[2],f[2]=s[3]-s[2],f[3]=s[0]-s[1],e[m+0]=f[0]+l[0],e[m+1]=f[1]+l[1],e[m+2]=f[2]+l[2],e[m+3]=f[3]+l[3],e[m+4]=f[3]-l[3],e[m+5]=f[2]-l[2],e[m+6]=f[1]-l[1],e[m+7]=f[0]-l[0]}for(let w=0;w<8;++w)c[0]=r*e[16+w],c[1]=a*e[16+w],c[2]=r*e[48+w],c[3]=a*e[48+w],l[0]=t*e[8+w]+i*e[24+w]+o*e[40+w]+h*e[56+w],l[1]=i*e[8+w]-h*e[24+w]-t*e[40+w]-o*e[56+w],l[2]=o*e[8+w]-t*e[24+w]+h*e[40+w]+i*e[56+w],l[3]=h*e[8+w]-o*e[24+w]+i*e[40+w]-t*e[56+w],s[0]=n*(e[w]+e[32+w]),s[3]=n*(e[w]-e[32+w]),s[1]=c[0]+c[3],s[2]=c[1]-c[2],f[0]=s[0]+s[1],f[1]=s[3]+s[2],f[2]=s[3]-s[2],f[3]=s[0]-s[1],e[0+w]=f[0]+l[0],e[8+w]=f[1]+l[1],e[16+w]=f[2]+l[2],e[24+w]=f[3]+l[3],e[32+w]=f[3]-l[3],e[40+w]=f[2]-l[2],e[48+w]=f[1]-l[1],e[56+w]=f[0]-l[0]}function Ln(e){for(let n=0;n<64;++n){const t=e[0][n],r=e[1][n],i=e[2][n];e[0][n]=t+1.5747*i,e[1][n]=t-.1873*r-.4682*i,e[2][n]=t+1.8556*r}}function Pn(e,n,t){for(let r=0;r<64;++r)n[t+r]=Le.toHalfFloat(Zn(e[r]))}function Zn(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(N,Math.abs(e)-1)}function ln(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function Hn(e){const n=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),t=new Uint8Array(En(n)),r=new Uint8Array(t.length);return ze(t),vn(t,r),new DataView(r.buffer)}function an(e){const n=e.array.slice(e.offset.value,e.offset.value+e.size),t=rn(n),r=new Uint8Array(t.length);return ze(t),vn(t,r),new DataView(r.buffer)}function zn(e){const n=e.viewer,t={value:e.offset.value},r=new Uint16Array(e.columns*e.lines*(e.inputChannels.length*e.type)),i=new Uint8Array(8192);let o=0;const a=new Array(e.inputChannels.length);for(let I=0,v=e.inputChannels.length;I<v;I++)a[I]={},a[I].start=o,a[I].end=a[I].start,a[I].nx=e.columns,a[I].ny=e.lines,a[I].size=e.type,o+=a[I].nx*a[I].ny*a[I].size;const h=Ge(n,t),c=Ge(n,t);if(c>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(h<=c)for(let I=0;I<c-h+1;I++)i[I+h]=Me(n,t);const l=new Uint16Array(65536),s=k(i,l),f=Ee(n,t);He(e.array,n,t,f,r,o);for(let I=0;I<e.inputChannels.length;++I){const v=a[I];for(let S=0;S<a[I].size;++S)je(r,v.start+S,v.nx,v.size,v.ny,v.nx*v.size,s)}en(l,r,o);let w=0;const m=new Uint8Array(r.buffer.byteLength);for(let I=0;I<e.lines;I++)for(let v=0;v<e.inputChannels.length;v++){const S=a[v],T=S.nx*S.size,L=new Uint8Array(r.buffer,S.end*2,T*2);m.set(L,w),w+=T*2,S.end+=T}return new DataView(m.buffer)}function Gn(e){const n=e.array.slice(e.offset.value,e.offset.value+e.size),t=rn(n),r=e.inputChannels.length*e.lines*e.columns*e.totalBytes,i=new ArrayBuffer(r),o=new DataView(i);let a=0,h=0;const c=new Array(4);for(let l=0;l<e.lines;l++)for(let s=0;s<e.inputChannels.length;s++){let f=0;switch(e.inputChannels[s].pixelType){case 1:c[0]=a,c[1]=c[0]+e.columns,a=c[1]+e.columns;for(let m=0;m<e.columns;++m){const I=t[c[0]++]<<8|t[c[1]++];f+=I,o.setUint16(h,f,!0),h+=2}break;case 2:c[0]=a,c[1]=c[0]+e.columns,c[2]=c[1]+e.columns,a=c[2]+e.columns;for(let m=0;m<e.columns;++m){const I=t[c[0]++]<<24|t[c[1]++]<<16|t[c[2]++]<<8;f+=I,o.setUint32(h,f,!0),h+=4}break}}return o}function wn(e){const n=e.viewer,t={value:e.offset.value},r=new Uint8Array(e.columns*e.lines*(e.inputChannels.length*e.type*2)),i={version:ue(n,t),unknownUncompressedSize:ue(n,t),unknownCompressedSize:ue(n,t),acCompressedSize:ue(n,t),dcCompressedSize:ue(n,t),rleCompressedSize:ue(n,t),rleUncompressedSize:ue(n,t),rleRawSize:ue(n,t),totalAcUncompressedCount:ue(n,t),totalDcUncompressedCount:ue(n,t),acCompression:ue(n,t)};if(i.version<2)throw new Error("EXRLoader.parse: "+De.compression+" version "+i.version+" is unsupported");const o=new Array;let a=Ge(n,t)-2;for(;a>0;){const v=nn(n.buffer,t),S=Me(n,t),T=S>>2&3,L=(S>>4)-1,X=new Int8Array([L])[0],he=Me(n,t);o.push({name:v,index:X,type:he,compression:T}),a-=v.length+3}const h=De.channels,c=new Array(e.inputChannels.length);for(let v=0;v<e.inputChannels.length;++v){const S=c[v]={},T=h[v];S.name=T.name,S.compression=0,S.decoded=!1,S.type=T.pixelType,S.pLinear=T.pLinear,S.width=e.columns,S.height=e.lines}const l={idx:new Array(3)};for(let v=0;v<e.inputChannels.length;++v){const S=c[v];for(let T=0;T<o.length;++T){const L=o[T];S.name==L.name&&(S.compression=L.compression,L.index>=0&&(l.idx[L.index]=v),S.offset=v)}}let s,f,w;if(i.acCompressedSize>0)switch(i.acCompression){case 0:s=new Uint16Array(i.totalAcUncompressedCount),He(e.array,n,t,i.acCompressedSize,s,i.totalAcUncompressedCount);break;case 1:const v=e.array.slice(t.value,t.value+i.totalAcUncompressedCount),S=rn(v);s=new Uint16Array(S.buffer),t.value+=i.totalAcUncompressedCount;break}if(i.dcCompressedSize>0){const v={array:e.array,offset:t,size:i.dcCompressedSize};f=new Uint16Array(an(v).buffer),t.value+=i.dcCompressedSize}if(i.rleRawSize>0){const v=e.array.slice(t.value,t.value+i.rleCompressedSize),S=rn(v);w=En(S.buffer),t.value+=i.rleCompressedSize}let m=0;const I=new Array(c.length);for(let v=0;v<I.length;++v)I[v]=new Array;for(let v=0;v<e.lines;++v)for(let S=0;S<c.length;++S)I[S].push(m),m+=c[S].width*e.type*2;kn(l,I,c,s,f,r);for(let v=0;v<c.length;++v){const S=c[v];if(!S.decoded)switch(S.compression){case 2:let T=0,L=0;for(let X=0;X<e.lines;++X){let he=I[v][T];for(let G=0;G<S.width;++G){for(let x=0;x<2*S.type;++x)r[he++]=w[L+x*S.width*S.height];L++}T++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(r.buffer)}function nn(e,n){const t=new Uint8Array(e);let r=0;for(;t[n.value+r]!=0;)r+=1;const i=new TextDecoder().decode(t.slice(n.value,n.value+r));return n.value=n.value+r+1,i}function Wn(e,n,t){const r=new TextDecoder().decode(new Uint8Array(e).slice(n.value,n.value+t));return n.value=n.value+t,r}function Yn(e,n){const t=ve(e,n),r=Ee(e,n);return[t,r]}function Xn(e,n){const t=Ee(e,n),r=Ee(e,n);return[t,r]}function ve(e,n){const t=e.getInt32(n.value,!0);return n.value=n.value+4,t}function Ee(e,n){const t=e.getUint32(n.value,!0);return n.value=n.value+4,t}function gn(e,n){const t=e[n.value];return n.value=n.value+1,t}function Me(e,n){const t=e.getUint8(n.value);return n.value=n.value+1,t}const ue=function(e,n){let t;return"getBigInt64"in DataView.prototype?t=Number(e.getBigInt64(n.value,!0)):t=e.getUint32(n.value+4,!0)+Number(e.getUint32(n.value,!0)<<32),n.value+=8,t};function ie(e,n){const t=e.getFloat32(n.value,!0);return n.value+=4,t}function Kn(e,n){return Le.toHalfFloat(ie(e,n))}function E(e){const n=(e&31744)>>10,t=e&1023;return(e>>15?-1:1)*(n?n===31?t?NaN:1/0:Math.pow(2,n-15)*(1+t/1024):6103515625e-14*(t/1024))}function Ge(e,n){const t=e.getUint16(n.value,!0);return n.value+=2,t}function Vn(e,n){return E(Ge(e,n))}function qn(e,n,t,r){const i=t.value,o=[];for(;t.value<i+r-1;){const a=nn(n,t),h=ve(e,t),c=Me(e,t);t.value+=3;const l=ve(e,t),s=ve(e,t);o.push({name:a,pixelType:h,pLinear:c,xSampling:l,ySampling:s})}return t.value+=1,o}function Jn(e,n){const t=ie(e,n),r=ie(e,n),i=ie(e,n),o=ie(e,n),a=ie(e,n),h=ie(e,n),c=ie(e,n),l=ie(e,n);return{redX:t,redY:r,greenX:i,greenY:o,blueX:a,blueY:h,whiteX:c,whiteY:l}}function Qn(e,n){const t=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],r=Me(e,n);return t[r]}function $n(e,n){const t=ve(e,n),r=ve(e,n),i=ve(e,n),o=ve(e,n);return{xMin:t,yMin:r,xMax:i,yMax:o}}function jn(e,n){const t=["INCREASING_Y","DECREASING_Y","RANDOM_Y"],r=Me(e,n);return t[r]}function et(e,n){const t=["ENVMAP_LATLONG","ENVMAP_CUBE"],r=Me(e,n);return t[r]}function nt(e,n){const t=["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"],r=["ROUND_DOWN","ROUND_UP"],i=Ee(e,n),o=Ee(e,n),a=Me(e,n);return{xSize:i,ySize:o,levelMode:t[a&15],roundingMode:r[a>>4]}}function tt(e,n){const t=ie(e,n),r=ie(e,n);return[t,r]}function rt(e,n){const t=ie(e,n),r=ie(e,n),i=ie(e,n);return[t,r,i]}function ot(e,n,t,r,i){if(r==="string"||r==="stringvector"||r==="iccProfile")return Wn(n,t,i);if(r==="chlist")return qn(e,n,t,i);if(r==="chromaticities")return Jn(e,t);if(r==="compression")return Qn(e,t);if(r==="box2i")return $n(e,t);if(r==="envmap")return et(e,t);if(r==="tiledesc")return nt(e,t);if(r==="lineOrder")return jn(e,t);if(r==="float")return ie(e,t);if(r==="v2f")return tt(e,t);if(r==="v3f")return rt(e,t);if(r==="int")return ve(e,t);if(r==="rational")return Yn(e,t);if(r==="timecode")return Xn(e,t);if(r==="preview")return t.value+=i,"skipped";t.value+=i}function it(e,n){const t=Math.log2(e);return n=="ROUND_DOWN"?Math.floor(t):Math.ceil(t)}function st(e,n,t){let r=0;switch(e.levelMode){case"ONE_LEVEL":r=1;break;case"MIPMAP_LEVELS":r=it(Math.max(n,t),e.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return r}function _n(e,n,t,r){const i=new Array(e);for(let o=0;o<e;o++){const a=1<<o;let h=n/a|0;r=="ROUND_UP"&&h*a<n&&(h+=1);const c=Math.max(h,1);i[o]=(c+t-1)/t|0}return i}function lt(){const e=this,n=e.offset,t={value:0};for(let r=0;r<e.tileCount;r++){const i=ve(e.viewer,n),o=ve(e.viewer,n);n.value+=8,e.size=Ee(e.viewer,n);const a=i*e.blockWidth,h=o*e.blockHeight;e.columns=a+e.blockWidth>e.width?e.width-a:e.blockWidth,e.lines=h+e.blockHeight>e.height?e.height-h:e.blockHeight;const c=e.columns*e.totalBytes,s=e.size<e.lines*c?e.uncompress(e):ln(e);n.value+=e.size;for(let f=0;f<e.lines;f++){const w=f*e.columns*e.totalBytes;for(let m=0;m<e.inputChannels.length;m++){const I=De.channels[m].name,v=e.channelByteOffsets[I]*e.columns,S=e.decodeChannels[I];if(S===void 0)continue;t.value=w+v;const T=(e.height-(1+h+f))*e.outLineWidth;for(let L=0;L<e.columns;L++){const X=T+(L+a)*e.outputChannels+S;e.byteArray[X]=e.getter(s,t)}}}}}function at(){const e=this,n=e.offset,t={value:0};for(let r=0;r<e.height/e.blockHeight;r++){const i=ve(e.viewer,n)-De.dataWindow.yMin;e.size=Ee(e.viewer,n),e.lines=i+e.blockHeight>e.height?e.height-i:e.blockHeight;const o=e.columns*e.totalBytes,h=e.size<e.lines*o?e.uncompress(e):ln(e);n.value+=e.size;for(let c=0;c<e.blockHeight;c++){const l=r*e.blockHeight,s=c+e.scanOrder(l);if(s>=e.height)continue;const f=c*o,w=(e.height-1-s)*e.outLineWidth;for(let m=0;m<e.inputChannels.length;m++){const I=De.channels[m].name,v=e.channelByteOffsets[I]*e.columns,S=e.decodeChannels[I];if(S!==void 0){t.value=f+v;for(let T=0;T<e.columns;T++){const L=w+T*e.outputChannels+S;e.byteArray[L]=e.getter(h,t)}}}}}}function ct(e,n,t){const r={};if(e.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");r.version=e.getUint8(4);const i=e.getUint8(5);r.spec={singleTile:!!(i&2),longName:!!(i&4),deepFormat:!!(i&8),multiPart:!!(i&16)},t.value=8;let o=!0;for(;o;){const a=nn(n,t);if(a==0)o=!1;else{const h=nn(n,t),c=Ee(e,t),l=ot(e,n,t,h,c);l===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${h}'.`):r[a]=l}}if(i&-7)throw console.error("THREE.EXRHeader:",r),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return r}function ut(e,n,t,r,i){const o={size:0,viewer:n,array:t,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,inputChannels:e.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:pn};switch(e.compression){case"NO_COMPRESSION":o.blockHeight=1,o.uncompress=ln;break;case"RLE_COMPRESSION":o.blockHeight=1,o.uncompress=Hn;break;case"ZIPS_COMPRESSION":o.blockHeight=1,o.uncompress=an;break;case"ZIP_COMPRESSION":o.blockHeight=16,o.uncompress=an;break;case"PIZ_COMPRESSION":o.blockHeight=32,o.uncompress=zn;break;case"PXR24_COMPRESSION":o.blockHeight=16,o.uncompress=Gn;break;case"DWAA_COMPRESSION":o.blockHeight=32,o.uncompress=wn;break;case"DWAB_COMPRESSION":o.blockHeight=256,o.uncompress=wn;break;default:throw new Error("EXRLoader.parse: "+e.compression+" is unsupported")}const a={};for(const s of e.channels)switch(s.name){case"Y":case"R":case"G":case"B":case"A":a[s.name]=!0,o.type=s.pixelType}let h=!1;if(a.R&&a.G&&a.B)h=!a.A,o.outputChannels=4,o.decodeChannels={R:0,G:1,B:2,A:3};else if(a.Y)o.outputChannels=1,o.decodeChannels={Y:0};else throw new Error("EXRLoader.parse: file contains unsupported data channels.");if(o.type==1)switch(i){case Ze:o.getter=Vn;break;case Oe:o.getter=Ge;break}else if(o.type==2)switch(i){case Ze:o.getter=ie;break;case Oe:o.getter=Kn}else throw new Error("EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".");o.columns=o.width;const c=o.width*o.height*o.outputChannels;switch(i){case Ze:o.byteArray=new Float32Array(c),h&&o.byteArray.fill(1,0,c);break;case Oe:o.byteArray=new Uint16Array(c),h&&o.byteArray.fill(15360,0,c);break;default:console.error("THREE.EXRLoader: unsupported type: ",i);break}let l=0;for(const s of e.channels)o.decodeChannels[s.name]!==void 0&&(o.channelByteOffsets[s.name]=l),l+=s.pixelType*2;if(o.totalBytes=l,o.outLineWidth=o.width*o.outputChannels,e.lineOrder==="INCREASING_Y"?o.scanOrder=s=>s:o.scanOrder=s=>o.height-1-s,o.outputChannels==4?(o.format=wt,o.colorSpace=pn):(o.format=gt,o.colorSpace=_t),e.spec.singleTile){o.blockHeight=e.tiles.ySize,o.blockWidth=e.tiles.xSize;const s=st(e.tiles,o.width,o.height),f=_n(s,o.width,e.tiles.xSize,e.tiles.roundingMode),w=_n(s,o.height,e.tiles.ySize,e.tiles.roundingMode);o.tileCount=f[0]*w[0];for(let m=0;m<s;m++)for(let I=0;I<w[m];I++)for(let v=0;v<f[m];v++)ue(n,r);o.decode=lt.bind(o)}else{o.blockWidth=o.width;const s=Math.ceil(o.height/o.blockHeight);for(let f=0;f<s;f++)ue(n,r);o.decode=at.bind(o)}return o}const Sn={value:0},yn=new DataView(u),ht=new Uint8Array(u),De=ct(yn,u,Sn),Be=ut(De,yn,ht,Sn,this.type);return Be.decode(),{header:De,width:Be.width,height:Be.height,data:Be.byteArray,format:Be.format,colorSpace:Be.colorSpace,type:this.type}}setDataType(u){return this.type=u,this}load(u,g,R,y){function P(b,D){b.colorSpace=D.colorSpace,b.minFilter=on,b.magFilter=on,b.generateMipmaps=!1,b.flipY=!1,g&&g(b,D)}return super.load(u,P,R,y)}}class Qt extends Rn{constructor(u){super(u),this.type=Oe}parse(u){const b=function(d,N){switch(d){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},te=`
`,_=function(d,N,k){N=N||1024;let O=d.pos,z=-1,A=0,Y="",M=String.fromCharCode.apply(null,new Uint16Array(d.subarray(O,O+128)));for(;0>(z=M.indexOf(te))&&A<N&&O<d.byteLength;)Y+=M,A+=M.length,O+=128,M+=String.fromCharCode.apply(null,new Uint16Array(d.subarray(O,O+128)));return-1<z?(d.pos+=A+z+1,Y+M.slice(0,z)):!1},C=function(d){const N=/^#\?(\S+)/,k=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*FORMAT=(\S+)\s*$/,z=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,A={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Y,M;for((d.pos>=d.byteLength||!(Y=_(d)))&&b(1,"no header found"),(M=Y.match(N))||b(3,"bad initial token"),A.valid|=1,A.programtype=M[1],A.string+=Y+`
`;Y=_(d),Y!==!1;){if(A.string+=Y+`
`,Y.charAt(0)==="#"){A.comments+=Y+`
`;continue}if((M=Y.match(k))&&(A.gamma=parseFloat(M[1])),(M=Y.match(U))&&(A.exposure=parseFloat(M[1])),(M=Y.match(O))&&(A.valid|=2,A.format=M[1]),(M=Y.match(z))&&(A.valid|=4,A.height=parseInt(M[1],10),A.width=parseInt(M[2],10)),A.valid&2&&A.valid&4)break}return A.valid&2||b(3,"missing format specifier"),A.valid&4||b(3,"missing image size specifier"),A},j=function(d,N,k){const U=N;if(U<8||U>32767||d[0]!==2||d[1]!==2||d[2]&128)return new Uint8Array(d);U!==(d[2]<<8|d[3])&&b(3,"wrong scanline width");const O=new Uint8Array(4*N*k);O.length||b(4,"unable to allocate buffer space");let z=0,A=0;const Y=4*U,M=new Uint8Array(4),ce=new Uint8Array(Y);let Ue=k;for(;Ue>0&&A<d.byteLength;){A+4>d.byteLength&&b(1),M[0]=d[A++],M[1]=d[A++],M[2]=d[A++],M[3]=d[A++],(M[0]!=2||M[1]!=2||(M[2]<<8|M[3])!=U)&&b(3,"bad rgbe scanline format");let oe=0,q;for(;oe<Y&&A<d.byteLength;){q=d[A++];const K=q>128;if(K&&(q-=128),(q===0||oe+q>Y)&&b(3,"bad scanline data"),K){const J=d[A++];for(let Re=0;Re<q;Re++)ce[oe++]=J}else ce.set(d.subarray(A,A+q),oe),oe+=q,A+=q}const ke=U;for(let K=0;K<ke;K++){let J=0;O[z]=ce[K+J],J+=U,O[z+1]=ce[K+J],J+=U,O[z+2]=ce[K+J],J+=U,O[z+3]=ce[K+J],z+=4}Ue--}return O},pe=function(d,N,k,U){const O=d[N+3],z=Math.pow(2,O-128)/255;k[U+0]=d[N+0]*z,k[U+1]=d[N+1]*z,k[U+2]=d[N+2]*z,k[U+3]=1},fe=function(d,N,k,U){const O=d[N+3],z=Math.pow(2,O-128)/255;k[U+0]=Le.toHalfFloat(Math.min(d[N+0]*z,65504)),k[U+1]=Le.toHalfFloat(Math.min(d[N+1]*z,65504)),k[U+2]=Le.toHalfFloat(Math.min(d[N+2]*z,65504)),k[U+3]=Le.toHalfFloat(1)},H=new Uint8Array(u);H.pos=0;const V=C(H),ae=V.width,ee=V.height,le=j(H.subarray(H.pos),ae,ee);let re,de,me;switch(this.type){case Ze:me=le.length/4;const d=new Float32Array(me*4);for(let k=0;k<me;k++)pe(le,k*4,d,k*4);re=d,de=Ze;break;case Oe:me=le.length/4;const N=new Uint16Array(me*4);for(let k=0;k<me;k++)fe(le,k*4,N,k*4);re=N,de=Oe;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:ae,height:ee,data:re,header:V.string,gamma:V.gamma,exposure:V.exposure,type:de}}setDataType(u){return this.type=u,this}load(u,g,R,y){function P(b,D){switch(b.type){case Ze:case Oe:b.colorSpace=pn,b.minFilter=on,b.magFilter=on,b.generateMipmaps=!1,b.flipY=!0;break}g&&g(b,D)}return super.load(u,P,R,y)}}class $t extends Tn{constructor(u,g,R,y=128){if(g<=0||R<=0||y<=0)throw new Error("GroundedSkybox height, radius, and resolution must be positive.");const P=new St(R,2*y,y);P.scale(1,1,-1);const b=P.getAttribute("position"),D=new yt;for(let $=0;$<b.count;++$)if(D.fromBufferAttribute(b,$),D.y<0){const se=-g*3/2,te=D.y<se?-g/D.y:1-D.y*D.y/(3*se*se);D.multiplyScalar(te),D.toArray(b.array,3*$)}b.needsUpdate=!0,super(P,new It({map:u,depthWrite:!1}))}}const ge={};function jt(p,u){dn(u,!0);const g=dt();let R=Ve(u,"skybox",15),y=Ve(u,"texture",15),P=Ve(u,"ground",3,!1),b=Ve(u,"isBackground",3,!1),D=Ve(u,"scene",19,()=>g.scene);const $=kt(),se=At();Mt({get scene(){return D()},get isBackground(){return b()},get texture(){return y()}});const te=Ye(()=>{var H;return((H=u.url)==null?void 0:H.endsWith("exr"))??!1}),_=Ye(()=>{var H;return((H=u.url)==null?void 0:H.endsWith("hdr"))??!1}),C=Ye(()=>{if(u.url!==void 0)return ye(te)?(ge.exr??(ge.exr=new Jt),ge.exr):ye(_)?(ge.hdr??(ge.hdr=new Qt),ge.hdr):(ge.tex??(ge.tex=new Ct),ge.tex)});bn(()=>{if(u.url!==void 0&&ye(C)!==void 0){const H=$(se.remember(()=>ye(C).loadAsync(u.url),[u.url]));return H.then(V=>{V.mapping=bt,y(V)}),()=>{H.then(V=>{V.dispose()})}}});var j=In(),pe=qe(j);{var fe=H=>{var V=In();const ae=Ye(()=>P()===!0?{}:P());var ee=qe(V);{var le=re=>{var de=Ye(()=>[y(),ye(ae).height??1,ye(ae).radius??1,ye(ae).resolution??128]);Fe(re,{is:$t,oncreate:()=>()=>{R(void 0)},get args(){return ye(de)},get ref(){return R()},set ref(me){R(me)}})};hn(ee,re=>{y()&&re(le)})}Je(H,V)};hn(pe,H=>{P()&&H(fe)})}Je(p,j),Cn()}var er=mn("<!> <!>",1),nr=mn("<!> <!>",1),tr=mn("<!> <!> <!> <!>",1);function rr(p,u){dn(u,!0);let g=mt(void 0);async function R(){const _=document.createElement("video");_.autoplay=!0,_.playsInline=!0;try{const C=await navigator.mediaDevices.getUserMedia({video:!0});_.srcObject=C}catch(C){console.error("Unable to access webcam:",C);return}await new Promise(C=>_.onloadedmetadata=C),vt(g,Et(new Tt(_)))}bn(()=>{R()});const y=new Tn;Rt(_=>{y.rotation.y+=_});var P=tr(),b=qe(P);Ke(b,()=>Fe.PerspectiveCamera,(_,C)=>{C(_,{makeDefault:!0,"position.z":5,children:(j,pe)=>{xt(j,{})},$$slots:{default:!0}})});var D=Xe(b,2);Ke(D,()=>Fe.DirectionalLight,(_,C)=>{C(_,{})});var $=Xe(D,2);Ke($,()=>Fe.AmbientLight,(_,C)=>{C(_,{})});var se=Xe($,2);{var te=_=>{var C=nr(),j=qe(C);Fe(j,{is:y,children:(fe,H)=>{var V=er(),ae=qe(V);Ke(ae,()=>Fe.TorusKnotGeometry,(le,re)=>{re(le,{args:[1,.4,256,64]})});var ee=Xe(ae,2);Ke(ee,()=>Fe.MeshStandardMaterial,(le,re)=>{re(le,{roughness:.1,metalness:1,get envMap(){return ye(g)}})}),Je(fe,V)},$$slots:{default:!0}});var pe=Xe(j,2);jt(pe,{get texture(){return ye(g)}}),Je(_,C)};hn(se,_=>{ye(g)&&_(te)})}Je(p,P),Cn()}const wr=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"}));export{rr as _,wr as a};
