import{b as f,t as _}from"../chunks/disclose-version.CY5IDNoG.js";import"../chunks/legacy.PQa5ncrZ.js";import{p as G,v as L,w as a,x as v,y as g,t as Q,z as n,A as V}from"../chunks/runtime.XPaRurxh.js";import{i as j}from"../chunks/lifecycle.CxaT9aiB.js";import{s as B,a as H}from"../chunks/props.Dz65N0hT.js";import{u as E,C as F,V as A,I as J,a as K,T as o,M as N,Q as R}from"../chunks/T.y93Wq12a.js";import"../chunks/index.Cv2FY5Xh.js";import{O as W}from"../chunks/Outlines.F55l66q_.js";import{u as X}from"../chunks/auth.svelte.CNkesG8U.js";import{h as Y}from"../chunks/color.D7bleQK4.js";var Z=_("<!> <!>",1),tt=_("<!> <!> <!>",1),et=_("<!> <!> <!> <!> <!>",1);function pt(C,k){G(k,!1);const P=B(),q=()=>H(D,"$size",P),{size:D}=E(),{frequencyData:w}=X(),d=16,p=1,M=d*p/2,I=new F("red"),i=new A,x=new R,u=new A(1,1,1),c=new N,e=L(new J(void 0,void 0,d*d));let h=0;for(let t=0;t<d;t+=1)for(let r=0;r<d;r+=1)i.set(t*p-M,0,r*p-M),c.setPosition(i),a(e).setMatrixAt(h,c),a(e).setColorAt(h,Y(I,t*r/1e4)),h+=1;v(e,a(e).instanceMatrix.needsUpdate=!0),a(e).instanceColor&&v(e,a(e).instanceColor.needsUpdate=!0),K(()=>{for(let t=0,r=w.current.length/2;t<r;t+=1){const s=w.current[t];s&&(a(e).getMatrixAt(t,c),c.decompose(i,x,u),i.y=s/75,u.set(1,i.y*4+1,1),c.compose(i,x,u),a(e).setMatrixAt(t,c))}v(e,a(e).instanceMatrix.needsUpdate=!0)}),j();var $=et(),y=g($),O=V(()=>q().width/40);o.OrthographicCamera(y,{makeDefault:!0,position:[-28,60,65],get zoom(){return a(O)},oncreate:t=>t.lookAt(0,0,0)});var S=n(y,2);o.AmbientLight(S,{intensity:.5});var b=n(S,2);o.DirectionalLight(b,{castShadow:!0,"shadow.camera.left":-15,"shadow.camera.right":15,"shadow.camera.top":15,"shadow.camera.bottom":-15,"shadow.mapSize.width":2048,"shadow.mapSize.height":2048,intensity:3,position:[10,10,10]});var z=n(b,2);o.Mesh(z,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(t,r)=>{var s=Z(),m=g(s);o.PlaneGeometry(m,{args:[100,100]});var l=n(m,2);o.MeshStandardMaterial(l,{color:"black"}),f(t,s)},$$slots:{default:!0}});var T=n(z,2);o(T,{get is(){return a(e)},castShadow:!0,receiveShadow:!0,children:(t,r)=>{var s=tt(),m=g(s);o.BoxGeometry(m,{args:[.5,.5,.5]});var l=n(m,2);o.MeshStandardMaterial(l,{});var U=n(l,2);W(U,{color:"black"}),f(t,s)},$$slots:{default:!0}}),f(C,$),Q()}export{pt as component};
