import"./DsnmJJEf.js";import"./C3CaoZbk.js";import{Z as U,I as j,g as a,as as h,$ as _,a0 as u,x as D,a3 as d,a1 as p,a2 as G,aq as L}from"./Dj-DrZoY.js";import{i as V}from"./BTE88G2Y.js";import{i as Z}from"./DCkL2FKZ.js";import{b as B,s as H}from"./HA0OJ1C7.js";import{g0 as Q,a as E,V as S,M as F,ed as J,fZ as K,f_ as r,bg as N}from"./C4vSLsTb.js";import{a as R}from"./CtZujQWG.js";import{h as W}from"./D7bleQK4.js";var X=_("<!> <!>",1),Y=_("<!> <!>",1),ee=_("<!> <!> <!> <!> <!>",1);function te(z,A){U(A,!1);const P=()=>H(T,"$size",k),[k,C]=B(),{scene:ae,size:T}=Q(),g=R(),l=128,$=1,q=l*$/2,I=new E("red"),i=new S,v=new N,f=new S(1,1,1),c=new F,t=j(new J(void 0,void 0,l));for(let e=0;e<l;e+=1)i.set(0,0,e*$-q),c.setPosition(i),a(t).setMatrixAt(e,c),a(t).setColorAt(e,W(I,e/1e4));h(t,a(t).instanceMatrix.needsUpdate=!0),a(t).instanceColor&&h(t,a(t).instanceColor.needsUpdate=!0),K(()=>{console.log(l,g.spectrum01.length);for(let e=0,n=l;e<n;e+=1){const o=g.spectrum01[e];o&&(a(t).getMatrixAt(e,c),c.decompose(i,v,f),i.y=o*20,f.set(1,i.y*4+1,1),c.compose(i,v,f),a(t).setMatrixAt(e,c))}h(t,a(t).instanceMatrix.needsUpdate=!0)}),Z();var w=ee(),M=u(w);{let e=D(()=>P().width/175);r.OrthographicCamera(M,{makeDefault:!0,position:[-20,20,20],get zoom(){return a(e)},oncreate:n=>n.lookAt(0,0,0),near:-200,far:200})}var b=d(M,2);r.AmbientLight(b,{intensity:.5});var x=d(b,2);{const e=(n,o)=>{var s=L(),m=u(s);V(m,oe=>{}),p(n,s)};r.DirectionalLight(x,{castShadow:!0,"shadow.camera.left":-200,"shadow.camera.right":200,"shadow.camera.top":200,"shadow.camera.bottom":-200,"shadow.mapSize.width":4096,"shadow.mapSize.height":4096,intensity:3,position:[30,30,10],children:e,$$slots:{default:!0}})}var y=d(x,2);r.Mesh(y,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(e,n)=>{var o=X(),s=u(o);r.PlaneGeometry(s,{args:[500,500]});var m=d(s,2);r.MeshStandardMaterial(m,{color:"black"}),p(e,o)},$$slots:{default:!0}});var O=d(y,2);r(O,{get is(){return a(t)},castShadow:!0,receiveShadow:!0,children:(e,n)=>{var o=Y(),s=u(o);r.BoxGeometry(s,{args:[.5,.5,.5]});var m=d(s,2);r.MeshStandardMaterial(m,{}),p(e,o)},$$slots:{default:!0}}),p(z,w),G(),C()}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{te as _,pe as a};
