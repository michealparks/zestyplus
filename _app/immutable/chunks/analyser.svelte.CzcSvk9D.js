var s=r=>{throw TypeError(r)};var l=(r,e,t)=>e.has(r)||s("Cannot "+t);var c=(r,e,t)=>(l(r,e,"read from private field"),t?t.call(r):e.get(r)),u=(r,e,t)=>e.has(r)?s("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);import{C as f,z as d,D as m}from"./runtime.liGrBqgh.js";import{p as g}from"./props.B9ZiqexT.js";const n={current:void 0},o={current:new Uint8Array},i=1024,A=async()=>{const r=await navigator.mediaDevices.getUserMedia({audio:{backgroundBlur:!1,echoCancellation:!1}}),e=new AudioContext,t=e.createMediaStreamSource(r);n.current=e.createAnalyser(),n.current.fftSize=i,t.connect(n.current)},h=async()=>{try{await A()}catch(t){console.error("Error accessing microphone:",t)}if(!n.current){console.error("No audio analyser!");return}const r=n.current.frequencyBinCount;o.current=new Uint8Array(r);const e=()=>{requestAnimationFrame(e),n.current!==void 0&&n.current.getByteFrequencyData(o.current)};e(),requestAnimationFrame(()=>y.current=!0)};var a;class p{constructor(){u(this,a,f(!1))}get current(){return d(c(this,a))}set current(e){m(c(this,a),g(e))}}a=new WeakMap;const y=new p,q={fttSize:i,frequencyData:o,analyserReady:y,startAnalyser:h},v=()=>q;export{v as u};
