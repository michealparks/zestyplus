import"./DsnmJJEf.js";import"./Phn2UMYN.js";import{a3 as q,z as D,i as a,a4 as h,a7 as _,a8 as u,o as G,aa as c,a9 as f,a5 as I,as as L}from"./Wk8iZnnz.js";import{i as V}from"./CE2DFtFa.js";import{i as B}from"./gF5IghNg.js";import{b as H,s as Q}from"./oafpEiTJ.js";import{fZ as Z,a as E,V as S,M as F,ed as J,f_ as K,f$ as r,bg as N}from"./CtU81MLD.js";import{u as R}from"./CXVFCYzG.js";import{h as W}from"./D7bleQK4.js";var X=_("<!> <!>",1),Y=_("<!> <!>",1),ee=_("<!> <!> <!> <!> <!>",1);function te(x,z){q(z,!1);const A=()=>Q(C,"$size",P),[P,k]=H(),{scene:ae,size:C}=Z(),T=R(),m=128,g=1,O=m*g/2,U=new E("red"),i=new S,$=new N,p=new S(1,1,1),d=new F,t=D(new J(void 0,void 0,m));for(let e=0;e<m;e+=1)i.set(0,0,e*g-O),d.setPosition(i),a(t).setMatrixAt(e,d),a(t).setColorAt(e,W(U,e/1e4));h(t,a(t).instanceMatrix.needsUpdate=!0),a(t).instanceColor&&h(t,a(t).instanceColor.needsUpdate=!0),K(()=>{for(let e=0,n=m;e<n;e+=1){const o=T.spectrum01[e]??0;o&&(a(t).getMatrixAt(e,d),d.decompose(i,$,p),i.y=o*20,p.set(1,i.y*4+1,1),d.compose(i,$,p),a(t).setMatrixAt(e,d))}h(t,a(t).instanceMatrix.needsUpdate=!0)}),B();var v=ee(),w=u(v);{let e=G(()=>A().width/175);r.OrthographicCamera(w,{makeDefault:!0,position:[-20,20,20],get zoom(){return a(e)},oncreate:n=>n.lookAt(0,0,0),near:-200,far:200})}var M=c(w,2);r.AmbientLight(M,{intensity:.5});var b=c(M,2);{const e=(n,o)=>{var s=L(),l=u(s);V(l,oe=>{}),f(n,s)};r.DirectionalLight(b,{castShadow:!0,"shadow.camera.left":-200,"shadow.camera.right":200,"shadow.camera.top":200,"shadow.camera.bottom":-200,"shadow.mapSize.width":4096,"shadow.mapSize.height":4096,intensity:3,position:[30,30,10],children:e,$$slots:{default:!0}})}var y=c(b,2);r.Mesh(y,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(e,n)=>{var o=X(),s=u(o);r.PlaneGeometry(s,{args:[500,500]});var l=c(s,2);r.MeshStandardMaterial(l,{color:"black"}),f(e,o)},$$slots:{default:!0}});var j=c(y,2);r(j,{get is(){return a(t)},castShadow:!0,receiveShadow:!0,children:(e,n)=>{var o=Y(),s=u(o);r.BoxGeometry(s,{args:[.5,.5,.5]});var l=c(s,2);r.MeshStandardMaterial(l,{}),f(e,o)},$$slots:{default:!0}}),f(x,v),I(),k()}const fe=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{te as _,fe as a};
