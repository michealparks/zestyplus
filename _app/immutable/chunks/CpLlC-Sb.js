import{V as f,ad as U,fG as z,fE as G,fF as N}from"./C4vSLsTb.js";function H(n,u){if(u===z)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(u===G||u===N){let o=n.getIndex();if(o===null){const t=[],m=n.getAttribute("position");if(m!==void 0){for(let s=0;s<m.count;s++)t.push(s);n.setIndex(t),o=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const l=o.count-2,e=[];if(u===G)for(let t=1;t<=l;t++)e.push(o.getX(0)),e.push(o.getX(t)),e.push(o.getX(t+1));else for(let t=0;t<l;t++)t%2===0?(e.push(o.getX(t)),e.push(o.getX(t+1)),e.push(o.getX(t+2))):(e.push(o.getX(t+2)),e.push(o.getX(t+1)),e.push(o.getX(t)));e.length/3!==l&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=n.clone();return a.setIndex(e),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",u),n}function R(n,u=Math.PI/3){const o=Math.cos(u),l=(1+1e-10)*100,e=[new f,new f,new f],a=new f,t=new f,m=new f,s=new f;function X(r){const d=~~(r.x*l),i=~~(r.y*l),b=~~(r.z*l);return`${d},${i},${b}`}const A=n.index?n.toNonIndexed():n,c=A.attributes.position,x={};for(let r=0,d=c.count/3;r<d;r++){const i=3*r,b=e[0].fromBufferAttribute(c,i+0),w=e[1].fromBufferAttribute(c,i+1),T=e[2].fromBufferAttribute(c,i+2);a.subVectors(T,w),t.subVectors(b,w);const p=new f().crossVectors(a,t).normalize();for(let g=0;g<3;g++){const B=e[g],h=X(B);h in x||(x[h]=[]),x[h].push(p)}}const M=new Float32Array(c.count*3),D=new U(M,3,!1);for(let r=0,d=c.count/3;r<d;r++){const i=3*r,b=e[0].fromBufferAttribute(c,i+0),w=e[1].fromBufferAttribute(c,i+1),T=e[2].fromBufferAttribute(c,i+2);a.subVectors(T,w),t.subVectors(b,w),m.crossVectors(a,t).normalize();for(let p=0;p<3;p++){const g=e[p],B=X(g),h=x[B];s.set(0,0,0);for(let V=0,I=h.length;V<I;V++){const E=h[V];m.dot(E)>o&&s.add(E)}s.normalize(),D.setXYZ(i+p,s.x,s.y,s.z)}}return A.setAttribute("normal",D),A}export{R as a,H as t};
