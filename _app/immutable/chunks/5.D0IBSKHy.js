import{a as u,t as _}from"./disclose-version.dWtSGD-r.js";import"./legacy.C8Ez_6LP.js";import{a0 as Q,aP as U,z as a,aQ as h,a2 as f,a1 as j,a3 as s,at as G}from"./runtime.liGrBqgh.js";import{i as L}from"./lifecycle.BmG2I5-Y.js";import{b as V,c as B}from"./props.B9ZiqexT.js";import{C as H,V as S,I as J,J as E,Q as F}from"./three.module.iKKkBh6O.js";import{a as K,u as N,T as o}from"./T.Bd7S2fO2.js";import"./index.BXAB9BT5.js";import{O as R}from"./Outlines.CGHACcP9.js";import{u as W}from"./analyser.svelte.CzcSvk9D.js";import"./auth.svelte.CGUMTyGk.js";import{h as X}from"./color.D7bleQK4.js";var Y=_("<!> <!>",1),Z=_("<!> <!> <!>",1),ee=_("<!> <!> <!> <!> <!>",1);function te(x,z){Q(z,!1);const A=V(),P=()=>B(C,"$size",A),{size:C}=K(),{frequencyData:k}=W(),d=72,g=1,O=d*g/2,T=new H("red"),n=new S,v=new F,l=new S(1,1,1),i=new E,t=U(new J(void 0,void 0,d));for(let e=0;e<d;e+=1)n.set(0,0,e*g-O),i.setPosition(n),a(t).setMatrixAt(e,i),a(t).setColorAt(e,X(T,e/1e4));h(t,a(t).instanceMatrix.needsUpdate=!0),a(t).instanceColor&&h(t,a(t).instanceColor.needsUpdate=!0),N(()=>{for(let e=0,p=d;e<p;e+=1){const r=k.current[e];r&&(a(t).getMatrixAt(e,i),i.decompose(n,v,l),n.y=r/75,l.set(1,n.y*4+1,1),i.compose(n,v,l),a(t).setMatrixAt(e,i))}h(t,a(t).instanceMatrix.needsUpdate=!0)}),L();var w=ee(),M=f(w),q=G(()=>P().width/50);o.OrthographicCamera(M,{makeDefault:!0,position:[-28,60,65],get zoom(){return a(q)},oncreate:e=>e.lookAt(0,0,0)});var $=s(M,2);o.AmbientLight($,{intensity:.5});var b=s($,2);o.DirectionalLight(b,{castShadow:!0,"shadow.camera.left":-15,"shadow.camera.right":15,"shadow.camera.top":15,"shadow.camera.bottom":-15,"shadow.mapSize.width":2048,"shadow.mapSize.height":2048,intensity:3,position:[10,10,10]});var y=s(b,2);o.Mesh(y,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(e,p)=>{var r=Y(),c=f(r);o.PlaneGeometry(c,{args:[100,100]});var m=s(c,2);o.MeshStandardMaterial(m,{color:"black"}),u(e,r)},$$slots:{default:!0}});var D=s(y,2);o(D,{get is(){return a(t)},castShadow:!0,receiveShadow:!0,children:(e,p)=>{var r=Z(),c=f(r);o.BoxGeometry(c,{args:[.5,.5,.5]});var m=s(c,2);o.MeshStandardMaterial(m,{});var I=s(m,2);R(I,{color:"black"}),u(e,r)},$$slots:{default:!0}}),u(x,w),j()}const he=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{te as _,he as a};
