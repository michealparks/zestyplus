import"./DsnmJJEf.js";import{a3 as K,a8 as N,a5 as B,a6 as v,f as m,a4 as $,a9 as h,aa as mt,a7 as y,a2 as q,_ as gt,a1 as M,b as pt,ar as T}from"./DGLrSMKY.js";import{c as d}from"./CGE0CeKR.js";import{p as j,a as Q,r as V}from"./D7NB5tT8.js";import"./CxTOoE5I.js";import{g6 as ht,g0 as _t,ex as vt,f_ as c,g1 as yt,A as k}from"./C_yIfSnU.js";import"./B06ctdTw.js";import{s as $t}from"./BXYCPDa6.js";import{l as Mt,q as x,a as R}from"./BehEG0uo.js";import{r as wt,l as At}from"./BGGTUj09.js";var St=B("<!> <!> <!>",1);function F(r,t){K(t,!0);let n=j(t,"thresholdAngle",3,1),s=j(t,"color",3,"#ffffff"),e=j(t,"ref",15),o=V(t,["$$slots","$$events","$$legacy","thresholdAngle","color","ref","children"]);const i=ht(_t()),a=$(()=>{if(!yt(i.current,"Mesh"))throw new Error("Edges: component must be a child of a Mesh");return i.current.geometry}),f=new vt;c(r,Q({get is(){return f}},()=>o,{get ref(){return e()},set ref(g){e(g)},children:(g,w)=>{var p=St(),l=v(p);{let b=$(()=>[m(a),n()]);d(l,()=>c.EdgesGeometry,(_,G)=>{G(_,{get args(){return m(b)}})})}var u=h(l,2);d(u,()=>c.LineBasicMaterial,(b,_)=>{_(b,{get color(){return s()}})});var D=h(u,2);$t(D,()=>t.children??mt,()=>({ref:f})),y(g,p)},$$slots:{default:!0}})),N()}function H(r){return Object.prototype.toString.call(r)==="[object Date]"}function z(r,t){if(r===t||r!==r)return()=>r;const n=typeof r;if(n!==typeof t||Array.isArray(r)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const s=t.map((e,o)=>z(r[o],e));return e=>s.map(o=>o(e))}if(n==="object"){if(!r||!t)throw new Error("Object cannot be null");if(H(r)&&H(t)){const o=r.getTime(),a=t.getTime()-o;return f=>new Date(o+f*a)}const s=Object.keys(t),e={};return s.forEach(o=>{e[o]=z(r[o],t[o])}),o=>{const i={};return s.forEach(a=>{i[a]=e[a](o)}),i}}if(n==="number"){const s=t-r;return e=>r+e*s}return()=>t}class E{#t;#r;#o;#e=null;constructor(t,n={}){this.#t=q(t),this.#r=q(t),this.#o=n}static of(t,n){const s=new E(t(),n);return gt(()=>{s.set(t())}),s}set(t,n){M(this.#r,t);let{delay:s=0,duration:e=400,easing:o=Mt,interpolate:i=z}={...this.#o,...n};if(e===0)return this.#e?.abort(),M(this.#t,t),Promise.resolve();const a=wt.now()+s;let f,g=!1,w=this.#e;return this.#e=At(p=>{if(p<a)return!0;if(!g){g=!0;const u=this.#t.v;f=i(u,t),typeof e=="function"&&(e=e(u,t)),w?.abort()}const l=p-a;return l>e?(M(this.#t,t),!1):(M(this.#t,f(o(l/e))),!0)}),this.#e.promise}get current(){return m(this.#t)}get target(){return m(this.#r)}set target(t){this.set(t)}}var Et=B("<!> <!> <!>",1),bt=B("<!> <!> <!> <!>",1);function jt(r,t){K(t,!0);let n=j(t,"volume",3,0),s=V(t,["$$slots","$$events","$$legacy","volume"]),e=new E(0),o=new E(0),i=new E(0),a=q(!1);const f=()=>Math.round(Math.random())*2-1,g=()=>{M(a,!0);const l=70+Math.random()*50;e.set(.2,{duration:l,easing:x}),o.set(Math.random()*4*f(),{duration:l,easing:x}),i.set(Math.random()*4*f(),{duration:l,easing:x}),setTimeout(()=>{const u=120+Math.random()*70;e.set(0,{duration:u,easing:R}),o.set(0,{duration:u,easing:R}),i.set(0,{duration:u,easing:R}),setTimeout(()=>{M(a,!1)},u*1.5)},l)};pt(()=>{n()>.15&&!m(a)&&g()});var w=T(),p=v(w);d(p,()=>c.Group,(l,u)=>{u(l,Q(()=>s,{children:(D,b)=>{var _=T(),G=v(_);{let W=$(()=>k.DEG2RAD*i.current),tt=$(()=>k.DEG2RAD*o.current);d(G,()=>c.Group,(et,rt)=>{rt(et,{get"position.y"(){return e.current},get"rotation.z"(){return m(W)},get"rotation.x"(){return m(tt)},children:(ot,Dt)=>{var C=T(),st=v(C);d(st,()=>c.Mesh,(nt,at)=>{at(nt,{castShadow:!0,receiveShadow:!0,"position.y":1.26,scale:.5,children:(it,Gt)=>{var I=bt(),L=v(I);d(L,()=>c.BoxGeometry,(A,S)=>{S(A,{args:[3,5,3]})});var J=h(L,2);d(J,()=>c.MeshStandardMaterial,(A,S)=>{S(A,{color:"#eedbcb"})});var U=h(J,2);F(U,{color:"black",scale:1.001});var lt=h(U,2);{let A=$(()=>1+n()),S=$(()=>k.DEG2RAD*-90);d(lt,()=>c.Mesh,(ut,ct)=>{ct(ut,{"position.z":1.1,"position.y":1,get scale(){return m(A)},get"rotation.x"(){return m(S)},children:(ft,Ot)=>{var X=Et(),Y=v(X);d(Y,()=>c.ConeGeometry,(O,P)=>{P(O,{args:[1,1,64]})});var Z=h(Y,2);d(Z,()=>c.MeshStandardMaterial,(O,P)=>{P(O,{flatShading:!0,color:"#111111"})});var dt=h(Z,2);F(dt,{color:"black",scale:1.001,thresholdAngle:20}),y(ft,X)},$$slots:{default:!0}})})}y(it,I)},$$slots:{default:!0}})}),y(ot,C)},$$slots:{default:!0}})})}y(D,_)},$$slots:{default:!0}}))}),y(r,w),N()}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:jt},Symbol.toStringTag,{value:"Module"}));export{F as E,jt as S,Lt as a};
