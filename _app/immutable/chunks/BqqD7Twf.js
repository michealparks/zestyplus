import"./DsnmJJEf.js";import{fi as S,bf as B,V as x,cH as A,af as M,fZ as I,f_ as m,fg as W,di as v,q as T}from"./CpNDQYbB.js";import{Z as V,h as n,_ as c,$ as Z,a0 as j,a1 as q,a2 as C,a3 as D}from"./E4cMcrld.js";import{c as F}from"./B2tXmoWB.js";const G=(l,e,f)=>{const a=[];let s=new v;a.push(s),s.position.y=-l;for(let r=0;r<e;r++){const i=new v;i.position.y=f,a.push(i),s.add(i),s=i}return a};var P=Z("<!> <!>",1);function K(l,e){V(e,!0);const f=c(()=>e.segmentHeight*e.segments),a=c(()=>n(f)*.5),s=c(()=>G(n(a),e.segments,e.segmentHeight)),r=new S,i=c(()=>new W(n(s)));r.add(n(s)[0]),r.bind(n(i));const g=new B(e.radius,e.radius,n(f),e.radialSegments,e.heightSegments,!0),b=[],k=[],{position:w}=g.attributes,_=new x;for(let t=0,u;t<w.count;t++){_.fromBufferAttribute(w,t);const o=_.y+n(a),d=Math.floor(o/e.segmentHeight),h=o%e.segmentHeight/e.segmentHeight;b.push(d,d+1,0,0),k.push(1-h,h,0,0)}g.setAttribute("skinIndex",new A(b,4)),g.setAttribute("skinWeight",new M(k,4)),I(()=>{if(e.positions!==void 0)for(let t=0,u=0,o=n(s).length;t<o;t+=1,u+=3)n(i).bones[t].position.set(e.positions[u+0],e.positions[u+1],e.positions[u+2]),n(i).bones[t].rotation.x=.2}),m(l,{get is(){return r},children:(t,u)=>{var o=P(),d=j(o);m(d,{get is(){return g}});var h=D(d,2);F(h,()=>m.MeshStandardMaterial,(y,H)=>{H(y,{get side(){return T}})}),q(t,o)},$$slots:{default:!0}}),C()}export{K as default};
