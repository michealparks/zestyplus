import"./DsnmJJEf.js";import{a3 as Oe,b as $,a5 as ke,a6 as Ye,a9 as G,a7 as Qe,a8 as qe}from"./DGLrSMKY.js";import{c as k}from"./CGE0CeKR.js";import{s as Pe,b as Ee}from"./D7NB5tT8.js";import{u as Ve}from"./wM1BCSX6.js";import{h as Ke}from"./D7bleQK4.js";import{A as Ue,fy as We,n as ee,k as Re,f$ as Ie,x as te,ah as Xe,aW as se,eq as Ze,ed as Fe,eM as Je,M as K,a as $e,fZ as be,f_ as N,dP as et,c5 as tt,t as Be,bn as Ne,b7 as st,ai as ot,B as at,c as nt}from"./C_yIfSnU.js";import{b as rt,N as it,R as Te,Q as lt,c as ct,e as ut,V as dt,P as At,M as ft}from"./CxTOoE5I.js";import{F as re,G as ht,H as pt,y as mt,n as vt,c as gt,u as Q,o as Ht,a as wt,v as ye,e as Pt,d as xe,p as Rt,i as bt,I as Bt,J as Nt,K as Se,M as Tt,A as Me,N as yt}from"./B_eo0dAN.js";import{R as xt}from"./DwCNAWRA.js";const{lerp:z}=Ue,d=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let i=0;i<256;i++)d[256+i]=d[i];function oe(i){return i*i*i*(i*(i*6-15)+10)}function D(i,a,o,n){const r=i&15,A=r<8?a:o,f=r<4?o:r==12||r==14?a:n;return((r&1)==0?A:-A)+((r&2)==0?f:-f)}class St{noise(a,o,n){const r=Math.floor(a),A=Math.floor(o),f=Math.floor(n),_=r&255,T=A&255,R=f&255;a-=r,o-=A,n-=f;const c=a-1,b=o-1,m=n-1,y=oe(a),x=oe(o),S=oe(n),L=d[_]+T,g=d[L]+R,H=d[L+1]+R,w=d[_+1]+T,P=d[w]+R,M=d[w+1]+R;return z(z(z(D(d[g],a,o,n),D(d[P],c,o,n),y),z(D(d[H],a,b,n),D(d[M],c,b,n),y),x),z(z(D(d[g+1],a,o,m),D(d[P+1],c,o,m),y),z(D(d[H+1],a,b,m),D(d[M+1],c,b,m),y),x),S)}}let ae=null;const Mt=re(([i])=>(ae===null&&(ae=new We().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAH2ElEQVR4nO3bRW8TAACG4W7LMkJ2oJRSZEg4EU642xhjyJBRSpHh7u4aToQT7hZOhBPu7u7u7u4O/6Pve/3y/IMvbyAQCEyfPr1s2bKrV68uUKDAzJkzy5cvv3bt2uTk5BkzZpQrV27NmjUFCxacNWtWhQoV1q1bp9cnlN+/f3/Dhg3v37/fvXv348ePN23a9Pnz5/379z948GCjRo0ePnzYs2fPkydPNm/e/OXLlwMHDtTrE8kHKlasuH79+kKFCs2ePbtmzZrbt28vVqzY4sWLK1euvHHjxsKFC8+dO7d27do7d+4sUaLE0qVL9fpE8oH3798PHz78/Pnzbdq0+f79+/jx469fv96hQ4ePHz+OHDny4sWLbdu2/fnz58SJE2/evNmpUye9PpF8ckZGRkZGRn5+fn5+fnp6enp6em5ubm5urrs7YQ+cPn06Nzf39evXgwcPPnz4cOPGjR8/fty7d++zZ8+2atXq7du3Q4cOPXr0aJMmTZ4+fdq3b1+9PpF8oG7durt3787IyFi+fHnVqlU3b95cpEiR+fPn169ff+/evaVLl165cmX16tW3bt1atGjRhQsX6vWJ5AO/f/+ePHny7du38/PzP3/+PHr06MuXL7dr1+7v379Tp069e/du165dv379Onbs2KtXr7Zv316vTySfnJaWlpaWlpOTk5OTE4lEIpFIPB6Px+MpKSkpKSlZWVlZWVmhUCgUCkWj0Wg0qtcnkg8cOnQoKyvr0aNHvXr1OnXqVIsWLV69ejVo0KADBw5kZmY+ePCgR48eJ06caNas2YsXLwYMGKDXJ5IPVKlSZdOmTaFQaN68eXXq1Nm1a1fJkiWXLVtWqVKlDRs2BIPBOXPm1KpVa8eOHcWLF1+yZIlen0g+8OnTp1GjRl26dCkajf769WvSpEm3bt3q3Lnzhw8fRowYceHChby8vB8/fkyYMOHGjRsdO3bU6xPJ+wO4o/fAuXPnWrdu/e7du2HDhh07diwnJ+fZs2f9+vU7c+ZMy5Yt37x5M2TIkCNHjmRnZz958qRPnz56fSL5QIMGDfbt21emTJlVq1bVqFFj27ZtkUhk0aJF9erV27NnT6lSpVasWFGtWrUtW7aEw+EFCxbo9YnkA//+/Zs2bdq9e/e6dev27du3cePGXbt2LR6P//nzZ8qUKXfu3OnSpcuXL1/GjBlz5cqVWCym1yeST05KSkpKSsrMzMzMzAwGg8FgMC8vLy8vLzU1NTU1NTs7Ozs7OxwOh8PhWCwWi8X0+kTy9gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t7QH0aG8PoEd7ewA92tsD6NHeH8AdvdsD6NHeHkCP9vYAerS3B9CjvT2AHu3tAfRobw+gR3t/AHf0bg+gR3t7AD3a2wPo0d4eQI/29gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t7QH0aG8PoEd7ewA92tsD6NHeH8AdvdsD6NHeHkCP9vYAerS3B9CjvT2AHu3tAfRobw+gR3t/AHf0bg+gR3t7AD3a2wPo0d4eQI/29gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t7QH0aG8PoEd7ewA92tsD6NHeH8AdvdsD6NHeHkCP9vYAerS3B9CjvT2AHu3tAfRobw+gR3t/AHf0bg+gR3t7AD3a2wPo0d4eQI/29gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t7QH0aG8PoEd7ewA92tsD6NHeH8AdvdsD6NHeHkCP9vYAerS3B9CjvT2AHu3tAfRobw+gR3t/AHf0bg+gR3t7AD3a2wPo0d4eQI/29gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t7QH0aG8PoEd7ewA92tsD6NHeH8AdvdsD6NHeHkCP9vYAerS3B9CjvT2AHu3tAfRobw+gR3t/AHf0bg+gR3t7AD3a2wPo0d4eQI/29gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t7QH0aG8PoEd7ewA92tsD6NHeH8AdvdsD6NHeHkCP9vYAerS3B9CjvT2AHu3tAfRobw+gR3t/AHf0bg+gR3t7AD3a2wPo0d4eQI/29gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t7QH0aG8PoEd7ewA92tsD6NHeH8AdvdsD6NHeHkCP9vYAerS3B9CjvT2AHu3tAfRobw+gR3t/AHf0bg+gR3t7AD3a2wPo0d4eQI/29gB6tLcH0KO9PYAe7f0B3NG7PYAe7e0B9GhvD6BHe3sAPdrbA+jR3h5Aj/b2AHq09wdwR+/2AHq0twfQo709gB7t/wNER3MueNkctwAAAABJRU5ErkJggg==")),ht(ae,pt(i).mod(mt(16))))),Y=new lt;let ne;class Gt extends rt{static get type(){return"GaussianBlurNode"}constructor(a,o=null,n=4,r={}){super("vec4"),this.textureNode=a,this.directionNode=o,this.sigma=n,this._invSize=Q(new ee),this._passDirection=Q(new ee),this._horizontalRT=new Re(1,1,{depthBuffer:!1}),this._horizontalRT.texture.name="GaussianBlurNode.horizontal",this._verticalRT=new Re(1,1,{depthBuffer:!1}),this._verticalRT.texture.name="GaussianBlurNode.vertical",this._textureNode=Ht(this,this._verticalRT.texture),this._textureNode.uvNode=a.uvNode,this.updateBeforeType=it.FRAME,this.resolutionScale=r.resolutionScale||1,this.premultipliedAlpha=r.premultipliedAlpha||!1}setSize(a,o){a=Math.max(Math.round(a*this.resolutionScale),1),o=Math.max(Math.round(o*this.resolutionScale),1),this._invSize.value.set(1/a,1/o),this._horizontalRT.setSize(a,o),this._verticalRT.setSize(a,o)}updateBefore(a){const{renderer:o}=a;ne=Te.resetRendererState(o,ne);const n=this.textureNode,r=n.value,A=n.value;Y.material=this._material,this.setSize(r.image.width,r.image.height);const f=r.type;this._horizontalRT.texture.type=f,this._verticalRT.texture.type=f,o.setRenderTarget(this._horizontalRT),this._passDirection.value.set(1,0),Y.name="Gaussian Blur [ Horizontal Pass ]",Y.render(o),n.value=this._horizontalRT.texture,o.setRenderTarget(this._verticalRT),this._passDirection.value.set(0,1),Y.name="Gaussian Blur [ Vertical Pass ]",Y.render(o),n.value=A,Te.restoreRendererState(o,ne)}getTextureNode(){return this._textureNode}setup(a){const o=this.textureNode,n=wt(),r=ye(this.directionNode||1);let A,f;this.premultipliedAlpha?(A=c=>Rt(o.sample(c)),f=c=>bt(c)):(A=c=>o.sample(c),f=c=>c);const _=re(()=>{const c=3+2*this.sigma,b=this._getCoefficients(c),m=this._invSize,y=r.mul(this._passDirection),x=Pt(A(n).mul(b[0])).toVar();for(let S=1;S<c;S++){const L=xe(S),g=xe(b[S]),H=ye(y.mul(m.mul(L))).toVar(),w=A(n.add(H)),P=A(n.sub(H));x.addAssign(w.add(P).mul(g))}return f(x)}),T=this._material||(this._material=new ct);T.fragmentNode=_().context(a.getSharedContext()),T.name="Gaussian_blur",T.needsUpdate=!0;const R=a.getNodeProperties(this);return R.textureNode=o,this._textureNode}dispose(){this._horizontalRT.dispose(),this._verticalRT.dispose()}_getCoefficients(a){const o=[],n=a/3;for(let r=0;r<a;r++)o.push(.39894*Math.exp(-.5*r*r/(n*n))/n);return o}get resolution(){return console.warn('THREE.GaussianBlurNode: The "resolution" property has been renamed to "resolutionScale" and is now of type `number`.'),new ee(this.resolutionScale,this.resolutionScale)}set resolution(a){console.warn('THREE.GaussianBlurNode: The "resolution" property has been renamed to "resolutionScale" and is now of type `number`.'),this.resolutionScale=a.x}}const Dt=(i,a,o,n={})=>vt(new Gt(gt(i),a,o,n));var _t=ke("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function Ct(i,a){Oe(a,!0);const o=()=>Pe(b,"$size",r),n=()=>Pe(f,"$camera",r),[r,A]=Ee(),{camera:f,scene:_,renderer:T,renderMode:R,renderStage:c,size:b}=Ie();$(()=>(R.set("manual"),()=>R.set("always")));const m=10;function y(){let s=0;const e=128,t=new Uint8Array(e*e*e),h=10,l=new St,u=5;for(let B=0;B<e;B++)for(let v=0;v<e;v++)for(let j=0;j<e;j++){const O=j/e*u,He=v/e*u,E=B/e*u,V=l.noise(O*h,He*h,E*h);t[s]=128+128*V,s+=1}const p=new et(t,e,e,e);return p.format=tt,p.minFilter=Be,p.magFilter=Be,p.wrapS=Ne,p.wrapT=Ne,p.unpackAlignment=1,p.needsUpdate=!0,p}const x=Ve();ut.setLTC(xt.init());const S=y(),L=Q(3.5),g=new dt;g.steps=12,g.offsetNode=Mt(Bt),g.scatteringNode=re(({positionRay:s})=>{const e=Nt(Se,0,Se.mul(.3)),t=(l,u=1)=>Tt(S,s.add(e.mul(u)).mul(l).mod(1),0).r.add(.5);let h=t(.1);return h=h.mul(t(.05,1)),h=h.mul(t(.02,2)),L.mix(1,h)});const H=new te(new Xe(100,100,100),g);H.receiveShadow=!0,H.position.y=20,H.layers.disableAll(),H.layers.enable(m);const w=new se(16711680,5,4,10);w.layers.enable(m),w.position.set(0,-10,0),w.lookAt(0,0,0);const P=new se(65280,5,4,10);P.layers.enable(m),P.position.set(-10,0,0),P.lookAt(0,0,0);const M=new se(255,5,4,10);M.layers.enable(m),M.position.set(0,0,-10),M.lookAt(0,0,0);const U=s=>{const e=new st(4,10),t=new ot({color:s.color,side:at}),h=new nt({color:1118481}),l=new te(e,h);l.position.set(0,0,.08);const u=new te(e,t);u.position.set(0,0,.01),s.add(l),s.add(u)};U(w),U(P),U(M);const W=new At(T);$(()=>{W.renderer.setSize(o().width,o().height)});const Ge=Q(1),I=new Ze;I.disableAll(),I.enable(m),$(()=>{const s=Me(_,n()),e=s.getTextureNode("depth");g.depthNode=e.sample(yt);const t=Me(_,n(),{depthBuffer:!1});t.setLayers(I),t.setResolutionScale(.25);const h=Q(.6),l=Dt(t,h),u=s.add(l.mul(Ge));W.outputNode=u});const X=20,C=new Fe(new Je(.1),new ft({roughness:.05}),X),De=new K().makeRotationX(.005).multiply(new K().makeRotationY(.005)).multiply(new K().makeRotationZ(.005)),Z=new K,_e=[];let q=0;const F=s=>{const e=2*s+1;return e*e*e},Ce=(s,e)=>{const t=2*e+1;return s<t?{x:-e+s,y:e}:(s-=t,s<t-1?{x:e,y:e-1-s}:(s-=t-1,s<t-1?{x:e-1-s,y:-e}:(s-=t-1,{x:-e,y:-e+1+s})))},ie=(s,e)=>{let t=Math.ceil((Math.cbrt(s+1)-1)/2);for(t<0&&(t=0);F(t)<=s;)t++;for(;t>0&&F(t-1)>s;)t--;const h=t===0?0:F(t-1);let l=s-h,u=0,p=0,B=0;if(t===0)u=0,p=0,B=0;else{const v=2*t+1,j=v*v;if(l<j)B=t,u=l%v-t,p=(l/v|0)-t;else{l-=j;const O=8*t,E=(v-2)*O;if(l<E){const V=l/O|0,je=l-V*O;B=t-1-V;const we=Ce(je,t);u=we.x,p=we.y}else l-=E,B=-t,u=l%v-t,p=(l/v|0)-t}}Z.makeTranslation(u*e,p*e,B*e)},ze=new $e().setHSL(Math.random(),.8,1);for(;q<X;)ie(q,1),C.setMatrixAt(q,Z),q+=1;let le=0,J=0,ce=0;be(s=>{le+=s,f.current.applyMatrix4(De);for(let e=0;e<X;e+=1)ie(e,1+Math.sin(le)*.01*x.logSmooth01[32]/30),C.setMatrixAt(e,Z);if(C.instanceMatrix.needsUpdate=!0,x.level>=.3){const e=Ke(ze,ce);C.setColorAt(J,e),J+=1,ce+=10,J%=_e.length}C.instanceColor&&(C.instanceColor.needsUpdate=!0)}),be(()=>{W.render()},{stage:c});var ue=_t(),de=Ye(ue);k(de,()=>N.PerspectiveCamera,(s,e)=>{e(s,{makeDefault:!0,"position.y":1,"position.z":10,oncreate:t=>t.lookAt(0,0,0)})});var Ae=G(de,2);k(Ae,()=>N.AmbientLight,(s,e)=>{e(s,{intensity:.3})});var fe=G(Ae,2);k(fe,()=>N.DirectionalLight,(s,e)=>{e(s,{intensity:1,position:[0,3,0]})});var he=G(fe,2);k(he,()=>N.DirectionalLight,(s,e)=>{e(s,{intensity:.5,position:[0,3,2]})});var pe=G(he,2);k(pe,()=>N.DirectionalLight,(s,e)=>{e(s,{intensity:.25,position:[2,1,2]})});var me=G(pe,2);N(me,{get is(){return C}});var ve=G(me,2);N(ve,{get is(){return w}});var ge=G(ve,2);N(ge,{get is(){return P}});var Le=G(ge,2);N(Le,{get is(){return M}}),Qe(i,ue),qe(),A()}const Kt=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"}));export{Ct as _,Kt as a};
