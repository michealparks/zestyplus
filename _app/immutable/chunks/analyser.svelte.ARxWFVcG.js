var o=r=>{throw TypeError(r)};var f=(r,e,t)=>e.has(r)||o("Cannot "+t);var c=(r,e,t)=>(f(r,e,"read from private field"),t?t.call(r):e.get(r)),u=(r,e,t)=>e.has(r)?o("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);import{C as m,z as d,D as l}from"./runtime.BZbTZrfI.js";import{p as A}from"./props.DC6YhwhV.js";const n={current:void 0},s={current:new Uint8Array},i=1024,g=async()=>{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),e=new AudioContext,t=e.createMediaStreamSource(r);n.current=e.createAnalyser(),n.current.fftSize=i,t.connect(n.current)},p=async()=>{try{await g()}catch(t){console.error("Error accessing microphone:",t)}if(!n.current){console.error("No audio analyser!");return}const r=n.current.frequencyBinCount;s.current=new Uint8Array(r);const e=()=>{requestAnimationFrame(e),n.current!==void 0&&n.current.getByteFrequencyData(s.current)};e(),requestAnimationFrame(()=>y.current=!0)};var a;class q{constructor(){u(this,a,m(!1))}get current(){return d(c(this,a))}set current(e){l(c(this,a),A(e))}}a=new WeakMap;const y=new q,w={fttSize:i,frequencyData:s,analyserReady:y,startAnalyser:p},C=()=>w;export{C as u};
