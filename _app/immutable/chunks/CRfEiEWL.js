import"./DsnmJJEf.js";import{fi as _,bf as B,V as x,cH as A,af as M,fZ as I,f_ as m,fg as W,q as T,di as y}from"./C_yIfSnU.js";import{a3 as V,f as n,a4 as c,a5 as j,a6 as q,a7 as C,a8 as D,a9 as F}from"./DGLrSMKY.js";import{c as G}from"./CGE0CeKR.js";const P=(l,e,d)=>{const a=[];let s=new y;a.push(s),s.position.y=-l;for(let r=0;r<e;r++){const i=new y;i.position.y=d,a.push(i),s.add(i),s=i}return a};var U=j("<!> <!>",1);function K(l,e){V(e,!0);const d=c(()=>e.segmentHeight*e.segments),a=c(()=>n(d)*.5),s=c(()=>P(n(a),e.segments,e.segmentHeight)),r=new _,i=c(()=>new W(n(s)));r.add(n(s)[0]),r.bind(n(i));const g=new B(e.radius,e.radius,n(d),e.radialSegments,e.heightSegments,!0),b=[],k=[],{position:w}=g.attributes,v=new x;for(let t=0,u;t<w.count;t++){v.fromBufferAttribute(w,t);const o=v.y+n(a),f=Math.floor(o/e.segmentHeight),h=o%e.segmentHeight/e.segmentHeight;b.push(f,f+1,0,0),k.push(1-h,h,0,0)}g.setAttribute("skinIndex",new A(b,4)),g.setAttribute("skinWeight",new M(k,4)),I(()=>{if(e.positions!==void 0)for(let t=0,u=0,o=n(s).length;t<o;t+=1,u+=3)n(i).bones[t].position.set(e.positions[u+0],e.positions[u+1],e.positions[u+2]),n(i).bones[t].rotation.x=.2}),m(l,{get is(){return r},children:(t,u)=>{var o=U(),f=q(o);m(f,{get is(){return g}});var h=F(f,2);G(h,()=>m.MeshStandardMaterial,(H,S)=>{S(H,{get side(){return T}})}),C(t,o)},$$slots:{default:!0}}),D()}export{K as default};
