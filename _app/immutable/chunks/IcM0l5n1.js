import"./DsnmJJEf.js";import{fi as _,bf as B,V as x,cH as A,ah as M,f_ as I,f$ as m,fg as W,q as T,di as y}from"./CtU81MLD.js";import{a3 as V,i as n,a6 as c,a7 as j,a8 as q,a9 as C,a5 as D,aa as F}from"./Wk8iZnnz.js";import{c as G}from"./BXm_g8N-.js";const P=(l,e,g)=>{const a=[];let s=new y;a.push(s),s.position.y=-l;for(let r=0;r<e;r++){const i=new y;i.position.y=g,a.push(i),s.add(i),s=i}return a};var U=j("<!> <!>",1);function L(l,e){V(e,!0);const g=c(()=>e.segmentHeight*e.segments),a=c(()=>n(g)*.5),s=c(()=>P(n(a),e.segments,e.segmentHeight)),r=new _,i=c(()=>new W(n(s)));r.add(n(s)[0]),r.bind(n(i));const f=new B(e.radius,e.radius,n(g),e.radialSegments,e.heightSegments,!0),b=[],k=[],{position:w}=f.attributes,v=new x;for(let t=0,u;t<w.count;t++){v.fromBufferAttribute(w,t);const o=v.y+n(a),d=Math.floor(o/e.segmentHeight),h=o%e.segmentHeight/e.segmentHeight;b.push(d,d+1,0,0),k.push(1-h,h,0,0)}f.setAttribute("skinIndex",new A(b,4)),f.setAttribute("skinWeight",new M(k,4)),I(()=>{if(e.positions!==void 0)for(let t=0,u=0,o=n(s).length;t<o;t+=1,u+=3)n(i).bones[t].position.set(e.positions[u+0],e.positions[u+1],e.positions[u+2]),n(i).bones[t].rotation.x=.2}),m(l,{get is(){return r},children:(t,u)=>{var o=U(),d=q(o);m(d,{get is(){return f}});var h=F(d,2);G(h,()=>m.MeshStandardMaterial,(H,S)=>{S(H,{get side(){return T}})}),C(t,o)},$$slots:{default:!0}}),D()}export{L as default};
