import"./DsnmJJEf.js";import{a3 as K,a5 as N,a7 as B,a8 as v,i as m,a6 as y,aa as h,ab as mt,a9 as $,a2 as q,_ as gt,a1 as M,d as pt,as as T}from"./Wk8iZnnz.js";import{c as d}from"./BXm_g8N-.js";import{p as j,a as Q,r as V}from"./oafpEiTJ.js";import"./aEY0d7t_.js";import{g6 as ht,g0 as _t,ex as vt,f$ as c,g1 as $t,F as k}from"./CtU81MLD.js";import"./Bzur3xKn.js";import{s as yt}from"./C5lbjxb5.js";import{l as Mt,q as x,a as R}from"./BehEG0uo.js";import{r as wt,l as St}from"./BGGTUj09.js";var At=B("<!> <!> <!>",1);function Z(r,t){K(t,!0);let n=j(t,"thresholdAngle",3,1),s=j(t,"color",3,"#ffffff"),e=j(t,"ref",15),o=V(t,["$$slots","$$events","$$legacy","thresholdAngle","color","ref","children"]);const i=ht(_t()),a=y(()=>{if(!$t(i.current,"Mesh"))throw new Error("Edges: component must be a child of a Mesh");return i.current.geometry}),f=new vt;c(r,Q({get is(){return f}},()=>o,{get ref(){return e()},set ref(g){e(g)},children:(g,w)=>{var p=At(),l=v(p);{let b=y(()=>[m(a),n()]);d(l,()=>c.EdgesGeometry,(_,G)=>{G(_,{get args(){return m(b)}})})}var u=h(l,2);d(u,()=>c.LineBasicMaterial,(b,_)=>{_(b,{get color(){return s()}})});var D=h(u,2);yt(D,()=>t.children??mt,()=>({ref:f})),$(g,p)},$$slots:{default:!0}})),N()}function H(r){return Object.prototype.toString.call(r)==="[object Date]"}function z(r,t){if(r===t||r!==r)return()=>r;const n=typeof r;if(n!==typeof t||Array.isArray(r)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const s=t.map((e,o)=>z(r[o],e));return e=>s.map(o=>o(e))}if(n==="object"){if(!r||!t)throw new Error("Object cannot be null");if(H(r)&&H(t)){const o=r.getTime(),a=t.getTime()-o;return f=>new Date(o+f*a)}const s=Object.keys(t),e={};return s.forEach(o=>{e[o]=z(r[o],t[o])}),o=>{const i={};return s.forEach(a=>{i[a]=e[a](o)}),i}}if(n==="number"){const s=t-r;return e=>r+e*s}return()=>t}class E{#t;#r;#o;#e=null;constructor(t,n={}){this.#t=q(t),this.#r=q(t),this.#o=n}static of(t,n){const s=new E(t(),n);return gt(()=>{s.set(t())}),s}set(t,n){M(this.#r,t);let{delay:s=0,duration:e=400,easing:o=Mt,interpolate:i=z}={...this.#o,...n};if(e===0)return this.#e?.abort(),M(this.#t,t),Promise.resolve();const a=wt.now()+s;let f,g=!1,w=this.#e;return this.#e=St(p=>{if(p<a)return!0;if(!g){g=!0;const u=this.#t.v;f=i(u,t),typeof e=="function"&&(e=e(u,t)),w?.abort()}const l=p-a;return l>e?(M(this.#t,t),!1):(M(this.#t,f(o(l/e))),!0)}),this.#e.promise}get current(){return m(this.#t)}get target(){return m(this.#r)}set target(t){this.set(t)}}var Et=B("<!> <!> <!>",1),bt=B("<!> <!> <!> <!>",1);function jt(r,t){K(t,!0);let n=j(t,"volume",3,0),s=V(t,["$$slots","$$events","$$legacy","volume"]),e=new E(0),o=new E(0),i=new E(0),a=q(!1);const f=()=>Math.round(Math.random())*2-1,g=()=>{M(a,!0);const l=70+Math.random()*50;e.set(.2,{duration:l,easing:x}),o.set(Math.random()*4*f(),{duration:l,easing:x}),i.set(Math.random()*4*f(),{duration:l,easing:x}),setTimeout(()=>{const u=120+Math.random()*70;e.set(0,{duration:u,easing:R}),o.set(0,{duration:u,easing:R}),i.set(0,{duration:u,easing:R}),setTimeout(()=>{M(a,!1)},u*1.5)},l)};pt(()=>{n()>.15&&!m(a)&&g()});var w=T(),p=v(w);d(p,()=>c.Group,(l,u)=>{u(l,Q(()=>s,{children:(D,b)=>{var _=T(),G=v(_);{let W=y(()=>k.DEG2RAD*i.current),tt=y(()=>k.DEG2RAD*o.current);d(G,()=>c.Group,(et,rt)=>{rt(et,{get"position.y"(){return e.current},get"rotation.z"(){return m(W)},get"rotation.x"(){return m(tt)},children:(ot,Dt)=>{var C=T(),st=v(C);d(st,()=>c.Mesh,(nt,at)=>{at(nt,{castShadow:!0,receiveShadow:!0,"position.y":1.26,scale:.5,children:(it,Gt)=>{var I=bt(),L=v(I);d(L,()=>c.BoxGeometry,(S,A)=>{A(S,{args:[3,5,3]})});var F=h(L,2);d(F,()=>c.MeshStandardMaterial,(S,A)=>{A(S,{color:"#eedbcb"})});var J=h(F,2);Z(J,{color:"black",scale:1.001});var lt=h(J,2);{let S=y(()=>1+n()),A=y(()=>k.DEG2RAD*-90);d(lt,()=>c.Mesh,(ut,ct)=>{ct(ut,{"position.z":1.1,"position.y":1,get scale(){return m(S)},get"rotation.x"(){return m(A)},children:(ft,Ot)=>{var U=Et(),X=v(U);d(X,()=>c.ConeGeometry,(O,P)=>{P(O,{args:[1,1,64]})});var Y=h(X,2);d(Y,()=>c.MeshStandardMaterial,(O,P)=>{P(O,{flatShading:!0,color:"#111111"})});var dt=h(Y,2);Z(dt,{color:"black",scale:1.001,thresholdAngle:20}),$(ft,U)},$$slots:{default:!0}})})}$(it,I)},$$slots:{default:!0}})}),$(ot,C)},$$slots:{default:!0}})})}$(D,_)},$$slots:{default:!0}}))}),$(r,w),N()}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:jt},Symbol.toStringTag,{value:"Module"}));export{Z as E,jt as S,Lt as a};
