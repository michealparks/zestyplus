import{b as f,t as v}from"./disclose-version.DFxnx1AN.js";import"./legacy.u_OnCUt7.js";import{B as I,aP as Q,T as a,aQ as _,a8 as g,D as U,a9 as n,aB as G}from"./runtime.BxeNZxLl.js";import{i as L}from"./lifecycle.CD7hXnw5.js";import{b as V,c as H}from"./props.CvCzEa8T.js";import{C as J,I as E,V as A,J as F,Q as K}from"./three.module.iKKkBh6O.js";import{a as N,u as R,T as o}from"./T.BojAtv_L.js";import"./index.B_O87gS3.js";import{O as W}from"./Outlines.P5CBP_YU.js";import{a as X}from"./auth.svelte.CMqokhwd.js";import{h as Y}from"./color.D7bleQK4.js";var Z=v("<!> <!>",1),ee=v("<!> <!> <!>",1),te=v("<!> <!> <!> <!> <!>",1);function ae(P,C){I(C,!1);const k=V(),O=()=>H(T,"$size",k),{size:T}=N(),{frequencyData:w}=X(),d=16,p=1,M=d*p/2,D=new J("red"),i=new A,$=new K,u=new A(1,1,1),c=new F,t=Q(new E(void 0,void 0,d*d));let h=0;for(let e=0;e<d;e+=1)for(let r=0;r<d;r+=1)i.set(e*p-M,0,r*p-M),c.setPosition(i),a(t).setMatrixAt(h,c),a(t).setColorAt(h,Y(D,e*r/1e4)),h+=1;_(t,a(t).instanceMatrix.needsUpdate=!0),a(t).instanceColor&&_(t,a(t).instanceColor.needsUpdate=!0),R(()=>{for(let e=0,r=w.current.length/2;e<r;e+=1){const s=w.current[e];s&&(a(t).getMatrixAt(e,c),c.decompose(i,$,u),i.y=s/75,u.set(1,i.y*4+1,1),c.compose(i,$,u),a(t).setMatrixAt(e,c))}_(t,a(t).instanceMatrix.needsUpdate=!0)}),L();var b=te(),x=g(b),j=G(()=>O().width/40);o.OrthographicCamera(x,{makeDefault:!0,position:[-28,60,65],get zoom(){return a(j)},oncreate:e=>e.lookAt(0,0,0)});var y=n(x,2);o.AmbientLight(y,{intensity:.5});var S=n(y,2);o.DirectionalLight(S,{castShadow:!0,"shadow.camera.left":-15,"shadow.camera.right":15,"shadow.camera.top":15,"shadow.camera.bottom":-15,"shadow.mapSize.width":2048,"shadow.mapSize.height":2048,intensity:3,position:[10,10,10]});var z=n(S,2);o.Mesh(z,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(e,r)=>{var s=Z(),l=g(s);o.PlaneGeometry(l,{args:[100,100]});var m=n(l,2);o.MeshStandardMaterial(m,{color:"black"}),f(e,s)},$$slots:{default:!0}});var q=n(z,2);o(q,{get is(){return a(t)},castShadow:!0,receiveShadow:!0,children:(e,r)=>{var s=ee(),l=g(s);o.BoxGeometry(l,{args:[.5,.5,.5]});var m=n(l,2);o.MeshStandardMaterial(m,{});var B=n(m,2);W(B,{color:"black"}),f(e,s)},$$slots:{default:!0}}),f(P,b),U()}const he=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));export{ae as _,he as a};
