import"./DsnmJJEf.js";import{d as ae,s as se,a1 as I,a2 as q,i as F,a3 as ne,a7 as p,a8 as v,aa as e,a9 as h,a5 as ie}from"./Wk8iZnnz.js";import{c as t}from"./BXm_g8N-.js";import"./aEY0d7t_.js";import{fO as de,t as Y,y as Z,f_ as le,f$ as r,q as ce}from"./CtU81MLD.js";import{createShader as ue}from"./DRVgYzMm.js";import{L as me}from"./D_MYTof8.js";import"./Bzur3xKn.js";import{S as ee,E as G}from"./D3taKGao.js";import{O as ve}from"./4lJTYaO2.js";import{u as he}from"./CXVFCYzG.js";const pe=Symbol("webcam-texture-context"),_e=()=>{let _=q("idle");const a=document.createElement("video");a.autoplay=!0,a.playsInline=!0;const g=new de(a);g.minFilter=Y,g.magFilter=Y;const T=async()=>{try{I(_,"requesting");const s=await navigator.mediaDevices.getUserMedia({video:!0});a.srcObject=s,await new Promise(f=>a.onloadedmetadata=f),I(_,"streaming")}catch(s){console.error("Webcam stream failed to start:",s),I(_,"failed");return}};ae(()=>(T(),()=>{const s=a.srcObject;s&&(s.getTracks().forEach(f=>f.stop()),a.srcObject=null,a.removeAttribute("src"),g.dispose())}));const j={video:a,texture:g,get state(){return F(_)}};return se(pe,j),j};var ge=p("<!> <!> <!>",1),fe=p("<!> <!> <!> <!>",1),ye=p("<!> <!> <!>",1),$e=p("<!> <!> <!> <!>",1),be=p("<!> <!> <!> <!> <!>",1),Se=p("<!> <!>",1),we=p("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Me(_,a){ne(a,!0);const g=_e(),T=he(),j=ue(g.texture),s=new Z,f=new Z;let W=q(0),B=q(0);le(o=>{s.rotation.y-=o,f.rotation.y-=o/1e3,I(W,T.spectrum01[0],!0),I(B,T.spectrum01[8],!0)});var U=we(),V=v(U);t(V,()=>r.PerspectiveCamera,(o,n)=>{n(o,{makeDefault:!0,position:[3,8,6],oncreate:l=>{l.lookAt(0,0,0)},children:(l,X)=>{ve(l,{})},$$slots:{default:!0}})});var H=e(V,2);t(H,()=>r.DirectionalLight,(o,n)=>{n(o,{castShadow:!0,position:[-4,5,6],"shadow.mapSize.x":2048,"shadow.mapSize.y":2048})});var J=e(H,2);t(J,()=>r.AmbientLight,(o,n)=>{n(o,{})});var K=e(J,2);t(K,()=>r.Mesh,(o,n)=>{n(o,{name:"record-player",castShadow:!0,receiveShadow:!0,"position.y":.3,children:(l,X)=>{var b=be(),S=v(b);t(S,()=>r.BoxGeometry,(c,w)=>{w(c,{args:[2.8,.3,2.3]})});var z=e(S,2);t(z,()=>r.MeshStandardMaterial,(c,w)=>{w(c,{roughness:.5,color:"#bbb"})});var y=e(z,2);G(y,{color:"black"});var $=e(y,2);r($,{get is(){return f},name:"needle-shoulder","position.y":.28,"position.x":1.15,"position.z":-.85,"rotation.y":-Math.PI/20,castShadow:!0,receiveShadow:!0,children:(c,w)=>{var M=fe(),P=v(M);t(P,()=>r.CylinderGeometry,(i,d)=>{d(i,{args:[.1,.1,.15]})});var x=e(P,2);t(x,()=>r.MeshStandardMaterial,(i,d)=>{d(i,{})});var k=e(x,2);G(k,{color:"black",thresholdAngle:80});var L=e(k,2);t(L,()=>r.Mesh,(i,d)=>{d(i,{"rotation.x":Math.PI/2,"position.z":.75,castShadow:!0,receiveShadow:!0,children:(D,oe)=>{var A=ge(),O=v(A);t(O,()=>r.CylinderGeometry,(u,m)=>{m(u,{args:[.05,.05,1.5]})});var C=e(O,2);t(C,()=>r.MeshStandardMaterial,(u,m)=>{m(u,{})});var E=e(C,2);G(E,{color:"black",thresholdAngle:80}),h(D,A)},$$slots:{default:!0}})}),h(c,M)},$$slots:{default:!0}});var te=e($,2);r(te,{name:"record",get is(){return s},"position.y":.2,"position.x":.2,castShadow:!0,receiveShadow:!0,children:(c,w)=>{var M=$e(),P=v(M);t(P,()=>r.CylinderGeometry,(i,d)=>{d(i,{args:[1,1,.02,128]})});var x=e(P,2);r(x,{get is(){return j},color:"red"});var k=e(x,2);G(k,{color:"black",thresholdAngle:80});var L=e(k,2);t(L,()=>r.Mesh,(i,d)=>{d(i,{"position.y":.01,castShadow:!0,children:(D,oe)=>{var A=ye(),O=v(A);t(O,()=>r.CylinderGeometry,(u,m)=>{m(u,{args:[.35,.35,.001,64]})});var C=e(O,2);t(C,()=>r.MeshStandardMaterial,(u,m)=>{m(u,{roughness:.5,get side(){return ce},color:"#bbb"})});var E=e(C,2);G(E,{color:"black"}),h(D,A)},$$slots:{default:!0}})}),h(c,M)},$$slots:{default:!0}}),h(l,b)},$$slots:{default:!0}})});var N=e(K,2);t(N,()=>r.Mesh,(o,n)=>{n(o,{"rotation.x":-Math.PI/2,receiveShadow:!0,children:(l,X)=>{var b=Se(),S=v(b);t(S,()=>r.PlaneGeometry,(y,$)=>{$(y,{args:[100,100]})});var z=e(S,2);t(z,()=>r.MeshStandardMaterial,(y,$)=>{$(y,{roughness:.5})}),h(l,b)},$$slots:{default:!0}})});var Q=e(N,2);ee(Q,{get volume(){return F(W)},position:[-3,0,0],"rotation.y":Math.PI/8});var R=e(Q,2);ee(R,{get volume(){return F(B)},position:[3,0,0],"rotation.y":-Math.PI/8});var re=e(R,2);me(re,{}),h(_,U),ie()}const Le=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"}));export{Me as _,Le as a};
