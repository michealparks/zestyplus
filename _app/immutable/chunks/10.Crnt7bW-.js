import{a as f,t as v}from"./disclose-version.hHKxC-Jk.js";import"./legacy.DAlpyf03.js";import{a0 as Q,aQ as U,z as a,aR as _,a2 as g,a1 as G,a3 as n,at as L}from"./runtime.BZbTZrfI.js";import{i as V}from"./lifecycle.dIvfKtke.js";import{b as B,c as H}from"./props.DC6YhwhV.js";import{C as J,V as A,I as R,J as E,Q as F}from"./three.module.iKKkBh6O.js";import{a as K,u as N,T as o}from"./T.DXVn7S3O.js";import"./index.fMZ61YjE.js";import{O as W}from"./Outlines.CD-tMRWi.js";import{u as X}from"./analyser.svelte.ARxWFVcG.js";import"./auth.svelte.C3nh3yTw.js";import{h as Y}from"./color.D7bleQK4.js";var Z=v("<!> <!>",1),ee=v("<!> <!> <!>",1),te=v("<!> <!> <!> <!> <!>",1);function ae(C,P){Q(P,!1);const k=B(),O=()=>H(T,"$size",k),{size:T}=K(),{frequencyData:w}=X(),d=16,p=1,M=d*p/2,j=new J("red"),i=new A,$=new F,u=new A(1,1,1),c=new E,t=U(new R(void 0,void 0,d*d));let h=0;for(let e=0;e<d;e+=1)for(let r=0;r<d;r+=1)i.set(e*p-M,0,r*p-M),c.setPosition(i),a(t).setMatrixAt(h,c),a(t).setColorAt(h,Y(j,e*r/1e4)),h+=1;_(t,a(t).instanceMatrix.needsUpdate=!0),a(t).instanceColor&&_(t,a(t).instanceColor.needsUpdate=!0),N(()=>{for(let e=0,r=w.current.length/2;e<r;e+=1){const s=w.current[e];s&&(a(t).getMatrixAt(e,c),c.decompose(i,$,u),i.y=s/75,u.set(1,i.y*4+1,1),c.compose(i,$,u),a(t).setMatrixAt(e,c))}_(t,a(t).instanceMatrix.needsUpdate=!0)}),V();var b=te(),x=g(b),q=L(()=>O().width/40);o.OrthographicCamera(x,{makeDefault:!0,position:[-28,60,65],get zoom(){return a(q)},oncreate:e=>e.lookAt(0,0,0)});var y=n(x,2);o.AmbientLight(y,{intensity:.5});var S=n(y,2);o.DirectionalLight(S,{castShadow:!0,"shadow.camera.left":-15,"shadow.camera.right":15,"shadow.camera.top":15,"shadow.camera.bottom":-15,"shadow.mapSize.width":2048,"shadow.mapSize.height":2048,intensity:3,position:[10,10,10]});var z=n(S,2);o.Mesh(z,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(e,r)=>{var s=Z(),l=g(s);o.PlaneGeometry(l,{args:[100,100]});var m=n(l,2);o.MeshStandardMaterial(m,{color:"black"}),f(e,s)},$$slots:{default:!0}});var D=n(z,2);o(D,{get is(){return a(t)},castShadow:!0,receiveShadow:!0,children:(e,r)=>{var s=ee(),l=g(s);o.BoxGeometry(l,{args:[.5,.5,.5]});var m=n(l,2);o.MeshStandardMaterial(m,{});var I=n(m,2);W(I,{color:"black"}),f(e,s)},$$slots:{default:!0}}),f(C,b),G()}const fe=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));export{ae as _,fe as a};
