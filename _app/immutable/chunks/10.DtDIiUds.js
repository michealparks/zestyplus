import{a as f,t as v}from"./disclose-version.dWtSGD-r.js";import"./legacy.C8Ez_6LP.js";import{a0 as Q,aP as U,z as a,aQ as _,a2 as g,a1 as G,a3 as n,at as L}from"./runtime.liGrBqgh.js";import{i as V}from"./lifecycle.BmG2I5-Y.js";import{b as B,c as H}from"./props.B9ZiqexT.js";import{C as J,V as A,I as E,J as F,Q as K}from"./three.module.iKKkBh6O.js";import{a as N,u as R,T as o}from"./T.Bd7S2fO2.js";import"./index.BXAB9BT5.js";import{O as W}from"./Outlines.CGHACcP9.js";import{u as X}from"./analyser.svelte.CzcSvk9D.js";import"./auth.svelte.CGUMTyGk.js";import{h as Y}from"./color.D7bleQK4.js";var Z=v("<!> <!>",1),ee=v("<!> <!> <!>",1),te=v("<!> <!> <!> <!> <!>",1);function ae(P,C){Q(C,!1);const k=B(),O=()=>H(T,"$size",k),{size:T}=N(),{frequencyData:w}=X(),d=16,p=1,M=d*p/2,j=new J("red"),i=new A,$=new K,u=new A(1,1,1),c=new F,t=U(new E(void 0,void 0,d*d));let h=0;for(let e=0;e<d;e+=1)for(let r=0;r<d;r+=1)i.set(e*p-M,0,r*p-M),c.setPosition(i),a(t).setMatrixAt(h,c),a(t).setColorAt(h,Y(j,e*r/1e4)),h+=1;_(t,a(t).instanceMatrix.needsUpdate=!0),a(t).instanceColor&&_(t,a(t).instanceColor.needsUpdate=!0),R(()=>{for(let e=0,r=w.current.length/2;e<r;e+=1){const s=w.current[e];s&&(a(t).getMatrixAt(e,c),c.decompose(i,$,u),i.y=s/75,u.set(1,i.y*4+1,1),c.compose(i,$,u),a(t).setMatrixAt(e,c))}_(t,a(t).instanceMatrix.needsUpdate=!0)}),V();var b=te(),x=g(b),q=L(()=>O().width/40);o.OrthographicCamera(x,{makeDefault:!0,position:[-28,60,65],get zoom(){return a(q)},oncreate:e=>e.lookAt(0,0,0)});var y=n(x,2);o.AmbientLight(y,{intensity:.5});var S=n(y,2);o.DirectionalLight(S,{castShadow:!0,"shadow.camera.left":-15,"shadow.camera.right":15,"shadow.camera.top":15,"shadow.camera.bottom":-15,"shadow.mapSize.width":2048,"shadow.mapSize.height":2048,intensity:3,position:[10,10,10]});var z=n(S,2);o.Mesh(z,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(e,r)=>{var s=Z(),l=g(s);o.PlaneGeometry(l,{args:[100,100]});var m=n(l,2);o.MeshStandardMaterial(m,{color:"black"}),f(e,s)},$$slots:{default:!0}});var D=n(z,2);o(D,{get is(){return a(t)},castShadow:!0,receiveShadow:!0,children:(e,r)=>{var s=ee(),l=g(s);o.BoxGeometry(l,{args:[.5,.5,.5]});var m=n(l,2);o.MeshStandardMaterial(m,{});var I=n(m,2);W(I,{color:"black"}),f(e,s)},$$slots:{default:!0}}),f(P,b),G()}const fe=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));export{ae as _,fe as a};
