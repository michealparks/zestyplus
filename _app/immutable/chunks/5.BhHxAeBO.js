import"./disclose-version.Bg9kRutz.js";import{p as G,u as C,a as O,f as D,a2 as H,s as f,d as W}from"./index-client.DzQlphmH.js";import{a as I,t as V}from"./template.CgCchT00.js";import{c as U}from"./svelte-component.D0WKzo0g.js";import{b3 as E,C as Q,B as x,u as Y,k as J,p as K,d as m,V as R,A as N,bh as $,s as ee,i as te,I as oe,aR as ae,a3 as re,Q as ne}from"./T.D9_Xg1XW.js";import{a as se}from"./auth.svelte.BAHdEbOi.js";import{h as q}from"./color.D7bleQK4.js";import{f as ie}from"./index.DsEVf3p4.js";import{R as ce}from"./RoundedBoxGeometry.zLLJIJyk.js";import"./legacy.CtaTdtmd.js";import{p as c,s as le,r as de}from"./props.DHXOHPV0.js";import{L as ue}from"./Lightformer.DPT4bBXl.js";const fe=`uniform float time;
attribute float size;
varying vec3 vColor;
void main() {
	vColor = color;
	vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
	gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
	gl_Position = projectionMatrix * mvPosition;
}`;var me=V("<!> <!> <!>",1);function pe(L,a){G(a,!0);let r=c(a,"count",3,5e3),j=c(a,"radius",3,50),p=c(a,"depth",3,50),t=c(a,"factor",3,6),l=c(a,"saturation",3,1),g=c(a,"lightness",3,.8),h=c(a,"speed",3,1),d=c(a,"fade",3,!0),k=c(a,"opacity",3,1),S=c(a,"ref",15),P=de(a,["$$slots","$$events","$$legacy","count","radius","depth","factor","saturation","lightness","speed","fade","opacity","ref","children"]);const b=new E,w=new R,_=new N,v=new Q,F=s=>w.setFromSpherical(_.set(s,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI));let y=new x(new Float32Array(r()*3),3),M=new x(new Float32Array(r()*3),3),A=new x(new Float32Array(r()),1);C(()=>{y=new x(new Float32Array(r()*3),3),M=new x(new Float32Array(r()*3),3),A=new x(new Float32Array(r()),1)}),C(()=>{const s=p()/r();let z=j()+p();for(let i=0;i<r();i+=1){z-=s*Math.random();const u=F(z);y.setXYZ(i,u.x,u.y,u.z),v.setHSL(i/r(),l(),g()),M.setXYZ(i,v.r,v.g,v.b),A.setX(i,(.5+.5*Math.random())*t())}});const{stop:B,start:T}=Y(s=>{e.time.value+=s*h()},{autoStart:!1});C(()=>h()===0?B():T());const e={time:{value:0},fade:{value:1},opacity:{value:1}},o=new J({uniforms:e,vertexShader:fe,fragmentShader:ie});C(()=>{e.fade.value=d()?1:0}),C(()=>{e.opacity.value=k()});const n=new K;n.setAttribute("position",y),n.setAttribute("color",M),n.setAttribute("size",A),m(L,le({is:b},()=>P,{get ref(){return S()},set ref(s){S(s)},children:(s,z)=>{var i=me(),u=D(i);m(u,{is:n});var X=f(u,2);m(X,{is:o,blending:$,depthWrite:!1,transparent:!0,vertexColors:!0});var Z=f(X,2);ee(Z,()=>a.children??H,()=>({ref:b})),I(s,i)},$$slots:{default:!0}})),O()}var he=V("<!> <!>",1),ve=V("<!> <!> <!> <!> <!> <!>",1);function ge(L,a){G(a,!0);const{camera:r,scene:j}=te(),p=1e3,t=new oe(void 0,void 0,p);t.name="cubes",t.frustumCulled=!1,t.castShadow=t.receiveShadow=!0;const l=new R,g=new ne,h=new R(1,1,1),d=new re,{frequencyData:k}=se();let S=p-1;const P="#C84C09",b=new Q(P);W(()=>{for(let e=0;e<p;e+=1){const o=(Math.random()-.5)*5,n=o>0?2:-2,s=(Math.random()-.5)*10;l.set(o*2+n,s,-e/2),g.random(),d.compose(l,g,h),t.setMatrixAt(e,d),t.setColorAt(e,q(b,0))}t.instanceColor&&(t.instanceColor.needsUpdate=!0),t.instanceMatrix.needsUpdate=!0});const w=new ae;j.add(w.target);let _;Y(e=>{r.current.position.z-=e*20,_&&(_.position.z=r.current.position.z,w.position.z=r.current.position.z+2,w.target.position.copy(r.current.position));for(let o=0;o<p;o+=1){t.getMatrixAt(o,d),d.decompose(l,g,h);const n=k.current[o%32];h.setScalar(Math.max(n/100,.5)),t.setColorAt(o,q(b.set(P),n/1e3)),l.z>r.current.position.z&&(l.z=-S/2,S+=1),d.compose(l,g,h),t.setMatrixAt(o,d)}t.instanceColor&&(t.instanceColor.needsUpdate=!0),t.instanceMatrix.needsUpdate=!0});var v=ve(),F=D(v);U(F,()=>m.PerspectiveCamera,(e,o)=>{o(e,{makeDefault:!0,position:[0,.5,5],oncreate:n=>n.lookAt(0,0,.1)})});var y=f(F,2);m(y,{is:w,castShadow:!0,"position.x":2,"position.y":2,intensity:.5});var M=f(y,2);U(M,()=>m.AmbientLight,(e,o)=>{o(e,{intensity:.5})});var A=f(M,2);m(A,{is:t,children:(e,o)=>{var n=he(),s=D(n);ce(s,{});var z=f(s,2);U(z,()=>m.MeshStandardMaterial,(i,u)=>{u(i,{roughness:.05})}),I(e,n)},$$slots:{default:!0}});var B=f(A,2);ue(B,{});var T=f(B,2);pe(T,{get ref(){return _},set ref(e){_=e}}),I(L,v),O()}const Be=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{ge as _,Be as a};
