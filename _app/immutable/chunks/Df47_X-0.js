import"./DsnmJJEf.js";import{Z as et,g as t,_ as l,aq as D,a0 as x,a6 as st,a1 as A,a2 as rt,u as X,$ as N,a3 as T}from"./Dj-DrZoY.js";import{i as E}from"./BTE88G2Y.js";import{e as Y}from"./oo0O6sVj.js";import{c as G}from"./DY0mOCK0.js";import{p as b,a as it,r as lt,b as dt,s as J}from"./HA0OJ1C7.js";import{ao as tt,A as ft,fZ as at,f_ as s}from"./C4vSLsTb.js";import{u as K}from"./q5yEvatA.js";import"./CClPch6m.js";import{s as ct}from"./B9m9H9kW.js";function ut(O,a){et(a,!0);let g=b(a,"speed",3,1),m=b(a,"floatIntensity",3,1),M=b(a,"floatingRange",19,()=>[-.1,.1]),d=b(a,"rotationSpeed",3,0),_=b(a,"rotationIntensity",3,0),U=b(a,"seed",19,()=>1e4*Math.random()),w=b(a,"ref",15),Z=lt(a,["$$slots","$$events","$$legacy","speed","floatIntensity","floatingRange","rotationSpeed","rotationIntensity","seed","ref","children"]);const h=new tt,o=new tt;let i=U();const n=ft.mapLinear;let u=l(()=>Array.isArray(g())?g():[g(),g(),g()]),f=l(()=>Array.isArray(m())?m():[m(),m(),m()]),v=l(()=>M().length===3?M():[[0,0],M(),[0,0]]),L=l(()=>Array.isArray(d())?d():[d(),d(),d()]),k=l(()=>Array.isArray(_())?_():[_(),_(),_()]);at(p=>{i+=p,o.position.x=n(Math.sin(i/4*t(u)[0])/10,-.1,.1,...t(v)[0])*t(f)[0],o.position.y=n(Math.sin(i/4*t(u)[1])/10,-.1,.1,...t(v)[1])*t(f)[1],o.position.z=n(Math.sin(i/4*t(u)[2])/10,-.1,.1,...t(v)[2])*t(f)[2],o.rotation.x=Math.cos(i/4*t(L)[0])/8*t(k)[0],o.rotation.y=Math.sin(i/4*t(L)[1])/8*t(k)[1],o.rotation.z=Math.sin(i/4*t(L)[2])/20*t(k)[2],o.updateMatrix()}),s(O,it({get is(){return h}},()=>Z,{get ref(){return w()},set ref(p){w(p)},children:(p,q)=>{s(p,{get is(){return o},matrixAutoUpdate:!1,children:(P,B)=>{var C=D(),H=x(C);ct(H,()=>a.children??st,()=>({ref:o})),A(P,C)},$$slots:{default:!0}})},$$slots:{default:!0}})),rt()}var pt=N("<!> <!>",1),gt=N("<!> <!>",1),mt=N("<!> <!> <!> <!> <!>",1);function _t(O,a){et(a,!0);const g=()=>J(U,"$trainHeadGLTF",d),m=()=>J(w,"$trainCarGLTF",d),M=()=>J(Z,"$trackGLTF",d),[d,_]=dt(),U=K("/glb/HighSpeed_Front.glb"),w=K("/glb/HighSpeed_Wagon.glb"),Z=K("/glb/RailwayTrack_Straight.glb"),h=l(()=>g()?.scene),o=l(()=>m()?.scene),i=l(()=>M()?.scene),n=l(()=>t(i)?Array.from({length:15}).map(()=>t(i).clone()):void 0),u=l(()=>t(o)?Array.from({length:4}).map(()=>t(o).clone()):void 0);let f=0,v=-18;X(()=>{if(t(u)){let e=11.5;for(const r of t(u))r.position.x=e,e+=11.5}}),X(()=>{if(t(n)){let e=-18;for(const r of t(n))r.position.x=e,e+=18;f=t(n).length}});const L=10,k=15;at(e=>{if(!t(h)||!t(n))return;const{x:r}=t(h).position;t(h).position.x-=e*k,r<v+L&&(f-=1,v-=18,t(n)[f].position.x=v,f===0&&(f=t(n).length))});var p=mt(),q=x(p);G(q,()=>s.DirectionalLight,(e,r)=>{r(e,{castShadow:!0,position:[5,5,5]})});var P=T(q,2);G(P,()=>s.AmbientLight,(e,r)=>{r(e,{})});var B=T(P,2);{var C=e=>{s(e,{get is(){return t(h)},castShadow:!0,receiveShadow:!0,children:(r,R)=>{var $=pt(),y=x($);ut(y,{children:(c,S)=>{var j=D(),I=x(j);G(I,()=>s.PerspectiveCamera,(W,Q)=>{Q(W,{makeDefault:!0,position:[-15,5,15],oncreate:V=>{V.lookAt(0,0,0)}})}),A(c,j)},$$slots:{default:!0}});var F=T(y,2);{var z=c=>{var S=D(),j=x(S);Y(j,17,()=>t(u),I=>I.uuid,(I,W,Q,V)=>{s(I,{get is(){return t(W)},castShadow:!0,receiveShadow:!0})}),A(c,S)};E(F,c=>{t(u)&&c(z)})}A(r,$)},$$slots:{default:!0}})};E(B,e=>{t(h)&&e(C)})}var H=T(B,2);{var ot=e=>{var r=D(),R=x(r);Y(R,17,()=>t(n),$=>$?.uuid,($,y,F,z)=>{s($,{get is(){return t(y)}})}),A(e,r)};E(H,e=>{t(n)&&e(ot)})}var nt=T(H,2);G(nt,()=>s.Mesh,(e,r)=>{r(e,{position:[0,-.2,0],children:(R,$)=>{var y=gt(),F=x(y);G(F,()=>s.BoxGeometry,(c,S)=>{S(c,{args:[500,.1,600]})});var z=T(F,2);G(z,()=>s.MeshToonMaterial,(c,S)=>{S(c,{color:"blue"})}),A(R,y)},$$slots:{default:!0}})}),A(O,p),rt(),_()}const Mt=Object.freeze(Object.defineProperty({__proto__:null,default:_t},Symbol.toStringTag,{value:"Module"}));export{_t as _,Mt as a};
