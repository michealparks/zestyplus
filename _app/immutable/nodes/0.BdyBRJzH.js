const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/2.-QGo-h7B.js","../chunks/disclose-version.Bg9kRutz.js","../chunks/legacy.CtaTdtmd.js","../chunks/index.BFqC5wTN.js","../chunks/3.T-J5EsQ8.js","../chunks/template.BCsPwpPZ.js","../chunks/index-client.7bxKioEb.js","../chunks/T.D7KAkooU.js","../chunks/props.gynuqLyB.js","../chunks/index.C3MH0Qv2.js","../assets/T.C-GW8brK.css","../chunks/index.Byt2NWqd.js","../chunks/if.J9R6XJFY.js","../chunks/svelte-component.C-0_6v47.js","../chunks/render.DpKYLZQ6.js","../chunks/class.D9OKVRHN.js","../chunks/this.CEjktYH2.js","../chunks/4.m4sKhNgU.js","../chunks/each.Cn_T-8LQ.js","../chunks/Outlines.DjNy7Wou.js","../chunks/BufferGeometryUtils.BdsJId6n.js","../chunks/revision.tMXKcaW1.js","../chunks/auth.svelte.D43NKd5e.js","../chunks/color.D7bleQK4.js","../chunks/5.CXjD0tmd.js","../chunks/RoundedBoxGeometry.DOOaHCbe.js","../chunks/Lightformer.ghPlg0_x.js","../chunks/useControlsContext.ATrzxAAb.js","../chunks/user.4rnExBO8.js","../chunks/6.C3RUoFok.js","../chunks/lifecycle.CKswTbsd.js","../chunks/Line2.0NwL35VC.js","../chunks/7.xUujxbK6.js","../chunks/cache.CKbdBbIr.js","../chunks/OrbitControls.vMhd6Otn.js","../chunks/World.1v2g4-NH.js","../chunks/createCollidersFromChildren.BusngId4.js","../chunks/Collider.C5hIyw_e.js","../chunks/8.BiVQvMig.js","../chunks/9.DMJp723h.js","../chunks/10.C02QwvWD.js","../chunks/MarchingCubes.CkjizSMo.js","../chunks/MarchingCube.R6DFq4Ia.js","../chunks/MarchingPlane.36SGiCrl.js","../chunks/types.D-b3hOCm.js","../chunks/11.BCGNOrd4.js","../chunks/12.CAXzjjCD.js","../chunks/math.BF6GMVh4.js","../chunks/13.DI2-tpwy.js","../chunks/MathUtils.DS64O8Kj.js","../chunks/shader.WnOi0MZ3.js","../chunks/14.CrnLuiWM.js","../chunks/Ribbon.DymPIekU.js","../chunks/15.B70HB0QC.js","../chunks/16.DiIvr1a1.js","../chunks/17.Cdy8MZ5t.js","../chunks/Rope.CkTCblbB.js","../chunks/Skin.D5YrQDao.js"])))=>i.map(i=>d[i]);
var vt=e=>{throw TypeError(e)};var je=(e,t,r)=>t.has(e)||vt("Cannot "+r);var b=(e,t,r)=>(je(e,t,"read from private field"),r?r.call(e):t.get(e)),N=(e,t,r)=>t.has(e)?vt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ee=(e,t,r,i)=>(je(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),re=(e,t,r)=>(je(e,t,"access private method"),r);var We=(e,t,r,i)=>({set _(n){ee(e,t,n,r)},get _(){return b(e,t,i)}});import"../chunks/disclose-version.Bg9kRutz.js";import{E as Jt,aM as qt,aN as er,n as tr,h as rr,M as pt,an as ir,q as sr,a2 as se,aO as nr,ax as mt,ar as gt,Y as ar,p as Q,f as G,a as X,k as T,a5 as j,c as I,r as D,a6 as O,aL as or,d as k,aa as lr,m as Oe,aP as Ut,aQ as He,s as H,t as ve,av as Ze,aR as ur}from"../chunks/index-client.7bxKioEb.js";import{b as cr,o as hr,s as Re,d as lt,r as fr}from"../chunks/render.DpKYLZQ6.js";import{c as Y,a as U,t as L,d as dr}from"../chunks/template.BCsPwpPZ.js";import{i as $}from"../chunks/if.J9R6XJFY.js";import{ak as vr,ag as pr,al as mr,am as gr,an as xr,ao as _r,ap as Sr,aq as Tr,s as Fe,ar as yr,j as V,as as me,at as F,au as Er,av as wr,aw as Mr,ax as Rr,ay as le,az as C,aA as Ge,aB as xt,aC as br,M as Br,aD as Le,l as Pe,D as De,k as Se,aE as Ar,aF as ut,aG as zt,aH as Ct,R as Pt,aI as we,aJ as Ur,A as zr,B as _t,aK as Dt,aL as It,C as Cr,a2 as St,i as Pr,u as Dr}from"../chunks/T.D7KAkooU.js";import{p as Ir}from"../chunks/index.DdmRso8i.js";import{b as Je}from"../chunks/this.CEjktYH2.js";import{r as ct,s as Or,a as K,b as Lr,c as Tt}from"../chunks/props.gynuqLyB.js";import{c as Nr}from"../chunks/cache.CKbdBbIr.js";import{c as Hr}from"../chunks/user.4rnExBO8.js";import{g as ht,a as Fr,o as Ot}from"../chunks/types.D-b3hOCm.js";import{u as Lt,a as Gr}from"../chunks/auth.svelte.D43NKd5e.js";import{_ as P}from"../chunks/preload-helper.C1FmrZbK.js";import"../chunks/legacy.CtaTdtmd.js";import{e as Nt,i as kr}from"../chunks/each.Cn_T-8LQ.js";import{s as qe,h as Vr,a as $r,t as jr}from"../chunks/class.D9OKVRHN.js";import{i as ke}from"../chunks/lifecycle.CKswTbsd.js";const Wr=()=>performance.now(),te={tick:e=>requestAnimationFrame(e),now:()=>Wr(),tasks:new Set};function Ht(){const e=te.now();te.tasks.forEach(t=>{t.c(e)||(te.tasks.delete(t),t.f())}),te.tasks.size!==0&&te.tick(Ht)}function Kr(e){let t;return te.tasks.size===0&&te.tick(Ht),{promise:new Promise(r=>{te.tasks.add(t={c:e,f:r})}),abort(){te.tasks.delete(t)}}}function Ie(e,t){e.dispatchEvent(new CustomEvent(t))}function Qr(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function yt(e){const t={},r=e.split(";");for(const i of r){const[n,u]=i.split(":");if(!n||u===void 0)break;const c=Qr(n.trim());t[c]=u.trim()}return t}const Xr=e=>e;function Ft(e,t,r,i){var n=(e&nr)!==0,u="both",c,p=t.inert,l,a;function v(){var f=ar,S=pt;mt(null),gt(null);try{return c??(c=r()(t,(i==null?void 0:i())??{},{direction:u}))}finally{mt(f),gt(S)}}var s={is_global:n,in(){t.inert=p,Ie(t,"introstart"),l=et(t,v(),a,1,()=>{Ie(t,"introend"),l==null||l.abort(),l=c=void 0})},out(f){t.inert=!0,Ie(t,"outrostart"),a=et(t,v(),l,0,()=>{Ie(t,"outroend"),f==null||f()})},stop:()=>{l==null||l.abort(),a==null||a.abort()}},o=pt;if((o.transitions??(o.transitions=[])).push(s),cr){var d=n;if(!d){for(var h=o.parent;h&&h.f&Jt;)for(;(h=h.parent)&&!(h.f&qt););d=!h||(h.f&er)!==0}d&&tr(()=>{rr(()=>s.in())})}}function et(e,t,r,i,n){var u=i===1;if(ir(t)){var c,p=!1;return sr(()=>{if(!p){var S=t({direction:u?"in":"out"});c=et(e,S,r,i,n)}}),{abort:()=>{p=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return n(),{abort:se,deactivate:se,reset:se,t:()=>i};const{delay:l=0,css:a,tick:v,easing:s=Xr}=t;var o=[];if(u&&r===void 0&&(v&&v(0,1),a)){var d=yt(a(0,1));o.push(d,d)}var h=()=>1-i,f=e.animate(o,{duration:l});return f.onfinish=()=>{var S=(r==null?void 0:r.t())??1-i;r==null||r.abort();var E=i-S,g=t.duration*Math.abs(E),_=[];if(g>0){if(a)for(var m=Math.ceil(g/16.666666666666668),x=0;x<=m;x+=1){var w=S+E*s(x/m),z=a(w,1-w);_.push(yt(z))}h=()=>{var B=f.currentTime;return S+E*s(B/g)},v&&Kr(()=>{if(f.playState!=="running")return!1;var B=h();return v(B,1-B),!0})}f=e.animate(_,{duration:g,fill:"forwards"}),f.onfinish=()=>{h=()=>i,v==null||v(i,1-i),n()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=se)},deactivate:()=>{n=se},reset:()=>{i===0&&(v==null||v(1,0))},t:()=>h()}}const Yr=!0,Zr=!1,Jr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Yr,ssr:Zr},Symbol.toStringTag,{value:"Module"})),qr=e=>{vr(e),Nr();const{scene:t}=pr();mr(t),gr(t),xr(),_r(e),Sr(),Tr(e),Hr()};function ei(e,t){Q(t,!0);let r=ct(t,["$$slots","$$events","$$legacy","children"]);qr(r);var i=Y(),n=G(i);Fe(n,()=>t.children),U(e,i),X()}var ti=L('<div class="svelte-1osucwe"><canvas class="svelte-1osucwe"><!></canvas></div>');function ri(e,t){Q(t,!0);let r=ct(t,["$$slots","$$events","$$legacy","children"]),i=j(void 0),n=j(void 0);var u=ti(),c=I(u),p=I(c);{var l=a=>{ei(a,Or({get dom(){return T(n)},get canvas(){return T(i)}},()=>r,{children:(v,s)=>{var o=Y(),d=G(o);Fe(d,()=>t.children??se),U(v,o)},$$slots:{default:!0}}))};$(p,a=>{T(i)&&T(n)&&a(l)})}D(c),Je(c,a=>O(i,a),()=>T(i)),D(u),Je(u,a=>O(n,a),()=>T(n)),U(e,u),X()}const ft=window;function ii(e){let t=e.activeElement;for(;t!=null&&t.shadowRoot;){const r=t.shadowRoot.activeElement;if(r===t)break;t=r}return t}function tt(e,t,r,i){const n=Array.isArray(t)?t:[t];for(const u of n)e.addEventListener(u,r,i);return()=>{for(const u of n)e.removeEventListener(u,r,i)}}var Te,be,ne,he,oe,rt,it;class si{constructor(t,r){N(this,oe);N(this,Te,j());N(this,be);N(this,ne,0);N(this,he,null);b(this,Te).v=K(t),ee(this,be,r)}get current(){return or()?k(()=>(We(this,ne)._++,b(this,ne)===1&&re(this,oe,rt).call(this,!0),()=>{lr().then(()=>{We(this,ne)._--,b(this,ne)===0&&re(this,oe,it).call(this)})})):b(this,ne)===0&&(re(this,oe,rt).call(this,!1),re(this,oe,it).call(this)),T(b(this,Te))}}Te=new WeakMap,be=new WeakMap,ne=new WeakMap,he=new WeakMap,oe=new WeakSet,rt=function(t){ee(this,he,b(this,be).call(this,r=>{O(b(this,Te),K(r))},t)??null)},it=function(){b(this,he)!==null&&(b(this,he).call(this),ee(this,he,null))};function ni(e={}){const{window:t=ft}=e,r=e.document??(t==null?void 0:t.document);return new si(null,(i,n)=>{function u(){r&&i(ii(r))}if(u(),!n||!t)return;const c=tt(t,"focusin",u),p=tt(t,"focusout",u);return()=>{c(),p()}})}ni();function ai(e,t=250){let r=j(null);function i(...n){if(T(r))T(r).timeout&&clearTimeout(T(r).timeout);else{let u,c;const p=new Promise((l,a)=>{u=l,c=a});O(r,K({timeout:null,runner:null,promise:p,resolve:u,reject:c}))}return T(r).runner=async()=>{if(!T(r))return;const u=T(r);O(r,null);try{u.resolve(await e.apply(this,n))}catch(c){u.reject(c)}},T(r).timeout=setTimeout(T(r).runner,typeof t=="function"?t():t),T(r).promise}return i.cancel=async()=>{(!T(r)||T(r).timeout===null)&&(await new Promise(n=>setTimeout(n,0)),!T(r)||T(r).timeout===null)||(clearTimeout(T(r).timeout),T(r).reject("Cancelled"),O(r,null))},i.runScheduledNow=async()=>{var n,u;(!T(r)||!T(r).timeout)&&(await new Promise(c=>setTimeout(c,0)),!T(r)||!T(r).timeout)||(clearTimeout(T(r).timeout),T(r).timeout=null,await((u=(n=T(r)).runner)==null?void 0:u.call(n)))},Object.defineProperty(i,"pending",{enumerable:!0,get(){var n;return!!((n=T(r))!=null&&n.timeout)}}),i}function oi(e){return typeof e=="function"}function Me(e,t){if(oi(e)){const r=e;return r()??t??r()}return e??t??e}function Et(e,t,r,i){k(()=>{const n=Me(e),u=Me(t);if(n!=null)return tt(n,u,r,i)})}const li=["keypress","mousemove","touchmove","click","scroll"],ui={events:li,initialState:!1,timeout:6e4};var fe,Be;class ci{constructor(t){N(this,fe,j(!1));N(this,Be,j(K(Date.now())));const r={...ui,...t},i=r.window??ft,n=r.document??(i==null?void 0:i.document),u=Oe(()=>Me(r.timeout)),c=Oe(()=>Me(r.events)),p=Oe(()=>Me(r.detectVisibilityChanges));b(this,fe).v=K(r.initialState);const l=ai(()=>{O(b(this,fe),!0)},()=>T(u));l();const a=()=>{O(b(this,fe),!1),O(b(this,Be),K(Date.now())),l()};Et(()=>i,T(c),()=>{a()},{passive:!0}),k(()=>{!T(p)||!n||Et(n,["visibilitychange"],()=>{n.hidden||a()})})}get lastActive(){return T(b(this,Be))}get current(){return T(b(this,fe))}}fe=new WeakMap,Be=new WeakMap;function hi(e,t){switch(e){case"local":return t.localStorage;case"session":return t.sessionStorage}}var de,ae,ye,Ee,Ae,Ne,_e,st,Gt;class Ve{constructor(t,r,i={}){N(this,_e);N(this,de,j());N(this,ae);N(this,ye);N(this,Ee);N(this,Ae);N(this,Ne,t=>{t.key!==b(this,ae)||t.newValue===null||re(this,_e,st).call(this,t.newValue)});const{storage:n="local",serializer:u={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:c=!0,window:p=ft}=i;if(b(this,de).v=K(r),ee(this,ae,t),ee(this,ye,u),p===void 0)return;const l=hi(n,p);ee(this,Ee,l);const a=l.getItem(t);a!==null&&re(this,_e,st).call(this,a),c&&n==="local"&&ee(this,Ae,yr(()=>hr(p,"storage",b(this,Ne))))}get current(){var t;return(t=b(this,Ae))==null||t.call(this),T(b(this,de))}set current(t){O(b(this,de),K(t)),re(this,_e,Gt).call(this,t)}}de=new WeakMap,ae=new WeakMap,ye=new WeakMap,Ee=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,_e=new WeakSet,st=function(t){try{O(b(this,de),K(b(this,ye).deserialize(t)))}catch(r){console.error(`Error when parsing "${t}" from persisted store "${b(this,ae)}"`,r)}},Gt=function(t){var r;try{(r=b(this,Ee))==null||r.setItem(b(this,ae),b(this,ye).serialize(t))}catch(i){console.error(`Error when writing value from persisted store "${b(this,ae)}" to ${b(this,Ee)}`,i)}};var Ue;class fi{constructor(){N(this,Ue,j())}get current(){return T(b(this,Ue))}set current(t){O(b(this,Ue),K(t))}}Ue=new WeakMap;const kt=new fi;let wt=!1;const di={NO_TRACK_PLAYING:204},vi=async e=>{const t="https://api.spotify.com/v1/me/player/currently-playing";try{const r=await fetch(t,{headers:{Authorization:`Bearer ${e.access}`,"Content-Type":"application/json"}});if(r.status===di.NO_TRACK_PLAYING){console.log("No track is currently playing.");return}if(!r.ok){console.error(`fetchCurrentlyPlayingTrack: ${r.status} - ${r.statusText}`);return}return r.json()}catch(r){console.error("Error fetching currently playing track:",r)}},nt=async e=>{const t=await vi(e);if(kt.current=t,t===void 0){setTimeout(nt,3e3,e);return}const r=t.item.duration_ms-t.progress_ms+1e3;setTimeout(nt,r,e)},Vt=()=>{const{token:e,authenticated:t}=Lt();return wt||(k(()=>{t.current==="logged-in"&&nt(e)}),wt=!0),{track:kt}},dt=Object.assign({"../routes/+layout.svelte":()=>P(()=>Promise.resolve().then(()=>fn),void 0,import.meta.url),"../routes/+layout.ts":()=>P(()=>Promise.resolve().then(()=>Jr),void 0,import.meta.url),"../routes/+page.svelte":()=>P(()=>import("../chunks/2.-QGo-h7B.js").then(e=>e.a),__vite__mapDeps([0,1,2,3]),import.meta.url),"../routes/about/+page.svelte":()=>P(()=>import("../chunks/3.T-J5EsQ8.js").then(e=>e.a),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),"../routes/is/bars/+page.svelte":()=>P(()=>import("../chunks/4.m4sKhNgU.js").then(e=>e.a),__vite__mapDeps([17,1,6,3,5,18,13,8,7,9,10,11,2,19,20,21,22,23]),import.meta.url),"../routes/is/cubes/+page.svelte":()=>P(()=>import("../chunks/5.CXjD0tmd.js").then(e=>e.a),__vite__mapDeps([24,1,6,3,5,13,7,8,9,10,22,23,11,25,20,2,26,12,16,27,28]),import.meta.url),"../routes/is/curves/+page.svelte":()=>P(()=>import("../chunks/6.C3RUoFok.js").then(e=>e.a),__vite__mapDeps([29,1,2,3,6,5,18,30,7,8,9,10,11,22,23,31]),import.meta.url),"../routes/is/dogs/+page.svelte":()=>P(()=>import("../chunks/7.xUujxbK6.js").then(e=>e.a),__vite__mapDeps([32,1,6,3,5,12,18,13,8,7,9,10,33,20,11,34,27,28,2,35,36,37]),import.meta.url),"../routes/is/grid/+page.svelte":()=>P(()=>import("../chunks/8.BiVQvMig.js").then(e=>e.a),__vite__mapDeps([38,1,2,3,6,5,30,8,7,9,10,11,19,20,21,22,23]),import.meta.url),"../routes/is/just4jon/+page.svelte":()=>P(()=>import("../chunks/9.DMJp723h.js").then(e=>e.a),__vite__mapDeps([39,1,2,3,6,5,30,22,8,7,9,10,11,34,27,28]),import.meta.url),"../routes/is/lava/+page.svelte":()=>P(()=>import("../chunks/10.C02QwvWD.js").then(e=>e.a),__vite__mapDeps([40,1,6,3,5,18,13,7,8,9,10,11,34,27,28,2,41,42,43,22]),import.meta.url),"../routes/is/lava/MarchingCube.ts":()=>P(()=>import("../chunks/MarchingCube.R6DFq4Ia.js"),__vite__mapDeps([42,7,1,6,3,5,8,9,10]),import.meta.url),"../routes/is/lava/MarchingCubes.svelte":()=>P(()=>import("../chunks/MarchingCubes.CkjizSMo.js"),__vite__mapDeps([41,1,6,3,5,7,8,9,10,42,43]),import.meta.url),"../routes/is/lava/MarchingPlane.ts":()=>P(()=>import("../chunks/MarchingPlane.36SGiCrl.js"),__vite__mapDeps([43,7,1,6,3,5,8,9,10]),import.meta.url),"../routes/is/lava/types.ts":()=>P(()=>import("../chunks/types.D-b3hOCm.js").then(e=>e.t),__vite__mapDeps([44,6,3,9]),import.meta.url),"../routes/is/lines/+page.svelte":()=>P(()=>import("../chunks/11.BCGNOrd4.js").then(e=>e.a),__vite__mapDeps([45,1,6,3,5,18,13,8,7,9,10,11,12,21,2,23,22,31]),import.meta.url),"../routes/is/pulsar/+page.svelte":()=>P(()=>import("../chunks/12.CAXzjjCD.js").then(e=>e.a),__vite__mapDeps([46,1,2,3,6,5,18,30,22,8,47,7,9,10,11,34,27,28,31]),import.meta.url),"../routes/is/reflection/+page.svelte":()=>P(()=>import("../chunks/13.DI2-tpwy.js").then(e=>e.a),__vite__mapDeps([48,1,6,3,5,13,7,8,9,10,11,34,27,28,2,26,12,16,22,49,47,50]),import.meta.url),"../routes/is/reflection/shader.ts":()=>P(()=>import("../chunks/shader.WnOi0MZ3.js"),[],import.meta.url),"../routes/is/ribbons/+page.svelte":()=>P(()=>import("../chunks/14.CrnLuiWM.js").then(e=>e.a),__vite__mapDeps([51,1,2,3,6,5,7,8,9,10,11,34,27,28,52,21]),import.meta.url),"../routes/is/ribbons/Ribbon.svelte":()=>P(()=>import("../chunks/Ribbon.DymPIekU.js"),__vite__mapDeps([52,1,6,3,5,8,7,9,10,11,21,2]),import.meta.url),"../routes/is/rubix/+page.svelte":()=>P(()=>import("../chunks/15.B70HB0QC.js").then(e=>e.a),__vite__mapDeps([53,1,6,3,5,18,13,22,8,7,9,10,11,25,20,2,26,12,16,27,28]),import.meta.url),"../routes/is/shatter/+page.svelte":()=>P(()=>import("../chunks/16.DiIvr1a1.js").then(e=>e.a),__vite__mapDeps([54,1,6,3,5,18,13,8,7,9,10,35,36,12,26,16,11,27,28,2,22,49]),import.meta.url),"../routes/is/tubeman/+page.svelte":()=>P(()=>import("../chunks/17.Cdy8MZ5t.js").then(e=>e.a),__vite__mapDeps([55,1,6,3,5,13,8,7,9,10,56,18,36,37,11,34,27,28,2,57,35]),import.meta.url),"../routes/is/tubeman/Rope.svelte":()=>P(()=>import("../chunks/Rope.CkTCblbB.js"),__vite__mapDeps([56,1,6,3,5,18,13,8,7,9,10,36,37]),import.meta.url),"../routes/is/tubeman/Skin.svelte":()=>P(()=>import("../chunks/Skin.D5YrQDao.js"),__vite__mapDeps([57,1,6,3,5,13,7,8,9,10]),import.meta.url)}),$t=["just4jon","tubeman"],ce=[...new Set(Object.keys(dt).map(e=>e.split("/")[3]).filter(e=>e!==void 0&&!e.startsWith("+")).filter(e=>!$t.includes(e)))];console.log(Object.keys(dt).map(e=>e.split("/")[3]));console.log(Object.keys(dt).map(e=>e.split("/")[3]).filter(e=>e!==void 0&&!e.startsWith("+")).filter(e=>!$t.includes(e)));console.log(ce);const at=e=>{const t=window.location.pathname.replace("/is/","");let i=ce.findIndex(u=>u===t)+e;i===-1?i=ce.length-1:i===ce.length&&(i=0);let n=`/is/${ce[i]}`;n===void 0&&(n=ce[0]),ht(n)},Mt=()=>{const t=3e5+(Math.random()-.5)*2;return setTimeout(at,t,-1)},pi=()=>{const e=[...ce],t=r=>{Fr(r);const i=e.pop();i!==void 0&&setTimeout(t,1e3,i)};setTimeout(t,1e3,e.pop())},ge={CostcoMode:"c",Debug:"d",QRCode:"q",Settings:"s",TrackInfo:"t",Studio:"`",Fullscreen:"f",PreviousPage:"arrowleft",NextPage:"arrowright"},Ke=new Map;let Qe=!1;const xe=(e,t)=>{if(Qe===!1){const r=i=>{var u;const n=i.key.toLowerCase();(u=Ke.get(n))==null||u()};k(()=>(Qe=!0,window.addEventListener("keydown",r,{passive:!0}),()=>{Qe=!1,window.addEventListener("keydown",r)}))}k(()=>(Ke.set(e,t),()=>Ke.delete(e)))},mi=e=>e;function jt(e,{delay:t=0,duration:r=400,easing:i=mi}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:i,css:u=>`opacity: ${u*n}`}}var gi=L('<span class="svelte-101a3xu"> </span>'),xi=L('<div class="absolute bottom-0 left-0 flex items-end gap-1.5 p-4 text-white"><div class="h-[120px] w-[120px] overflow-hidden rounded-lg shadow-2xl"><img class="select-none" width="120" height="120"></div> <div class="flex flex-col gap-1 px-2 py-2"><p class="text-lg font-bold leading-none"> </p> <p class="text-xs leading-none opacity-75"></p></div></div>');function _i(e,t){Q(t,!1);const{track:r}=Vt(),i=Ut(new Ve("trackinfo-visible",!0));xe(ge.TrackInfo,()=>He(i,T(i).current=!T(i).current)),ke();var n=Y(),u=G(n);{var c=p=>{var l=xi();const a=Ze(()=>{const{item:S}=r.current;return{item:S}});var v=I(l),s=I(v);D(v);var o=H(v,2),d=I(o),h=I(d,!0);D(d);var f=H(d,2);Nt(f,5,()=>T(a).item.artists,S=>S.name,(S,E)=>{var g=gi(),_=I(g,!0);D(g),ve(()=>Re(_,T(E).name)),U(S,g)}),D(f),D(o),D(l),ve(()=>{qe(s,"alt",T(a).item.album.name),qe(s,"src",T(a).item.album.images[0].url),Re(h,T(a).item.name)}),Ft(3,l,()=>jt,()=>({duration:200})),U(p,l)};$(u,p=>{T(i).current&&r.current&&p(c)})}U(e,n),X()}const Rt=(e,t=se,r=se)=>{var i=Si();i.__click=function(...u){var c;(c=r())==null||c.apply(this,u)};var n=H(I(i));D(i),ve(()=>Re(n,` ${t()??""}`)),U(e,i)};var Si=L('<button class="flex gap-1 bg-zinc-900 px-2 py-1 text-xs text-slate-100"><svg id="icon-spotify" viewBox="0 0 24 28" class="h-4 fill-slate-100"><path d="M17.609 18.906c0-0.438-0.172-0.609-0.469-0.797-2.016-1.203-4.359-1.797-6.984-1.797-1.531 0-3 0.203-4.484 0.531-0.359 0.078-0.656 0.313-0.656 0.812 0 0.391 0.297 0.766 0.766 0.766 0.141 0 0.391-0.078 0.578-0.125 1.219-0.25 2.5-0.422 3.797-0.422 2.297 0 4.469 0.562 6.203 1.609 0.187 0.109 0.313 0.172 0.516 0.172 0.391 0 0.734-0.313 0.734-0.75zM19.109 15.547c0-0.422-0.156-0.719-0.547-0.953-2.391-1.422-5.422-2.203-8.563-2.203-2.016 0-3.391 0.281-4.734 0.656-0.5 0.141-0.75 0.484-0.75 1s0.422 0.938 0.938 0.938c0.219 0 0.344-0.063 0.578-0.125 1.094-0.297 2.406-0.516 3.922-0.516 2.969 0 5.672 0.781 7.625 1.937 0.172 0.094 0.344 0.203 0.594 0.203 0.531 0 0.938-0.422 0.938-0.938zM20.797 11.672c0-0.578-0.25-0.875-0.625-1.094-2.703-1.578-6.406-2.312-9.938-2.312-2.078 0-3.984 0.234-5.688 0.734-0.438 0.125-0.844 0.5-0.844 1.156 0 0.641 0.484 1.141 1.125 1.141 0.234 0 0.453-0.078 0.625-0.125 1.516-0.422 3.156-0.578 4.797-0.578 3.25 0 6.625 0.719 8.797 2.016 0.219 0.125 0.375 0.187 0.625 0.187 0.594 0 1.125-0.469 1.125-1.125zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12 12 5.375 12 12z"></path></svg> </button>'),Ti=L("<div><!></div>");function yi(e,t){Q(t,!1);const{authenticated:r,login:i,logout:n}=Lt();ke();var u=Ti(),c=I(u);{var p=a=>{var v=dr("...");U(a,v)},l=a=>{var v=Y(),s=G(v);{var o=h=>{var f=Ze(()=>()=>n());Rt(h,()=>"Logout Spotify",()=>T(f))},d=h=>{var f=Y(),S=G(f);{var E=g=>{var _=Ze(()=>()=>i());Rt(g,()=>"Connect Spotify",()=>T(_))};$(S,g=>{r.current==="logged-out"&&g(E)},!0)}U(h,f)};$(s,h=>{r.current==="logged-in"?h(o):h(d,!1)},!0)}U(a,v)};$(c,a=>{r.current==="pending"?a(p):a(l,!1)})}D(u),U(e,u),X()}lt(["click"]);var Ei=L("<img>");function Wt(e,t){let r=ct(t,["$$slots","$$events","$$legacy"]);var i=Ei();let n;ve(()=>n=$r(i,n,{...r,src:"zestyplus.png"})),Vr(i),fr(i),U(e,i)}var wi=(e,t)=>He(t,T(t).current=!T(t).current),Mi=L('<button class="absolute right-2 top-2 z-10 h-6 w-6 p-1" aria-label="Open settings"><svg class="h-full fill-white" viewBox="0 0 32 32"><path d="M13,16c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,14.346,13,16z"></path><path d="M13,26c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,24.346,13,26z"></path><path d="M13,6c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,4.346,13,6z"></path></svg></button>'),Ri=(e,t)=>{e.target===e.currentTarget&&He(t,T(t).current=!1)},bi=L('<button aria-label="Exit settings" class="absolute left-0 top-0 z-20 grid h-screen w-screen cursor-default backdrop-blur-sm"></button> <div class="pointer-events-none absolute left-0 top-0 z-20 grid h-screen w-screen place-content-center"><div class="pointer-events-auto h-44 w-80 rounded-sm bg-white p-2 shadow-xl"><div class="-mt-12 mb-4 flex w-full justify-center"><!></div> <div class="flex justify-center"><!></div></div></div>',1),Bi=L("<!> <!>",1);function Ai(e,t){Q(t,!1);const r=Ut(new Ve("settings-open",!1)),i=new ci({timeout:3e3});xe(ge.Settings,()=>He(r,T(r).current=!T(r).current)),ke();var n=Bi(),u=G(n);{var c=a=>{var v=Mi();v.__click=[wi,r],Ft(3,v,()=>jt),U(a,v)};$(u,a=>{i.current||a(c)})}var p=H(u,2);{var l=a=>{var v=bi(),s=G(v);s.__click=[Ri,r];var o=H(s,2),d=I(o),h=I(d),f=I(h);Wt(f,{class:"w-24"}),D(h);var S=H(h,2),E=I(S);yi(E,{}),D(S),D(d),D(o),U(a,v)};$(p,a=>{T(r).current&&a(l)})}U(e,n),X()}lt(["click"]);function Ui(e,t){Q(t,!1),Ot(r=>{if(document.startViewTransition)return new Promise(i=>{document.startViewTransition(async()=>{i(),await r.complete})})}),xe(ge.PreviousPage,()=>at(-1)),xe(ge.NextPage,()=>at(1)),ke(),X()}/**
 * postprocessing v6.36.6 build Tue Dec 31 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rüschen
 * @license Zlib
 */var Xe=1/1e3,zi=1e3,Ci=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*Xe}get fixedDelta(){return this._fixedDelta*Xe}set fixedDelta(e){this._fixedDelta=e*zi}get elapsed(){return this._elapsed*Xe}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Pi=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),r=new zr;return r.setAttribute("position",new _t(e,3)),r.setAttribute("uv",new _t(t,2)),r})(),Z=class ot{static get fullscreenGeometry(){return Pi}constructor(t="Pass",r=new xt,i=new br){this.name=t,this.renderer=null,this.scene=r,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const r=this.fullscreenMaterial;r!==null&&(r.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let r=this.screen;r!==null?r.material=t:(r=new Br(ot.fullscreenGeometry,t),r.frustumCulled=!1,this.scene===null&&(this.scene=new xt),this.scene.add(r),this.screen=r)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,r=Ge){}render(t,r,i,n,u){throw new Error("Render method not implemented!")}setSize(t,r){}initialize(t,r,i){}dispose(){for(const t of Object.keys(this)){const r=this[t];(r instanceof le||r instanceof Dt||r instanceof It||r instanceof ot)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},Di=class extends Z{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,n){const u=e.state.buffers.stencil;u.setLocked(!1),u.setTest(!1)}},Ii=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Kt="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Qt=class extends Se{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new C(null),opacity:new C(1)},blending:we,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ii,vertexShader:Kt})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Oi=class extends Z{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Qt,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new le(1,1,{minFilter:Le,magFilter:Le,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==me?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===F&&(this.renderTarget.texture.colorSpace=F))}},bt=new Cr,Xt=class extends Z{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,n){const u=this.overrideClearColor,c=this.overrideClearAlpha,p=e.getClearAlpha(),l=u!==null,a=c>=0;l?(e.getClearColor(bt),e.setClearColor(u,a?c:p)):a&&e.setClearAlpha(c),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(bt,p):a&&e.setClearAlpha(p)}},Li=class extends Z{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new Xt(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,n){const u=e.getContext(),c=e.state.buffers,p=this.scene,l=this.camera,a=this.clearPass,v=this.inverted?0:1,s=1-v;c.color.setMask(!1),c.depth.setMask(!1),c.color.setLocked(!0),c.depth.setLocked(!0),c.stencil.setTest(!0),c.stencil.setOp(u.REPLACE,u.REPLACE,u.REPLACE),c.stencil.setFunc(u.ALWAYS,v,4294967295),c.stencil.setClear(s),c.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?a.render(e,null):(a.render(e,t),a.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(p,l)):(e.setRenderTarget(t),e.render(p,l),e.setRenderTarget(r),e.render(p,l)),c.color.setLocked(!1),c.depth.setLocked(!1),c.stencil.setLocked(!1),c.stencil.setFunc(u.EQUAL,1,4294967295),c.stencil.setOp(u.KEEP,u.KEEP,u.KEEP),c.stencil.setLocked(!0)}},Ni=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:n}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,n,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Oi,this.depthTexture=null,this.passes=[],this.timer=new Ci,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new V),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===me&&e.outputColorSpace===F&&(this.inputBuffer.texture.colorSpace=F,this.outputBuffer.texture.colorSpace=F,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const n of this.passes)n.initialize(e,r,i)}}replaceRenderer(e,t=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new Er;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=wr,e.type=Mr):e.type=Rr,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){const n=this.renderer,u=n===null?new V:n.getDrawingBufferSize(new V),c={minFilter:Le,magFilter:Le,stencilBuffer:t,depthBuffer:e,type:r},p=new le(u.width,u.height,c);return i>0&&(p.ignoreDepthForMultisampleCopy=!1,p.samples=i),r===me&&n!==null&&n.outputColorSpace===F&&(p.texture.colorSpace=F),p.texture.name="EffectComposer.Buffer",p.texture.generateMipmaps=!1,p}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new V),u=i.getContext().getContextAttributes().alpha,c=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(n.width,n.height),e.initialize(i,u,c),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const p=this.createDepthTexture();for(e of r)e.setDepthTexture(p)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const u=(p,l)=>p||l.needsDepthTexture;t.reduce(u,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let i=this.inputBuffer,n=this.outputBuffer,u=!1,c,p,l;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const a of this.passes)a.enabled&&(a.render(t,i,n,e,u),a.needsSwap&&(u&&(r.renderToScreen=a.renderToScreen,c=t.getContext(),p=t.state.buffers.stencil,p.setFunc(c.NOTEQUAL,1,4294967295),r.render(t,i,n,e,u),p.setFunc(c.EQUAL,1,4294967295)),l=i,i=n,n=l),a instanceof Li?u=!0:a instanceof Di&&(u=!1))}setSize(e,t,r){const i=this.renderer,n=i.getSize(new V);(e===void 0||t===void 0)&&(e=n.width,t=n.height),(n.width!==e||n.height!==t)&&i.setSize(e,t,r);const u=i.getDrawingBufferSize(new V);this.inputBuffer.setSize(u.width,u.height),this.outputBuffer.setSize(u.width,u.height);for(const c of this.passes)c.setSize(u.width,u.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Z.fullscreenGeometry.dispose()}},pe={NONE:0,DEPTH:1,CONVOLUTION:2},A={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Hi=class{constructor(){this.shaderParts=new Map([[A.FRAGMENT_HEAD,null],[A.FRAGMENT_MAIN_UV,null],[A.FRAGMENT_MAIN_IMAGE,null],[A.VERTEX_HEAD,null],[A.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=pe.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=zt}},Ye=!1,Bt=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case De:r=this.materialsFlatShadedDoubleSide;break;case Pe:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case De:r=this.materialsDoubleSide;break;case Pe:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof Se))return e.clone();const t=e.uniforms,r=new Map;for(const n in t){const u=t[n].value;u.isRenderTargetTexture&&(t[n].value=null,r.set(n,u))}const i=e.clone();for(const n of r)t[n[0]].value=n[1],i.uniforms[n[0]].value=n[1];return i}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Ar;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.side=Pe,i}),this.materialsDoubleSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.side=De,i}),this.materialsFlatShaded=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Pe,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{const i=this.cloneMaterial(r);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=De,i})}}render(e,t,r){const i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Ye){const n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(const u of n)u[0].material=u[1];this.meshCount!==n.size&&n.clear()}else{const n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ye}static set workaroundEnabled(e){Ye=e}},ie=-1,J=class extends ut{constructor(e,t=ie,r=ie,i=1){super(),this.resizable=e,this.baseSize=new V(1,1),this.preferredSize=new V(t,r),this.target=this.preferredSize,this.s=i,this.effectiveSize=new V,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,r=this.effectiveSize,i=this.scale;t.width!==ie?r.width=t.width:t.height!==ie?r.width=Math.round(t.height*(e.width/Math.max(e.height,1))):r.width=Math.round(e.width*i),t.height!==ie?r.height=t.height:t.width!==ie?r.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r.height=Math.round(e.height*i)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(ie),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ie}},R={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Fi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Gi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",ki="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Vi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",$i="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",ji="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Wi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Ki="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Qi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Xi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Yi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Zi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Ji="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",qi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",es="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",ts="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",rs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",is="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",ss="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",ns="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",as="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",os="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",ls="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",us="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",cs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",hs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",fs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",ds="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",vs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",ps="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",ms="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",gs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",xs=new Map([[R.ADD,Fi],[R.ALPHA,Gi],[R.AVERAGE,ki],[R.COLOR,Vi],[R.COLOR_BURN,$i],[R.COLOR_DODGE,ji],[R.DARKEN,Wi],[R.DIFFERENCE,Ki],[R.DIVIDE,Qi],[R.DST,null],[R.EXCLUSION,Xi],[R.HARD_LIGHT,Yi],[R.HARD_MIX,Zi],[R.HUE,Ji],[R.INVERT,qi],[R.INVERT_RGB,es],[R.LIGHTEN,ts],[R.LINEAR_BURN,rs],[R.LINEAR_DODGE,is],[R.LINEAR_LIGHT,ss],[R.LUMINOSITY,ns],[R.MULTIPLY,as],[R.NEGATION,os],[R.NORMAL,ls],[R.OVERLAY,us],[R.PIN_LIGHT,cs],[R.REFLECT,hs],[R.SATURATION,fs],[R.SCREEN,ds],[R.SOFT_LIGHT,vs],[R.SRC,ps],[R.SUBTRACT,ms],[R.VIVID_LIGHT,gs]]),_s=class extends ut{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new C(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return xs.get(this.blendFunction)}},$e={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Ss=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Ts="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ys=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Es=class extends Se{constructor(e=new St){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new C(null),texelSize:new C(new St),scale:new C(1),kernel:new C(0)},blending:we,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ss,vertexShader:Ts}),this.setTexelSize(e.x,e.y),this.kernelSize=$e.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return ys[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const r=1/e,i=1/t;this.uniforms.texelSize.value.set(r,i,r*.5,i*.5)}},ws=class extends Z{constructor({kernelSize:e=$e.MEDIUM,resolutionScale:t=.5,width:r=J.AUTO_SIZE,height:i=J.AUTO_SIZE,resolutionX:n=r,resolutionY:u=i}={}){super("KawaseBlurPass"),this.renderTargetA=new le(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const c=this.resolution=new J(this,n,u,t);c.addEventListener("change",p=>this.setSize(c.baseWidth,c.baseHeight)),this._blurMaterial=new Es,this._blurMaterial.kernelSize=e,this.copyMaterial=new Qt}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){const u=this.scene,c=this.camera,p=this.renderTargetA,l=this.renderTargetB,a=this.blurMaterial,v=a.kernelSequence;let s=t;this.fullscreenMaterial=a;for(let o=0,d=v.length;o<d;++o){const h=o&1?l:p;a.kernel=v[o],a.inputBuffer=s.texture,e.setRenderTarget(h),e.render(u,c),s=h}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=s.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(u,c)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t);const i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.blurMaterial.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==me?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===F&&(this.renderTargetA.texture.colorSpace=F,this.renderTargetB.texture.colorSpace=F))}static get AUTO_SIZE(){return J.AUTO_SIZE}},Ms=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Rs=class extends Se{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Pt.replace(/\D+/g,"")},uniforms:{inputBuffer:new C(null),threshold:new C(0),smoothing:new C(1),range:new C(null)},blending:we,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ms,vertexShader:Kt}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},bs=class extends Z{constructor({renderTarget:e,luminanceRange:t,colorOutput:r,resolutionScale:i=1,width:n=J.AUTO_SIZE,height:u=J.AUTO_SIZE,resolutionX:c=n,resolutionY:p=u}={}){super("LuminancePass"),this.fullscreenMaterial=new Rs(r,t),this.needsSwap=!1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new J(this,c,p,i);l.addEventListener("change",a=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,n){const u=this.fullscreenMaterial;u.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==me&&(this.renderTarget.texture.type=r,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Bs=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,As="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Us=class extends Se{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new C(null),texelSize:new C(new V)},blending:we,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Bs,vertexShader:As})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},zs=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Cs="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Ps=class extends Se{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new C(null),supportBuffer:new C(null),texelSize:new C(new V),radius:new C(.85)},blending:we,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:zs,vertexShader:Cs})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Ds=class extends Z{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Us,this.upsamplingMaterial=new Ps,this.resolution=new V}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let r=0;r<e;++r){const i=t.clone();i.texture.name="Downsampling.Mipmap"+r,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(t);for(let r=1,i=e-1;r<i;++r){const n=t.clone();n.texture.name="Upsampling.Mipmap"+r,this.upsamplingMipmaps.push(n)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,r,i,n){const{scene:u,camera:c}=this,{downsamplingMaterial:p,upsamplingMaterial:l}=this,{downsamplingMipmaps:a,upsamplingMipmaps:v}=this;let s=t;this.fullscreenMaterial=p;for(let o=0,d=a.length;o<d;++o){const h=a[o];p.setSize(s.width,s.height),p.inputBuffer=s.texture,e.setRenderTarget(h),e.render(u,c),s=h}this.fullscreenMaterial=l;for(let o=v.length-1;o>=0;--o){const d=v[o];l.setSize(s.width,s.height),l.inputBuffer=s.texture,l.supportBuffer=a[o].texture,e.setRenderTarget(d),e.render(u,c),s=d}}setSize(e,t){const r=this.resolution;r.set(e,t);let i=r.width,n=r.height;for(let u=0,c=this.downsamplingMipmaps.length;u<c;++u)i=Math.round(i*.5),n=Math.round(n*.5),this.downsamplingMipmaps[u].setSize(i,n),u<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[u].setSize(i,n)}initialize(e,t,r){if(r!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const n of i)n.texture.type=r;if(r!==me)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e!==null&&e.outputColorSpace===F)for(const n of i)n.texture.colorSpace=F}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},Is=class extends ut{constructor(e,t,{attributes:r=pe.NONE,blendFunction:i=R.NORMAL,defines:n=new Map,uniforms:u=new Map,extensions:c=null,vertexShader:p=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=p,this.defines=n,this.uniforms=u,this.extensions=c,this.blendMode=new _s(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=zt,this._outputColorSpace=Ct}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Ge){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof le||t instanceof Dt||t instanceof It||t instanceof Z)&&this[e].dispose()}}},Os=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,Ls=class extends Is{constructor({blendFunction:e=R.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,mipmapBlur:i=!1,intensity:n=1,radius:u=.85,levels:c=8,kernelSize:p=$e.LARGE,resolutionScale:l=.5,width:a=J.AUTO_SIZE,height:v=J.AUTO_SIZE,resolutionX:s=a,resolutionY:o=v}={}){super("BloomEffect",Os,{blendFunction:e,uniforms:new Map([["map",new C(null)],["intensity",new C(n)]])}),this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new ws({kernelSize:p}),this.luminancePass=new bs({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r,this.mipmapBlurPass=new Ds,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=u,this.mipmapBlurPass.levels=c,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const d=this.resolution=new J(this,s,o,l);d.addEventListener("change",h=>this.setSize(d.baseWidth,d.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){const i=this.renderTarget,n=this.luminancePass;n.enabled?(n.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,n.renderTarget):this.blurPass.render(e,n.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,i)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.blurPass.resolution.copy(r),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,r){this.blurPass.initialize(e,t,r),this.luminancePass.initialize(e,t,r),this.mipmapBlurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e!==null&&e.outputColorSpace===F&&(this.renderTarget.texture.colorSpace=F))}},Ns=class extends Z{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new Xt,this.overrideMaterialManager=r===null?null:new Bt(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new Bt(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){const u=this.scene,c=this.camera,p=this.selection,l=c.layers.mask,a=u.background,v=e.shadowMap.autoUpdate,s=this.renderToScreen?null:t;p!==null&&c.layers.set(p.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(u.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(s),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,u,c):e.render(u,c),c.layers.mask=l,u.background=a,e.shadowMap.autoUpdate=v}},Hs=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Fs="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Gs=class extends Se{constructor(e,t,r,i,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Pt.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new V),texelSize:new C(new V),cameraNear:new C(.3),cameraFar:new C(1e3),aspect:new C(1),time:new C(0)},blending:we,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:n}),e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.copyCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Ge){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=Hs.replace(A.FRAGMENT_HEAD,e.get(A.FRAGMENT_HEAD)||"").replace(A.FRAGMENT_MAIN_UV,e.get(A.FRAGMENT_MAIN_UV)||"").replace(A.FRAGMENT_MAIN_IMAGE,e.get(A.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Fs.replace(A.VERTEX_HEAD,e.get(A.VERTEX_HEAD)||"").replace(A.VERTEX_MAIN_SUPPORT,e.get(A.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ur?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return A}};function At(e,t,r){for(const i of t){const n="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),u=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const c of r.entries())c[1]!==null&&r.set(c[0],c[1].replace(u,n))}}function ks(e,t,r){let i=t.getFragmentShader(),n=t.getVertexShader();const u=i!==void 0&&/mainImage/.test(i),c=i!==void 0&&/mainUv/.test(i);if(r.attributes|=t.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(c&&r.attributes&pe.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!u&&!c)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const p=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=r.shaderParts;let a=l.get(A.FRAGMENT_HEAD)||"",v=l.get(A.FRAGMENT_MAIN_UV)||"",s=l.get(A.FRAGMENT_MAIN_IMAGE)||"",o=l.get(A.VERTEX_HEAD)||"",d=l.get(A.VERTEX_MAIN_SUPPORT)||"";const h=new Set,f=new Set;if(c&&(v+=`	${e}MainUv(UV);
`,r.uvTransformation=!0),n!==null&&/mainSupport/.test(n)){const g=/mainSupport *\([\w\s]*?uv\s*?\)/.test(n);d+=`	${e}MainSupport(`,d+=g?`vUv);
`:`);
`;for(const _ of n.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const m of _[1].split(/\s*,\s*/))r.varyings.add(m),h.add(m),f.add(m);for(const _ of n.matchAll(p))f.add(_[1])}for(const g of i.matchAll(p))f.add(g[1]);for(const g of t.defines.keys())f.add(g.replace(/\([\w\s,]*\)/g,""));for(const g of t.uniforms.keys())f.add(g);f.delete("while"),f.delete("for"),f.delete("if"),t.uniforms.forEach((g,_)=>r.uniforms.set(e+_.charAt(0).toUpperCase()+_.slice(1),g)),t.defines.forEach((g,_)=>r.defines.set(e+_.charAt(0).toUpperCase()+_.slice(1),g));const S=new Map([["fragment",i],["vertex",n]]);At(e,f,r.defines),At(e,f,S),i=S.get("fragment"),n=S.get("vertex");const E=t.blendMode;if(r.blendModes.set(E.blendFunction,E),u){t.inputColorSpace!==null&&t.inputColorSpace!==r.colorSpace&&(s+=t.inputColorSpace===F?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==Ct?r.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(r.colorSpace=t.inputColorSpace);const g=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;s+=`${e}MainImage(color0, UV, `,r.attributes&pe.DEPTH&&g.test(i)&&(s+="depth, ",r.readDepth=!0),s+=`color1);
	`;const _=e+"BlendOpacity";r.uniforms.set(_,E.opacity),s+=`color0 = blend${E.blendFunction}(color0, color1, ${_});

	`,a+=`uniform float ${_};

`}if(a+=i+`
`,n!==null&&(o+=n+`
`),l.set(A.FRAGMENT_HEAD,a),l.set(A.FRAGMENT_MAIN_UV,v),l.set(A.FRAGMENT_MAIN_IMAGE,s),l.set(A.VERTEX_HEAD,o),l.set(A.VERTEX_MAIN_SUPPORT,d),t.extensions!==null)for(const g of t.extensions)r.extensions.add(g)}}var Vs=class extends Z{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Gs(null,null,null,e),this.listener=r=>this.handleEvent(r),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,r)=>r.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new Hi;let t=0;for(const c of this.effects)if(c.blendMode.blendFunction===R.DST)e.attributes|=c.getAttributes()&pe.DEPTH;else{if(e.attributes&c.getAttributes()&pe.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${c.name})`);ks("e"+t++,c,e)}let r=e.shaderParts.get(A.FRAGMENT_HEAD),i=e.shaderParts.get(A.FRAGMENT_MAIN_IMAGE),n=e.shaderParts.get(A.FRAGMENT_MAIN_UV);const u=/\bblend\b/g;for(const c of e.blendModes.values())r+=c.getShaderCode().replace(u,`blend${c.blendFunction}`)+`
`;e.attributes&pe.DEPTH?(e.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===F&&(i+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(n=`vec2 transformedUv = vUv;
`+n,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(A.FRAGMENT_HEAD,r),e.shaderParts.set(A.FRAGMENT_MAIN_IMAGE,i),e.shaderParts.set(A.FRAGMENT_MAIN_UV,n);for(const[c,p]of e.shaderParts)p!==null&&e.shaderParts.set(c,p.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Ge){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,n){for(const u of this.effects)u.update(e,t,i);if(!this.skipRendering||this.renderToScreen){const u=this.fullscreenMaterial;u.inputBuffer=t.texture,u.time+=i*this.timeScale,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(const i of this.effects)i.initialize(e,t,r);this.updateMaterial(),r!==void 0&&r!==me&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}};function $s(e,t){Q(t,!0);const r=Lr(),i=()=>Tt(p,"$camera",r),n=()=>Tt(l,"$size",r),{scene:u,renderer:c,camera:p,size:l,autoRender:a,renderStage:v}=Pr(),s=new Ni(c);k(()=>{s.removeAllPasses(),s.addPass(new Ns(u,i())),s.addPass(new Vs(i(),new Ls({intensity:.8,luminanceThreshold:.15,height:1024,width:1024,luminanceSmoothing:.5,mipmapBlur:!0,kernelSize:$e.MEDIUM})))}),k(()=>{const o=n().width*window.devicePixelRatio,d=n().height*window.devicePixelRatio;s.setSize(o,d)}),k(()=>{const o=a.current;return a.set(!1),()=>a.set(o)}),Dr(o=>{s.render(o)},{stage:v,autoInvalidate:!1}),X()}var js=L("<!> <!>",1);function Ws(e,t){Q(t,!0);var r=js(),i=G(r);$s(i,{});var n=H(i,2);Fe(n,()=>t.children),U(e,r),X()}const Ks=(e,t)=>{const r=e.getTime()-Date.now();if(r>0){const i=setTimeout(t,r);return()=>clearTimeout(i)}else return console.error("Target time is in the past. Check system clock."),()=>{}},Qs=(e=1)=>{const t=new Date().getFullYear()+1,r=new Date(t,0,1,0,0,0);return new Date(r.getTime()-6e4*e)},Xs=e=>{const t=Math.floor(e/1e3),r=Math.floor(t/60).toString(),i=(t%60).toString().padStart(2,"0");return`${r}:${i}`};var Ys=L('<div class="z-1 pointer-events-none absolute grid h-full w-full place-content-center text-8xl text-white svelte-xkzlrh"><div class="flex gap-2 svelte-xkzlrh">🫲 <div class="w-48 svelte-xkzlrh"> </div> 🫱</div></div>'),Zs=L('<div class="emoji absolute svelte-xkzlrh"> </div>'),Js=L('<div class="z-1 pointer-events-none absolute h-full w-full place-content-center text-8xl text-white svelte-xkzlrh"></div>');function qs(e,t){Q(t,!0);const r=["👺","😱","🤩","🥳","😘","🤌","👏","🫶","💥","🍾","🎺","🎻","🎉","🎊","🪩","🙂‍↕️","🤝","🤙","🫂","🤸","💸","📈","🎈","🧘‍♀️","🏄‍♂️","🫵"];let i=K([]),n=-1,u=j("idle"),c=j(""),p=j(!1);const l=()=>{const S=new Date().getTime(),E=n-S;O(c,K(Xs(E))),S<=n?requestAnimationFrame(l):O(u,"celebrating")},a=()=>{O(u,"counting"),requestAnimationFrame(l)},v=()=>{const f={emoji:r.at((Math.random()*r.length|0)-1)??"",x:Math.random()*100,y:Math.random()*100};i.push(f),i.length>50&&i.shift()};k(()=>{const f=Qs(10);return n=f.getTime(),Ks(f,a)}),k(()=>{if(T(u)==="celebrating"){setInterval(v,500);const f=1e3*60*3;setTimeout(()=>{O(p,!0),setTimeout(()=>{O(u,"idle")},f)},f)}});var s=Y(),o=G(s);{var d=f=>{var S=Ys(),E=I(S),g=H(I(E)),_=I(g,!0);D(g),ur(),D(E),D(S),ve(()=>Re(_,T(c))),U(f,S)},h=f=>{var S=Y(),E=G(S);{var g=_=>{var m=Js();Nt(m,21,()=>i,kr,(x,w)=>{let z=()=>T(w).emoji,B=()=>T(w).x,M=()=>T(w).y;var y=Zs(),W=I(y,!0);D(y),ve(()=>{qe(y,"style",`left: ${B()??""}%; top: ${M()??""}%`),Re(W,z())}),U(x,y)}),D(m),ve(()=>jr(m,"fading",T(p))),U(_,m)};$(E,_=>{T(u)==="celebrating"&&_(g)},!0)}U(f,S)};$(o,f=>{T(u)==="counting"?f(d):f(h,!1)})}U(e,s),X()}let Yt=null;class Zt{}Zt.render=function(e,t){Yt(e,t)};self.QrCreator=Zt;(function(e){function t(p,l,a,v){var s={},o=e(a,l);o.u(p),o.J(),v=v||0;var d=o.h(),h=o.h()+2*v;return s.text=p,s.level=l,s.version=a,s.O=h,s.a=function(f,S){return f-=v,S-=v,0>f||f>=d||0>S||S>=d?!1:o.a(f,S)},s}function r(p,l,a,v,s,o,d,h,f,S){function E(g,_,m,x,w,z,B){g?(p.lineTo(_+z,m+B),p.arcTo(_,m,x,w,o)):p.lineTo(_,m)}d?p.moveTo(l+o,a):p.moveTo(l,a),E(h,v,a,v,s,-o,0),E(f,v,s,l,s,0,-o),E(S,l,s,l,a,o,0),E(d,l,a,v,a,0,o)}function i(p,l,a,v,s,o,d,h,f,S){function E(g,_,m,x){p.moveTo(g+m,_),p.lineTo(g,_),p.lineTo(g,_+x),p.arcTo(g,_,g+m,_,o)}d&&E(l,a,o,o),h&&E(v,a,-o,o),f&&E(v,s,-o,-o),S&&E(l,s,o,-o)}function n(p,l){var a=l.fill;if(typeof a=="string")p.fillStyle=a;else{var v=a.type,s=a.colorStops;if(a=a.position.map(d=>Math.round(d*l.size)),v==="linear-gradient")var o=p.createLinearGradient.apply(p,a);else if(v==="radial-gradient")o=p.createRadialGradient.apply(p,a);else throw Error("Unsupported fill");s.forEach(([d,h])=>{o.addColorStop(d,h)}),p.fillStyle=o}}function u(p,l){e:{var a=l.text,v=l.v,s=l.N,o=l.K,d=l.P;for(s=Math.max(1,s||1),o=Math.min(40,o||40);s<=o;s+=1)try{var h=t(a,v,s,d);break e}catch{}h=void 0}if(!h)return null;for(a=p.getContext("2d"),l.background&&(a.fillStyle=l.background,a.fillRect(l.left,l.top,l.size,l.size)),v=h.O,o=l.size/v,a.beginPath(),d=0;d<v;d+=1)for(s=0;s<v;s+=1){var f=a,S=l.left+s*o,E=l.top+d*o,g=d,_=s,m=h.a,x=S+o,w=E+o,z=g-1,B=g+1,M=_-1,y=_+1,W=Math.floor(Math.min(.5,Math.max(0,l.R))*o),q=m(g,_),ue=m(z,M),ze=m(z,_);z=m(z,y);var Ce=m(g,y);y=m(B,y),_=m(B,_),B=m(B,M),g=m(g,M),S=Math.round(S),E=Math.round(E),x=Math.round(x),w=Math.round(w),q?r(f,S,E,x,w,W,!ze&&!g,!ze&&!Ce,!_&&!Ce,!_&&!g):i(f,S,E,x,w,W,ze&&g&&ue,ze&&Ce&&z,_&&Ce&&y,_&&g&&B)}return n(a,l),a.fill(),p}var c={minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:.5,quiet:0};Yt=function(p,l){var a={};Object.assign(a,c,p),a.N=a.minVersion,a.K=a.maxVersion,a.v=a.ecLevel,a.left=a.left,a.top=a.top,a.size=a.size,a.fill=a.fill,a.background=a.background,a.text=a.text,a.R=a.radius,a.P=a.quiet,l instanceof HTMLCanvasElement?((l.width!==a.size||l.height!==a.size)&&(l.width=a.size,l.height=a.size),l.getContext("2d").clearRect(0,0,l.width,l.height),u(l,a)):(p=document.createElement("canvas"),p.width=a.size,p.height=a.size,a=u(p,a),l.appendChild(a))}})(function(){function e(l){var a=r.s(l);return{S:function(){return 4},b:function(){return a.length},write:function(v){for(var s=0;s<a.length;s+=1)v.put(a[s],8)}}}function t(){var l=[],a=0,v={B:function(){return l},c:function(s){return(l[Math.floor(s/8)]>>>7-s%8&1)==1},put:function(s,o){for(var d=0;d<o;d+=1)v.m((s>>>o-d-1&1)==1)},f:function(){return a},m:function(s){var o=Math.floor(a/8);l.length<=o&&l.push(0),s&&(l[o]|=128>>>a%8),a+=1}};return v}function r(l,a){function v(g,_){for(var m=-1;7>=m;m+=1)if(!(-1>=g+m||h<=g+m))for(var x=-1;7>=x;x+=1)-1>=_+x||h<=_+x||(d[g+m][_+x]=0<=m&&6>=m&&(x==0||x==6)||0<=x&&6>=x&&(m==0||m==6)||2<=m&&4>=m&&2<=x&&4>=x)}function s(g,_){for(var m=h=4*l+17,x=Array(m),w=0;w<m;w+=1){x[w]=Array(m);for(var z=0;z<m;z+=1)x[w][z]=null}for(d=x,v(0,0),v(h-7,0),v(0,h-7),m=u.G(l),x=0;x<m.length;x+=1)for(w=0;w<m.length;w+=1){z=m[x];var B=m[w];if(d[z][B]==null)for(var M=-2;2>=M;M+=1)for(var y=-2;2>=y;y+=1)d[z+M][B+y]=M==-2||M==2||y==-2||y==2||M==0&&y==0}for(m=8;m<h-8;m+=1)d[m][6]==null&&(d[m][6]=m%2==0);for(m=8;m<h-8;m+=1)d[6][m]==null&&(d[6][m]=m%2==0);for(m=u.w(o<<3|_),x=0;15>x;x+=1)w=!g&&(m>>x&1)==1,d[6>x?x:8>x?x+1:h-15+x][8]=w,d[8][8>x?h-x-1:9>x?15-x:14-x]=w;if(d[h-8][8]=!g,7<=l){for(m=u.A(l),x=0;18>x;x+=1)w=!g&&(m>>x&1)==1,d[Math.floor(x/3)][x%3+h-8-3]=w;for(x=0;18>x;x+=1)w=!g&&(m>>x&1)==1,d[x%3+h-8-3][Math.floor(x/3)]=w}if(f==null){for(g=p.I(l,o),m=t(),x=0;x<S.length;x+=1)w=S[x],m.put(4,4),m.put(w.b(),u.f(4,l)),w.write(m);for(x=w=0;x<g.length;x+=1)w+=g[x].j;if(m.f()>8*w)throw Error("code length overflow. ("+m.f()+">"+8*w+")");for(m.f()+4<=8*w&&m.put(0,4);m.f()%8!=0;)m.m(!1);for(;!(m.f()>=8*w)&&(m.put(236,8),!(m.f()>=8*w));)m.put(17,8);var W=0;for(w=x=0,z=Array(g.length),B=Array(g.length),M=0;M<g.length;M+=1){var q=g[M].j,ue=g[M].o-q;for(x=Math.max(x,q),w=Math.max(w,ue),z[M]=Array(q),y=0;y<z[M].length;y+=1)z[M][y]=255&m.B()[y+W];for(W+=q,y=u.C(ue),q=i(z[M],y.b()-1).l(y),B[M]=Array(y.b()-1),y=0;y<B[M].length;y+=1)ue=y+q.b()-B[M].length,B[M][y]=0<=ue?q.c(ue):0}for(y=m=0;y<g.length;y+=1)m+=g[y].o;for(m=Array(m),y=W=0;y<x;y+=1)for(M=0;M<g.length;M+=1)y<z[M].length&&(m[W]=z[M][y],W+=1);for(y=0;y<w;y+=1)for(M=0;M<g.length;M+=1)y<B[M].length&&(m[W]=B[M][y],W+=1);f=m}for(g=f,m=-1,x=h-1,w=7,z=0,_=u.F(_),B=h-1;0<B;B-=2)for(B==6&&--B;;){for(M=0;2>M;M+=1)d[x][B-M]==null&&(y=!1,z<g.length&&(y=(g[z]>>>w&1)==1),_(x,B-M)&&(y=!y),d[x][B-M]=y,--w,w==-1&&(z+=1,w=7));if(x+=m,0>x||h<=x){x-=m,m=-m;break}}}var o=n[a],d=null,h=0,f=null,S=[],E={u:function(g){g=e(g),S.push(g),f=null},a:function(g,_){if(0>g||h<=g||0>_||h<=_)throw Error(g+","+_);return d[g][_]},h:function(){return h},J:function(){for(var g=0,_=0,m=0;8>m;m+=1){s(!0,m);var x=u.D(E);(m==0||g>x)&&(g=x,_=m)}s(!1,_)}};return E}function i(l,a){if(typeof l.length>"u")throw Error(l.length+"/"+a);var v=function(){for(var o=0;o<l.length&&l[o]==0;)o+=1;for(var d=Array(l.length-o+a),h=0;h<l.length-o;h+=1)d[h]=l[h+o];return d}(),s={c:function(o){return v[o]},b:function(){return v.length},multiply:function(o){for(var d=Array(s.b()+o.b()-1),h=0;h<s.b();h+=1)for(var f=0;f<o.b();f+=1)d[h+f]^=c.i(c.g(s.c(h))+c.g(o.c(f)));return i(d,0)},l:function(o){if(0>s.b()-o.b())return s;for(var d=c.g(s.c(0))-c.g(o.c(0)),h=Array(s.b()),f=0;f<s.b();f+=1)h[f]=s.c(f);for(f=0;f<o.b();f+=1)h[f]^=c.i(c.g(o.c(f))+d);return i(h,0).l(o)}};return s}r.s=function(l){for(var a=[],v=0;v<l.length;v++){var s=l.charCodeAt(v);128>s?a.push(s):2048>s?a.push(192|s>>6,128|s&63):55296>s||57344<=s?a.push(224|s>>12,128|s>>6&63,128|s&63):(v++,s=65536+((s&1023)<<10|l.charCodeAt(v)&1023),a.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63))}return a};var n={L:1,M:0,Q:3,H:2},u=function(){function l(s){for(var o=0;s!=0;)o+=1,s>>>=1;return o}var a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],v={w:function(s){for(var o=s<<10;0<=l(o)-l(1335);)o^=1335<<l(o)-l(1335);return(s<<10|o)^21522},A:function(s){for(var o=s<<12;0<=l(o)-l(7973);)o^=7973<<l(o)-l(7973);return s<<12|o},G:function(s){return a[s-1]},F:function(s){switch(s){case 0:return function(o,d){return(o+d)%2==0};case 1:return function(o){return o%2==0};case 2:return function(o,d){return d%3==0};case 3:return function(o,d){return(o+d)%3==0};case 4:return function(o,d){return(Math.floor(o/2)+Math.floor(d/3))%2==0};case 5:return function(o,d){return o*d%2+o*d%3==0};case 6:return function(o,d){return(o*d%2+o*d%3)%2==0};case 7:return function(o,d){return(o*d%3+(o+d)%2)%2==0};default:throw Error("bad maskPattern:"+s)}},C:function(s){for(var o=i([1],0),d=0;d<s;d+=1)o=o.multiply(i([1,c.i(d)],0));return o},f:function(s,o){if(s!=4||1>o||40<o)throw Error("mode: "+s+"; type: "+o);return 10>o?8:16},D:function(s){for(var o=s.h(),d=0,h=0;h<o;h+=1)for(var f=0;f<o;f+=1){for(var S=0,E=s.a(h,f),g=-1;1>=g;g+=1)if(!(0>h+g||o<=h+g))for(var _=-1;1>=_;_+=1)0>f+_||o<=f+_||(g!=0||_!=0)&&E==s.a(h+g,f+_)&&(S+=1);5<S&&(d+=3+S-5)}for(h=0;h<o-1;h+=1)for(f=0;f<o-1;f+=1)S=0,s.a(h,f)&&(S+=1),s.a(h+1,f)&&(S+=1),s.a(h,f+1)&&(S+=1),s.a(h+1,f+1)&&(S+=1),(S==0||S==4)&&(d+=3);for(h=0;h<o;h+=1)for(f=0;f<o-6;f+=1)s.a(h,f)&&!s.a(h,f+1)&&s.a(h,f+2)&&s.a(h,f+3)&&s.a(h,f+4)&&!s.a(h,f+5)&&s.a(h,f+6)&&(d+=40);for(f=0;f<o;f+=1)for(h=0;h<o-6;h+=1)s.a(h,f)&&!s.a(h+1,f)&&s.a(h+2,f)&&s.a(h+3,f)&&s.a(h+4,f)&&!s.a(h+5,f)&&s.a(h+6,f)&&(d+=40);for(f=S=0;f<o;f+=1)for(h=0;h<o;h+=1)s.a(h,f)&&(S+=1);return d+=Math.abs(100*S/o/o-50)/5*10}};return v}(),c=function(){for(var l=Array(256),a=Array(256),v=0;8>v;v+=1)l[v]=1<<v;for(v=8;256>v;v+=1)l[v]=l[v-4]^l[v-5]^l[v-6]^l[v-8];for(v=0;255>v;v+=1)a[l[v]]=v;return{g:function(s){if(1>s)throw Error("glog("+s+")");return a[s]},i:function(s){for(;0>s;)s+=255;for(;256<=s;)s-=255;return l[s]}}}(),p=function(){function l(s,o){switch(o){case n.L:return a[4*(s-1)];case n.M:return a[4*(s-1)+1];case n.Q:return a[4*(s-1)+2];case n.H:return a[4*(s-1)+3]}}var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],v={I:function(s,o){var d=l(s,o);if(typeof d>"u")throw Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+o);s=d.length/3,o=[];for(var h=0;h<s;h+=1)for(var f=d[3*h],S=d[3*h+1],E=d[3*h+2],g=0;g<f;g+=1){var _=E,m={};m.o=S,m.j=_,o.push(m)}return o}};return v}();return r}());const en=QrCreator;var tn=L('<div class="z-1 inline-flex w-24 p-4 svelte-x226nl"></div>');function rn(e,t){Q(t,!0);const r=new Ve("show-playlist-qr-code",!1),{track:i}=Vt();let n=j(void 0),u=Oe(()=>{var a,v,s;return(s=(v=(a=i.current)==null?void 0:a.context)==null?void 0:v.external_urls)==null?void 0:s.spotify});k(()=>{T(n)&&T(u)&&en.render({text:T(u),radius:0,ecLevel:"H",fill:"#fff",background:null,size:128},T(n))}),xe(ge.QRCode,()=>r.current=!r.current);var c=Y(),p=G(c);{var l=a=>{var v=tn();Je(v,s=>O(n,s),()=>T(n)),U(a,v)};$(p,a=>{r.current&&T(u)&&a(l)})}U(e,c),X()}var sn=L('<div class="costco h-screen svelte-1qo5hw6"><img class="costco absolute left-0 scale-[2.5] opacity-20 svelte-1qo5hw6" src="costco.png" alt=""></div>');function nn(e,t){Q(t,!0);let r=j(!1),i=1e3*20;k(()=>{function p(){const l=Math.random()>0;l?(console.log(l),O(r,!0),setTimeout(()=>{O(r,!1),setTimeout(p,i)},20*1e3)):setTimeout(p,i)}p()});var n=Y(),u=G(n);{var c=p=>{var l=sn();U(p,l)};$(u,p=>{T(r)&&p(c)})}U(e,n),X()}var an=()=>ht("/lines"),on=()=>ht("/about"),ln=L('<div class="absolute left-0 top-0 flex h-screen w-screen flex-col items-center justify-center"><!> <div class="flex gap-2"><button class="flex items-center gap-1 bg-slate-600 px-3 py-1 text-white"><span class="text-xs">get zesty</span> 🤌</button> <button class="flex items-center gap-1 bg-slate-600 px-3 py-1 text-white"><span class="text-xs">what the zest?</span> 🧐</button></div></div>'),un=L("<!> <!> <!> <!> <!> <!>",1),cn=L('<div class="absolute left-0 top-0 h-screen w-screen"><!></div> <!>',1);function hn(e,t){Q(t,!0);const{startAnalyser:r}=Gr();k(()=>{pi(),r()});let i=-1;k(()=>{clearTimeout(i),i=Mt()}),Ot(()=>{clearTimeout(i),i=Mt()});let n=new Ve("costco-mode",!1);xe(ge.CostcoMode,()=>n.current=!n.current),xe(ge.Fullscreen,()=>document.body.requestFullscreen());var u=cn(),c=G(u),p=I(c);ri(p,{children:(s,o)=>{var d=Y(),h=G(d);{var f=S=>{Ws(S,{children:(E,g)=>{var _=Y(),m=G(_);Fe(m,()=>t.children),U(E,_)},$$slots:{default:!0}})};$(h,S=>{S(f,!1)})}U(s,d)},$$slots:{default:!0}}),D(c);var l=H(c,2);{var a=s=>{var o=ln(),d=I(o);Wt(d,{class:"w-1/2"});var h=H(d,2),f=I(h);f.__click=[an];var S=H(f,2);S.__click=[on],D(h),D(o),U(s,o)},v=s=>{var o=un(),d=G(o);Ui(d,{});var h=H(d,2);Ai(h,{});var f=H(h,2);_i(f,{});var S=H(f,2);qs(S,{});var E=H(S,2);rn(E,{});var g=H(E,2);{var _=m=>{nn(m,{})};$(g,m=>{n.current&&m(_)})}U(s,o)};$(l,s=>{Ir.route.id==="/"?s(a):s(v,!1)})}U(e,u),X()}lt(["click"]);const fn=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"}));export{hn as component,Jr as universal};
