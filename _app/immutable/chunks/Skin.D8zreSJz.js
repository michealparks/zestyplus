import{a as v,t as B}from"./disclose-version.hHKxC-Jk.js";import{a0 as H,a2 as x,a1 as A,a3 as M}from"./runtime.BZbTZrfI.js";import{c as _}from"./svelte-component.D2I4hVfC.js";import{c as I,d as W,e as D,V as F,U as T,F as U,f as w,D as V}from"./three.module.iKKkBh6O.js";import{u as j,T as f}from"./T.DXVn7S3O.js";const C=(m,e,d)=>{const o=[];let n=new w;o.push(n),n.position.y=-m;for(let a=0;a<e;a++){const s=new w;s.position.y=d,o.push(s),n.add(s),n=s}return o};var G=B("<!> <!>",1);function K(m,e){H(e,!0);const d=e.segmentHeight*e.segments,o=d*.5,n=C(o,e.segments,e.segmentHeight),a=new I,s=new W(n);a.add(n[0]),a.bind(s);const c=new D(e.radius,e.radius,d,e.radialSegments,e.heightSegments,!0),g=[],l=[],{position:b}=c.attributes,k=new F;for(let t=0,r;t<b.count;t++){k.fromBufferAttribute(b,t);const i=k.y+o,u=Math.floor(i/e.segmentHeight),h=i%e.segmentHeight/e.segmentHeight;g.push(u,u+1,0,0),l.push(1-h,h,0,0)}c.setAttribute("skinIndex",new T(g,4)),c.setAttribute("skinWeight",new U(l,4)),j(()=>{if(e.positions!==void 0)for(let t=0,r=0,i=n.length;t<i;t+=1,r+=3)s.bones[t].position.set(e.positions[r+0],e.positions[r+1],e.positions[r+2]),s.bones[t].rotation.x=.2}),f(m,{is:a,children:(t,r)=>{var i=G(),u=x(i);f(u,{is:c});var h=M(u,2);_(h,()=>f.MeshStandardMaterial,(y,S)=>{S(y,{side:V})}),v(t,i)},$$slots:{default:!0}}),A()}export{K as default};
