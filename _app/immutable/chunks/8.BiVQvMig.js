import"./disclose-version.Bg9kRutz.js";import"./legacy.CtaTdtmd.js";import{p as Q,aP as U,k as a,aQ as f,f as _,a as G,s as n,av as L}from"./index-client.7bxKioEb.js";import{a as g,t as v}from"./template.BCsPwpPZ.js";import{i as V}from"./lifecycle.CKswTbsd.js";import{b as B,c as H}from"./props.gynuqLyB.js";import{i as E,C as F,I as J,u as K,d as o,V as A,a3 as N,Q as R}from"./T.D7KAkooU.js";import"./index.Byt2NWqd.js";import{O as W}from"./Outlines.DjNy7Wou.js";import{a as X}from"./auth.svelte.D43NKd5e.js";import{h as Y}from"./color.D7bleQK4.js";var Z=v("<!> <!>",1),ee=v("<!> <!> <!>",1),te=v("<!> <!> <!> <!> <!>",1);function ae(P,k){Q(k,!1);const C=B(),O=()=>H(T,"$size",C),{size:T}=E(),{frequencyData:w}=X(),c=16,p=1,M=c*p/2,j=new F("red"),i=new A,$=new R,u=new A(1,1,1),d=new N,t=U(new J(void 0,void 0,c*c));let h=0;for(let e=0;e<c;e++)for(let r=0;r<c;r++)i.set(e*p-M,0,r*p-M),d.setPosition(i),a(t).setMatrixAt(h,d),a(t).setColorAt(h,Y(j,e*r/1e4)),h+=1;f(t,a(t).instanceMatrix.needsUpdate=!0),a(t).instanceColor&&f(t,a(t).instanceColor.needsUpdate=!0),K(()=>{for(let e=0,r=w.current.length/2;e<r;e+=1){const s=w.current[e];s&&(a(t).getMatrixAt(e,d),d.decompose(i,$,u),i.y=s/75,u.set(1,i.y*4+1,1),d.compose(i,$,u),a(t).setMatrixAt(e,d))}f(t,a(t).instanceMatrix.needsUpdate=!0)}),V();var b=te(),x=_(b),q=L(()=>O().width/40);o.OrthographicCamera(x,{makeDefault:!0,position:[-28,60,65],get zoom(){return a(q)},oncreate:e=>e.lookAt(0,0,0)});var y=n(x,2);o.AmbientLight(y,{intensity:.5});var S=n(y,2);o.DirectionalLight(S,{castShadow:!0,"shadow.camera.left":-15,"shadow.camera.right":15,"shadow.camera.top":15,"shadow.camera.bottom":-15,"shadow.mapSize.width":2048,"shadow.mapSize.height":2048,intensity:3,position:[10,10,10]});var z=n(S,2);o.Mesh(z,{"rotation.x":-Math.PI/2,"position.y":-.02,receiveShadow:!0,children:(e,r)=>{var s=Z(),l=_(s);o.PlaneGeometry(l,{args:[100,100]});var m=n(l,2);o.MeshStandardMaterial(m,{color:"black"}),g(e,s)},$$slots:{default:!0}});var D=n(z,2);o(D,{get is(){return a(t)},castShadow:!0,receiveShadow:!0,children:(e,r)=>{var s=ee(),l=_(s);o.BoxGeometry(l,{args:[.5,.5,.5]});var m=n(l,2);o.MeshStandardMaterial(m,{});var I=n(m,2);W(I,{color:"black"}),g(e,s)},$$slots:{default:!0}}),g(P,b),G()}const he=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));export{ae as _,he as a};
