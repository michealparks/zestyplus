const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/2.-QGo-h7B.js","../chunks/disclose-version.Bg9kRutz.js","../chunks/legacy.CtaTdtmd.js","../chunks/index.BFqC5wTN.js","../chunks/3.BX4wlDpy.js","../chunks/index-client.jNqP-yUK.js","../chunks/template.dxe18lOp.js","../chunks/each.B5OHJjpm.js","../chunks/svelte-component.D4HszQ7S.js","../chunks/props.6OPtkU23.js","../chunks/T.Hd49IpQl.js","../chunks/index.DevEpOn0.js","../assets/T.C-GW8brK.css","../chunks/index.bsilHA1h.js","../chunks/Outlines.CfveWWvf.js","../chunks/BufferGeometryUtils.BJ-jO-XW.js","../chunks/revision.BTTjRbkq.js","../chunks/auth.svelte.Ddb2Zpbv.js","../chunks/color.D7bleQK4.js","../chunks/4.BvBRVNh1.js","../chunks/if.D7726KUx.js","../chunks/cache.DUKstImg.js","../chunks/OrbitControls.IEQpOwPq.js","../chunks/useControlsContext.Bz5rcaB8.js","../chunks/user.D2dC0DNH.js","../chunks/World.CTeB4blo.js","../chunks/createCollidersFromChildren.xpEde08U.js","../chunks/Collider.BireoknS.js","../chunks/5.BSVzMCsI.js","../chunks/RoundedBoxGeometry.GAmyC0S2.js","../chunks/6.CKb2Jc6u.js","../chunks/lifecycle.B_v46vf2.js","../chunks/Line2.ZK0eYHRu.js","../chunks/7.0LDNl7Th.js","../chunks/8.ZpK03Fgn.js","../chunks/MarchingCubes.Dv0qwN_u.js","../chunks/MarchingCube.Bf2XlcGE.js","../chunks/MarchingPlane.DzyTH_4j.js","../chunks/types.DYldHCp5.js","../chunks/9.B9TxDQ_3.js","../chunks/10.BUrQZGAE.js","../chunks/11.Dq1MJQSK.js","../chunks/useEnvironment.svelte.DMTbIc-X.js","../chunks/12.DudUXsI8.js","../chunks/Ribbon.D17OEv_x.js","../chunks/13.CYg8j5xw.js","../chunks/Lightformer.B6bk1LY6.js","../chunks/this.6e5kai16.js","../chunks/14.CyD4VtLQ.js","../chunks/15.67KgbCAU.js","../chunks/Rope.CKSVACyw.js","../chunks/Skin.UIL6OG1Y.js"])))=>i.map(i=>d[i]);
var ot=e=>{throw TypeError(e)};var Ve=(e,t,r)=>t.has(e)||ot("Cannot "+r);var z=(e,t,r)=>(Ve(e,t,"read from private field"),r?r.call(e):t.get(e)),F=(e,t,r)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),J=(e,t,r,s)=>(Ve(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),te=(e,t,r)=>(Ve(e,t,"access private method"),r);var $e=(e,t,r,s)=>({set _(o){J(e,t,o,r)},get _(){return z(e,t,s)}});import"../chunks/disclose-version.Bg9kRutz.js";import{q as Et,w as st,aK as Ke,ah as Kt,aL as Qt,E as Xt,aM as Yt,aN as Zt,n as Jt,e as qt,M as lt,an as er,a2 as se,aO as tr,ax as ut,ar as ct,Y as rr,p as W,f as H,a as j,i as R,a6 as X,c as D,r as I,a5 as k,b as ee,aP as Se,aJ as sr,aa as ir,aQ as nr,s as L,t as he,aR as ar,av as Qe,aS as or,k as lr}from"../chunks/index-client.jNqP-yUK.js";import{i as ur,c as cr,d as Le,n as fr,a as hr,b as dr,e as ye,o as vr,s as Me,r as pr}from"../chunks/render.DfO9S-mS.js";import{c as Y,a as U,t as O,d as mr}from"../chunks/template.dxe18lOp.js";import{i as $}from"../chunks/if.D7726KUx.js";import{ak as gr,ag as _r,al as xr,am as Sr,an as yr,ao as Tr,ap as Er,aq as wr,s as Ne,ar as Mr,j as G,as as ve,at as N,au as Rr,av as br,aw as Ar,ax as Br,ay as le,az as C,aA as He,aB as ft,aC as Ur,M as zr,aD as Ie,l as ze,D as Ce,k as me,aE as Cr,aF as it,aG as wt,aH as Mt,R as Rt,aI as Te,aJ as Pr,q as Ir,B as ht,aK as bt,aL as At,C as Dr,a2 as dt,u as Or,h as Lr}from"../chunks/T.Hd49IpQl.js";import{p as Nr}from"../chunks/index.DjefTLYy.js";import{b as Xe}from"../chunks/this.6e5kai16.js";import{r as nt,s as Hr,a as ae,b as Fr,c as vt}from"../chunks/props.6OPtkU23.js";import{c as Gr}from"../chunks/cache.DUKstImg.js";import{c as kr}from"../chunks/user.D2dC0DNH.js";import{u as Bt,a as Vr}from"../chunks/auth.svelte.Ddb2Zpbv.js";import{g as at,a as $r,o as Ut}from"../chunks/types.DYldHCp5.js";import{_ as P}from"../chunks/preload-helper.C1FmrZbK.js";import"../chunks/legacy.CtaTdtmd.js";import{i as Fe}from"../chunks/lifecycle.B_v46vf2.js";import{e as zt,i as Wr}from"../chunks/each.B5OHJjpm.js";function jr(e,t){if(t){const r=document.body;e.autofocus=!0,Et(()=>{document.activeElement===r&&e.focus()})}}function Ct(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Ct(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Kr(){for(var e,t,r=0,s="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Ct(e))&&(s&&(s+=" "),s+=t);return s}function Qr(e){return typeof e=="object"?Kr(e):e??""}function Xr(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function De(e,t,r,s){var o=e.__attributes??(e.__attributes={});st&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Ke]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Pt(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Yr(e,t,r,s,o=!1,u=!1,d=!1){var m=t||{},l=e.tagName==="OPTION";for(var a in t)a in r||(r[a]=null);r.class&&(r.class=Qr(r.class));var v=Pt(e),i=e.__attributes??(e.__attributes={});for(const y in r){let p=r[y];if(l&&y==="value"&&p==null){e.value=e.__value="",m[y]=p;continue}var n=m[y];if(p!==n){m[y]=p;var h=y[0]+y[1];if(h!=="$$"){if(h==="on"){const x={},g="$$"+y;let _=y.slice(2);var f=hr(_);if(ur(_)&&(_=_.slice(0,-7),x.capture=!0),!f&&n){if(p!=null)continue;e.removeEventListener(_,m[g],x),m[g]=null}if(p!=null)if(f)e[`__${_}`]=p,Le([_]);else{let T=function(B){m[y].call(this,B)};m[g]=cr(_,e,T,x)}else f&&(e[`__${_}`]=void 0)}else if(y==="style"&&p!=null)e.style.cssText=p+"";else if(y==="autofocus")jr(e,!!p);else if(y==="__value"||y==="value"&&p!=null)e.value=e[y]=e.__value=p;else if(y==="selected"&&l)Xr(e,p);else{var c=y;o||(c=fr(c));var S=c==="defaultValue"||c==="defaultChecked";if(p==null&&!u&&!S)if(i[y]=null,c==="value"||c==="checked"){let x=e;if(c==="value"){let g=x.defaultValue;x.removeAttribute(c),x.defaultValue=g}else{let g=x.defaultChecked;x.removeAttribute(c),x.defaultChecked=g}}else e.removeAttribute(y);else S||v.includes(c)&&(u||typeof p!="string")?e[c]=p:typeof p!="function"&&(st&&(c==="src"||c==="href"||c==="srcset")||De(e,c,p))}y==="style"&&"__styles"in e&&(e.__styles={})}}}return m}var pt=new Map;function Pt(e){var t=pt.get(e.nodeName);if(t)return t;pt.set(e.nodeName,t=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=Qt(s);for(var u in r)r[u].set&&t.push(u);s=Kt(s)}return t}function Zr(e){if(!st&&e.loading==="lazy"){var t=e.src;e[Ke]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[Ke]!=="eager"&&(e.loading="lazy"),e.src=t})}}function Jr(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}const qr=()=>performance.now(),q={tick:e=>requestAnimationFrame(e),now:()=>qr(),tasks:new Set};function It(){const e=q.now();q.tasks.forEach(t=>{t.c(e)||(q.tasks.delete(t),t.f())}),q.tasks.size!==0&&q.tick(It)}function es(e){let t;return q.tasks.size===0&&q.tick(It),{promise:new Promise(r=>{q.tasks.add(t={c:e,f:r})}),abort(){q.tasks.delete(t)}}}function Pe(e,t){e.dispatchEvent(new CustomEvent(t))}function ts(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function mt(e){const t={},r=e.split(";");for(const s of r){const[o,u]=s.split(":");if(!o||u===void 0)break;const d=ts(o.trim());t[d]=u.trim()}return t}const rs=e=>e;function Dt(e,t,r,s){var o=(e&tr)!==0,u="both",d,m=t.inert,l,a;function v(){var c=rr,S=lt;ut(null),ct(null);try{return d??(d=r()(t,(s==null?void 0:s())??{},{direction:u}))}finally{ut(c),ct(S)}}var i={is_global:o,in(){t.inert=m,Pe(t,"introstart"),l=Ye(t,v(),a,1,()=>{Pe(t,"introend"),l==null||l.abort(),l=d=void 0})},out(c){t.inert=!0,Pe(t,"outrostart"),a=Ye(t,v(),l,0,()=>{Pe(t,"outroend"),c==null||c()})},stop:()=>{l==null||l.abort(),a==null||a.abort()}},n=lt;if((n.transitions??(n.transitions=[])).push(i),dr){var h=o;if(!h){for(var f=n.parent;f&&f.f&Xt;)for(;(f=f.parent)&&!(f.f&Yt););h=!f||(f.f&Zt)!==0}h&&Jt(()=>{qt(()=>i.in())})}}function Ye(e,t,r,s,o){var u=s===1;if(er(t)){var d,m=!1;return Et(()=>{if(!m){var S=t({direction:u?"in":"out"});d=Ye(e,S,r,s,o)}}),{abort:()=>{m=!0,d==null||d.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return o(),{abort:se,deactivate:se,reset:se,t:()=>s};const{delay:l=0,css:a,tick:v,easing:i=rs}=t;var n=[];if(u&&r===void 0&&(v&&v(0,1),a)){var h=mt(a(0,1));n.push(h,h)}var f=()=>1-s,c=e.animate(n,{duration:l});return c.onfinish=()=>{var S=(r==null?void 0:r.t())??1-s;r==null||r.abort();var y=s-S,p=t.duration*Math.abs(y),x=[];if(p>0){if(a)for(var g=Math.ceil(p/16.666666666666668),_=0;_<=g;_+=1){var T=S+y*i(_/g),B=a(T,1-T);x.push(mt(B))}f=()=>{var b=c.currentTime;return S+y*i(b/p)},v&&es(()=>{if(c.playState!=="running")return!1;var b=f();return v(b,1-b),!0})}c=e.animate(x,{duration:p,fill:"forwards"}),c.onfinish=()=>{f=()=>s,v==null||v(s,1-s),o()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=se)},deactivate:()=>{o=se},reset:()=>{s===0&&(v==null||v(1,0))},t:()=>f()}}const ss=!0,is=!1,ns=Object.freeze(Object.defineProperty({__proto__:null,prerender:ss,ssr:is},Symbol.toStringTag,{value:"Module"})),as=e=>{gr(e),Gr();const{scene:t}=_r();xr(t),Sr(t),yr(),Tr(e),Er(),wr(e),kr()};function os(e,t){W(t,!0);let r=nt(t,["$$slots","$$events","$$legacy","children"]);as(r);var s=Y(),o=H(s);Ne(o,()=>t.children),U(e,s),j()}var ls=O('<div class="svelte-1osucwe"><canvas class="svelte-1osucwe"><!></canvas></div>');function us(e,t){W(t,!0);let r=nt(t,["$$slots","$$events","$$legacy","children"]),s=X(void 0),o=X(void 0);var u=ls(),d=D(u),m=D(d);{var l=a=>{os(a,Hr({get dom(){return R(o)},get canvas(){return R(s)}},()=>r,{children:(v,i)=>{var n=Y(),h=H(n);Ne(h,()=>t.children??se),U(v,n)},$$slots:{default:!0}}))};$(m,a=>{R(s)&&R(o)&&a(l)})}I(d),Xe(d,a=>k(s,a),()=>R(s)),I(u),Xe(u,a=>k(o,a),()=>R(o)),U(e,u),j()}var Re;class cs{constructor(){F(this,Re,X())}get current(){return R(z(this,Re))}set current(t){k(z(this,Re),ae(t))}}Re=new WeakMap;const Ot=new cs;let gt=!1;const fs={NO_TRACK_PLAYING:204},hs=async e=>{const t="https://api.spotify.com/v1/me/player/currently-playing";try{const r=await fetch(t,{headers:{Authorization:`Bearer ${e.access}`,"Content-Type":"application/json"}});if(r.status===fs.NO_TRACK_PLAYING){console.log("No track is currently playing.");return}if(!r.ok){console.error(`fetchCurrentlyPlayingTrack: ${r.status} - ${r.statusText}`);return}return r.json()}catch(r){console.error("Error fetching currently playing track:",r)}},Ze=async e=>{const t=await hs(e);if(Ot.current=t,t===void 0){setTimeout(Ze,3e3,e);return}const r=t.item.duration_ms-t.progress_ms+1e3;setTimeout(Ze,r,e)},Lt=()=>{const{token:e,authenticated:t}=Bt();return gt||(ee(()=>{t.current==="logged-in"&&Ze(e)}),gt=!0),{track:Ot}},ds=["just4jon","tubeman"],vs=Object.assign({"../routes/+layout.svelte":()=>P(()=>Promise.resolve().then(()=>vn),void 0,import.meta.url),"../routes/+layout.ts":()=>P(()=>Promise.resolve().then(()=>ns),void 0,import.meta.url),"../routes/+page.svelte":()=>P(()=>import("../chunks/2.-QGo-h7B.js").then(e=>e.a),__vite__mapDeps([0,1,2,3]),import.meta.url),"../routes/bars/+page.svelte":()=>P(()=>import("../chunks/3.BX4wlDpy.js").then(e=>e.a),__vite__mapDeps([4,1,5,3,6,7,8,9,10,11,12,13,2,14,15,16,17,18]),import.meta.url),"../routes/costco/+page.svelte":()=>P(()=>import("../chunks/4.BvBRVNh1.js").then(e=>e.a),__vite__mapDeps([19,1,5,3,6,20,7,8,9,10,11,12,21,15,13,22,23,24,2,25,26,27]),import.meta.url),"../routes/cubes/+page.svelte":()=>P(()=>import("../chunks/5.BSVzMCsI.js").then(e=>e.a),__vite__mapDeps([28,1,5,3,6,8,10,9,11,12,17,13,29,15,2]),import.meta.url),"../routes/curves/+page.svelte":()=>P(()=>import("../chunks/6.CKb2Jc6u.js").then(e=>e.a),__vite__mapDeps([30,1,2,3,5,6,7,31,10,9,11,12,13,17,18,32]),import.meta.url),"../routes/grid/+page.svelte":()=>P(()=>import("../chunks/7.0LDNl7Th.js").then(e=>e.a),__vite__mapDeps([33,1,5,3,6,7,8,9,10,11,12,13,2,14,15,16,17,18]),import.meta.url),"../routes/lava/+page.svelte":()=>P(()=>import("../chunks/8.ZpK03Fgn.js").then(e=>e.a),__vite__mapDeps([34,1,5,3,6,7,8,10,9,11,12,13,22,23,24,2,35,36,37,17]),import.meta.url),"../routes/lava/MarchingCube.ts":()=>P(()=>import("../chunks/MarchingCube.Bf2XlcGE.js"),__vite__mapDeps([36,10,1,5,3,6,9,11,12]),import.meta.url),"../routes/lava/MarchingCubes.svelte":()=>P(()=>import("../chunks/MarchingCubes.Dv0qwN_u.js"),__vite__mapDeps([35,1,5,3,6,10,9,11,12,36,37]),import.meta.url),"../routes/lava/MarchingPlane.ts":()=>P(()=>import("../chunks/MarchingPlane.DzyTH_4j.js"),__vite__mapDeps([37,10,1,5,3,6,9,11,12]),import.meta.url),"../routes/lava/types.ts":()=>P(()=>import("../chunks/types.DYldHCp5.js").then(e=>e.t),__vite__mapDeps([38,5,3,11]),import.meta.url),"../routes/lines/+page.svelte":()=>P(()=>import("../chunks/9.B9TxDQ_3.js").then(e=>e.a),__vite__mapDeps([39,1,5,3,6,7,8,9,10,11,12,13,20,16,2,18,17,32]),import.meta.url),"../routes/pulsar/+page.svelte":()=>P(()=>import("../chunks/10.BUrQZGAE.js").then(e=>e.a),__vite__mapDeps([40,1,2,3,5,6,7,31,17,9,10,11,12,13,22,23,24,32]),import.meta.url),"../routes/reflection/+page.svelte":()=>P(()=>import("../chunks/11.Dq1MJQSK.js").then(e=>e.a),__vite__mapDeps([41,1,5,3,6,20,8,9,10,11,12,13,21,42,22,23,24,2]),import.meta.url),"../routes/ribbons/+page.svelte":()=>P(()=>import("../chunks/12.DudUXsI8.js").then(e=>e.a),__vite__mapDeps([43,1,2,3,5,6,10,9,11,12,13,22,23,24,44,16]),import.meta.url),"../routes/ribbons/Ribbon.svelte":()=>P(()=>import("../chunks/Ribbon.D17OEv_x.js"),__vite__mapDeps([44,1,5,3,6,9,10,11,12,13,16,2]),import.meta.url),"../routes/rubix/+page.svelte":()=>P(()=>import("../chunks/13.CYg8j5xw.js").then(e=>e.a),__vite__mapDeps([45,1,5,3,6,7,8,17,9,10,11,12,13,29,15,2,46,20,47,42,23,24]),import.meta.url),"../routes/shatter/+page.svelte":()=>P(()=>import("../chunks/14.CyD4VtLQ.js").then(e=>e.a),__vite__mapDeps([48,1,5,3,6,7,8,9,10,11,12,25,26,20,46,47,13,42,23,24,2,17,18]),import.meta.url),"../routes/tubeman/+page.svelte":()=>P(()=>import("../chunks/15.67KgbCAU.js").then(e=>e.a),__vite__mapDeps([49,1,5,3,6,8,9,10,11,12,50,7,26,27,13,22,23,24,2,51,25]),import.meta.url),"../routes/tubeman/Rope.svelte":()=>P(()=>import("../chunks/Rope.CKSVACyw.js"),__vite__mapDeps([50,1,5,3,6,7,8,9,10,11,12,26,27]),import.meta.url),"../routes/tubeman/Skin.svelte":()=>P(()=>import("../chunks/Skin.UIL6OG1Y.js"),__vite__mapDeps([51,1,5,3,6,8,10,9,11,12]),import.meta.url)}),Ee=Object.keys(vs).map(e=>e.split("/")[2]).filter(e=>!e.startsWith("+")).filter(e=>!ds.includes(e)),Je=e=>{const t=window.location.pathname.replace("/","");let s=Ee.findIndex(o=>o===t)+e;s===Ee.length?s=0:s===-1&&(s=Ee.length-1),at(`/${Ee[s]}`)},ps=()=>{const t=3e5+(Math.random()-.5)*2;return setTimeout(Je,t,-1)},ms=()=>{const e=[...Ee],t=r=>{$r(r);const s=e.pop();s!==void 0&&setTimeout(t,1e3,s)};setTimeout(t,1e3,e.pop())},we={Debug:"d",QRCode:"q",Settings:"s",Studio:"`",Fullscreen:"f",PreviousPage:"arrowleft",NextPage:"arrowright"};function gs(e,t){W(t,!1);const r=async()=>{document.body.requestFullscreen()},s=o=>{switch(o.key.toLowerCase()){case we.Fullscreen:return r();case we.PreviousPage:return Je(-1);case we.NextPage:return Je(1)}};Fe(),ye("keydown",Se,s),j()}const _s=e=>e;function Nt(e,{delay:t=0,duration:r=400,easing:s=_s}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:s,css:u=>`opacity: ${u*o}`}}const Ht=window;function xs(e){let t=e.activeElement;for(;t!=null&&t.shadowRoot;){const r=t.shadowRoot.activeElement;if(r===t)break;t=r}return t}function _t(e,t,r,s){const o=Array.isArray(t)?t:[t];for(const u of o)e.addEventListener(u,r,s);return()=>{for(const u of o)e.removeEventListener(u,r,s)}}var ge,be,ie,ce,oe,qe,et;class Ss{constructor(t,r){F(this,oe);F(this,ge,X());F(this,be);F(this,ie,0);F(this,ce,null);z(this,ge).v=ae(t),J(this,be,r)}get current(){return sr()?ee(()=>($e(this,ie)._++,z(this,ie)===1&&te(this,oe,qe).call(this,!0),()=>{ir().then(()=>{$e(this,ie)._--,z(this,ie)===0&&te(this,oe,et).call(this)})})):z(this,ie)===0&&(te(this,oe,qe).call(this,!1),te(this,oe,et).call(this)),R(z(this,ge))}}ge=new WeakMap,be=new WeakMap,ie=new WeakMap,ce=new WeakMap,oe=new WeakSet,qe=function(t){J(this,ce,z(this,be).call(this,r=>{k(z(this,ge),ae(r))},t)??null)},et=function(){z(this,ce)!==null&&(z(this,ce).call(this),J(this,ce,null))};function ys(e={}){const{window:t=Ht}=e,r=e.document??(t==null?void 0:t.document);return new Ss(null,(s,o)=>{function u(){r&&s(xs(r))}if(u(),!o||!t)return;const d=_t(t,"focusin",u),m=_t(t,"focusout",u);return()=>{d(),m()}})}ys();function Ts(e,t){switch(e){case"local":return t.localStorage;case"session":return t.sessionStorage}}var fe,ne,_e,xe,Ae,Oe,pe,tt,Ft;class Ge{constructor(t,r,s={}){F(this,pe);F(this,fe,X());F(this,ne);F(this,_e);F(this,xe);F(this,Ae);F(this,Oe,t=>{t.key!==z(this,ne)||t.newValue===null||te(this,pe,tt).call(this,t.newValue)});const{storage:o="local",serializer:u={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:d=!0,window:m=Ht}=s;if(z(this,fe).v=ae(r),J(this,ne,t),J(this,_e,u),m===void 0)return;const l=Ts(o,m);J(this,xe,l);const a=l.getItem(t);a!==null&&te(this,pe,tt).call(this,a),d&&o==="local"&&J(this,Ae,Mr(()=>vr(m,"storage",z(this,Oe))))}get current(){var t;return(t=z(this,Ae))==null||t.call(this),R(z(this,fe))}set current(t){k(z(this,fe),ae(t)),te(this,pe,Ft).call(this,t)}}fe=new WeakMap,ne=new WeakMap,_e=new WeakMap,xe=new WeakMap,Ae=new WeakMap,Oe=new WeakMap,pe=new WeakSet,tt=function(t){try{k(z(this,fe),ae(z(this,_e).deserialize(t)))}catch(r){console.error(`Error when parsing "${t}" from persisted store "${z(this,ne)}"`,r)}},Ft=function(t){var r;try{(r=z(this,xe))==null||r.setItem(z(this,ne),z(this,_e).serialize(t))}catch(s){console.error(`Error when writing value from persisted store "${z(this,ne)}" to ${z(this,xe)}`,s)}};var Es=O('<span class="svelte-101a3xu"> </span>'),ws=O('<div class="absolute bottom-0 left-0 flex items-end gap-1.5 p-4 text-white"><div class="h-[120px] w-[120px] overflow-hidden rounded-lg shadow-2xl"><img class="select-none" width="120" height="120"></div> <div class="flex flex-col gap-1 px-2 py-2"><p class="text-lg font-bold leading-none"> </p> <p class="text-xs leading-none opacity-75"></p></div></div>');function Ms(e,t){W(t,!1);const{track:r}=Lt(),s=nr(new Ge("trackinfo-visible",!0));Fe();var o=Y();ye("keydown",Se,m=>{m.key.toLowerCase()==="t"&&ar(s,R(s).current=!R(s).current)});var u=H(o);{var d=m=>{var l=ws();const a=Qe(()=>{const{item:S}=r.current;return{item:S}});var v=D(l),i=D(v);I(v);var n=L(v,2),h=D(n),f=D(h,!0);I(h);var c=L(h,2);zt(c,5,()=>R(a).item.artists,S=>S.name,(S,y)=>{var p=Es(),x=D(p,!0);I(p),he(()=>Me(x,R(y).name)),U(S,p)}),I(c),I(n),I(l),he(()=>{De(i,"alt",R(a).item.album.name),De(i,"src",R(a).item.album.images[0].url),Me(f,R(a).item.name)}),Dt(3,l,()=>Nt,()=>({duration:200})),U(m,l)};$(u,m=>{R(s).current&&r.current&&m(d)})}U(e,o),j()}const xt=(e,t=se,r=se)=>{var s=Rs();s.__click=function(...u){var d;(d=r())==null||d.apply(this,u)};var o=L(D(s));I(s),he(()=>Me(o,` ${t()??""}`)),U(e,s)};var Rs=O('<button class="flex gap-1 bg-zinc-900 px-2 py-1 text-xs text-slate-100"><svg id="icon-spotify" viewBox="0 0 24 28" class="h-4 fill-slate-100"><path d="M17.609 18.906c0-0.438-0.172-0.609-0.469-0.797-2.016-1.203-4.359-1.797-6.984-1.797-1.531 0-3 0.203-4.484 0.531-0.359 0.078-0.656 0.313-0.656 0.812 0 0.391 0.297 0.766 0.766 0.766 0.141 0 0.391-0.078 0.578-0.125 1.219-0.25 2.5-0.422 3.797-0.422 2.297 0 4.469 0.562 6.203 1.609 0.187 0.109 0.313 0.172 0.516 0.172 0.391 0 0.734-0.313 0.734-0.75zM19.109 15.547c0-0.422-0.156-0.719-0.547-0.953-2.391-1.422-5.422-2.203-8.563-2.203-2.016 0-3.391 0.281-4.734 0.656-0.5 0.141-0.75 0.484-0.75 1s0.422 0.938 0.938 0.938c0.219 0 0.344-0.063 0.578-0.125 1.094-0.297 2.406-0.516 3.922-0.516 2.969 0 5.672 0.781 7.625 1.937 0.172 0.094 0.344 0.203 0.594 0.203 0.531 0 0.938-0.422 0.938-0.938zM20.797 11.672c0-0.578-0.25-0.875-0.625-1.094-2.703-1.578-6.406-2.312-9.938-2.312-2.078 0-3.984 0.234-5.688 0.734-0.438 0.125-0.844 0.5-0.844 1.156 0 0.641 0.484 1.141 1.125 1.141 0.234 0 0.453-0.078 0.625-0.125 1.516-0.422 3.156-0.578 4.797-0.578 3.25 0 6.625 0.719 8.797 2.016 0.219 0.125 0.375 0.187 0.625 0.187 0.594 0 1.125-0.469 1.125-1.125zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12 12 5.375 12 12z"></path></svg> </button>'),bs=O("<div><!></div>");function As(e,t){W(t,!1);const{authenticated:r,login:s,logout:o}=Bt();Fe();var u=bs(),d=D(u);{var m=a=>{var v=mr("...");U(a,v)},l=a=>{var v=Y(),i=H(v);{var n=f=>{var c=Qe(()=>()=>o());xt(f,()=>"Logout Spotify",()=>R(c))},h=f=>{var c=Y(),S=H(c);{var y=p=>{var x=Qe(()=>()=>s());xt(p,()=>"Connect Spotify",()=>R(x))};$(S,p=>{r.current==="logged-out"&&p(y)},!0)}U(f,c)};$(i,f=>{r.current==="logged-in"?f(n):f(h,!1)},!0)}U(a,v)};$(d,a=>{r.current==="pending"?a(m):a(l,!1)})}I(u),U(e,u),j()}Le(["click"]);var Bs=O("<img>");function Gt(e,t){let r=nt(t,["$$slots","$$events","$$legacy"]);var s=Bs();let o;he(()=>o=Yr(s,o,{...r,src:"zestyplus.png"})),Zr(s),pr(s),U(e,s)}var Us=O('<button class="absolute right-2 top-2 z-10 h-6 w-6 p-1" aria-label="Open settings"><svg class="h-full fill-white" viewBox="0 0 32 32"><path d="M13,16c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,14.346,13,16z"></path><path d="M13,26c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,24.346,13,26z"></path><path d="M13,6c0,1.654,1.346,3,3,3s3-1.346,3-3s-1.346-3-3-3S13,4.346,13,6z"></path></svg></button>'),zs=O('<div class="absolute left-0 top-0 z-20 grid h-screen w-screen backdrop-blur-sm"></div> <div class="absolute left-0 top-0 z-20 grid h-screen w-screen place-content-center"><div class="h-44 w-80 rounded-sm bg-white p-2 shadow-xl"><div class="-mt-12 mb-4 flex w-full justify-center"><!></div> <div class="flex justify-center"><!></div></div></div>',1),Cs=O("<!> <!>",1);function Ps(e,t){W(t,!0);const r=new Ge("settings-open",!1);let s=-1,o=X(!1);const u=()=>{clearTimeout(s),k(o,!0),s=setTimeout(()=>k(o,!1),5e3)},d=n=>{const h=n.key.toLowerCase();h==="s"&&(r.current=!r.current),r.current&&h==="escape"&&(r.current=!1)};var m=Cs();ye("mousemove",Se,u),ye("keydown",Se,d);var l=H(m);{var a=n=>{var h=Us();h.__click=()=>r.current=!r.current,Dt(3,h,()=>Nt),U(n,h)};$(l,n=>{R(o)&&n(a)})}var v=L(l,2);{var i=n=>{var h=zs(),f=L(H(h),2),c=D(f),S=D(c),y=D(S);Gt(y,{class:"w-24"}),I(S);var p=L(S,2),x=D(p);As(x,{}),I(p),I(c),I(f),U(n,h)};$(v,n=>{r.current&&n(i)})}U(e,m),j()}Le(["click"]);function Is(e,t){W(t,!1),Ut(r=>{if(document.startViewTransition)return new Promise(s=>{document.startViewTransition(async()=>{s(),await r.complete})})}),Fe(),j()}/**
 * postprocessing v6.36.4 build Tue Nov 05 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van RÃ¼schen
 * @license Zlib
 */var We=1/1e3,Ds=1e3,Os=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*We}get fixedDelta(){return this._fixedDelta*We}set fixedDelta(e){this._fixedDelta=e*Ds}get elapsed(){return this._elapsed*We}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Ls=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),r=new Ir;return r.setAttribute("position",new ht(e,3)),r.setAttribute("uv",new ht(t,2)),r})(),K=class rt{static get fullscreenGeometry(){return Ls}constructor(t="Pass",r=new ft,s=new Ur){this.name=t,this.renderer=null,this.scene=r,this.camera=s,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const r=this.fullscreenMaterial;r!==null&&(r.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let r=this.screen;r!==null?r.material=t:(r=new zr(rt.fullscreenGeometry,t),r.frustumCulled=!1,this.scene===null&&(this.scene=new ft),this.scene.add(r),this.screen=r)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,r=He){}render(t,r,s,o,u){throw new Error("Render method not implemented!")}setSize(t,r){}initialize(t,r,s){}dispose(){for(const t of Object.keys(this)){const r=this[t];(r instanceof le||r instanceof bt||r instanceof At||r instanceof rt)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},Ns=class extends K{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,s,o){const u=e.state.buffers.stencil;u.setLocked(!1),u.setTest(!1)}},Hs=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,kt="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Vt=class extends me{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new C(null),opacity:new C(1)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Hs,vertexShader:kt})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Fs=class extends K{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Vt,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new le(1,1,{minFilter:Ie,magFilter:Ie,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,s,o){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==ve?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===N&&(this.renderTarget.texture.colorSpace=N))}},St=new Dr,$t=class extends K{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,s,o){const u=this.overrideClearColor,d=this.overrideClearAlpha,m=e.getClearAlpha(),l=u!==null,a=d>=0;l?(e.getClearColor(St),e.setClearColor(u,a?d:m)):a&&e.setClearAlpha(d),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(St,m):a&&e.setClearAlpha(m)}},Gs=class extends K{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new $t(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,s,o){const u=e.getContext(),d=e.state.buffers,m=this.scene,l=this.camera,a=this.clearPass,v=this.inverted?0:1,i=1-v;d.color.setMask(!1),d.depth.setMask(!1),d.color.setLocked(!0),d.depth.setLocked(!0),d.stencil.setTest(!0),d.stencil.setOp(u.REPLACE,u.REPLACE,u.REPLACE),d.stencil.setFunc(u.ALWAYS,v,4294967295),d.stencil.setClear(i),d.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?a.render(e,null):(a.render(e,t),a.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(m,l)):(e.setRenderTarget(t),e.render(m,l),e.setRenderTarget(r),e.render(m,l)),d.color.setLocked(!1),d.depth.setLocked(!1),d.stencil.setLocked(!1),d.stencil.setFunc(u.EQUAL,1,4294967295),d.stencil.setOp(u.KEEP,u.KEEP,u.KEEP),d.stencil.setLocked(!0)}},ks=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:s=0,frameBufferType:o}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,o,s),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Fs,this.depthTexture=null,this.passes=[],this.timer=new Os,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new G),r=e.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;s===ve&&e.outputColorSpace===N&&(this.inputBuffer.texture.colorSpace=N,this.outputBuffer.texture.colorSpace=N,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const o of this.passes)o.initialize(e,r,s)}}replaceRenderer(e,t=!0){const r=this.renderer,s=r.domElement.parentNode;return this.setRenderer(e),t&&s!==null&&(s.removeChild(r.domElement),s.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new Rr;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=br,e.type=Ar):e.type=Br,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,s){const o=this.renderer,u=o===null?new G:o.getDrawingBufferSize(new G),d={minFilter:Ie,magFilter:Ie,stencilBuffer:t,depthBuffer:e,type:r},m=new le(u.width,u.height,d);return s>0&&(m.ignoreDepthForMultisampleCopy=!1,m.samples=s),r===ve&&o!==null&&o.outputColorSpace===N&&(m.texture.colorSpace=N),m.texture.name="EffectComposer.Buffer",m.texture.generateMipmaps=!1,m}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,s=this.renderer,o=s.getDrawingBufferSize(new G),u=s.getContext().getContextAttributes().alpha,d=this.inputBuffer.texture.type;if(e.setRenderer(s),e.setSize(o.width,o.height),e.initialize(s,u,d),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const m=this.createDepthTexture();for(e of r)e.setDepthTexture(m)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const u=(m,l)=>m||l.needsDepthTexture;t.reduce(u,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let s=this.inputBuffer,o=this.outputBuffer,u=!1,d,m,l;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const a of this.passes)a.enabled&&(a.render(t,s,o,e,u),a.needsSwap&&(u&&(r.renderToScreen=a.renderToScreen,d=t.getContext(),m=t.state.buffers.stencil,m.setFunc(d.NOTEQUAL,1,4294967295),r.render(t,s,o,e,u),m.setFunc(d.EQUAL,1,4294967295)),l=s,s=o,o=l),a instanceof Gs?u=!0:a instanceof Ns&&(u=!1))}setSize(e,t,r){const s=this.renderer,o=s.getSize(new G);(e===void 0||t===void 0)&&(e=o.width,t=o.height),(o.width!==e||o.height!==t)&&s.setSize(e,t,r);const u=s.getDrawingBufferSize(new G);this.inputBuffer.setSize(u.width,u.height),this.outputBuffer.setSize(u.width,u.height);for(const d of this.passes)d.setSize(u.width,u.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),K.fullscreenGeometry.dispose()}},de={NONE:0,DEPTH:1,CONVOLUTION:2},A={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Vs=class{constructor(){this.shaderParts=new Map([[A.FRAGMENT_HEAD,null],[A.FRAGMENT_MAIN_UV,null],[A.FRAGMENT_MAIN_IMAGE,null],[A.VERTEX_HEAD,null],[A.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=de.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=wt}},je=!1,yt=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case Ce:r=this.materialsFlatShadedDoubleSide;break;case ze:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case Ce:r=this.materialsDoubleSide;break;case ze:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof me))return e.clone();const t=e.uniforms,r=new Map;for(const o in t){const u=t[o].value;u.isRenderTargetTexture&&(t[o].value=null,r.set(o,u))}const s=e.clone();for(const o of r)t[o[0]].value=o[1],s.uniforms[o[0]].value=o[1];return s}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Cr;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.side=ze,s}),this.materialsDoubleSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.side=Ce,s}),this.materialsFlatShaded=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s}),this.materialsFlatShadedBackSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s.side=ze,s}),this.materialsFlatShadedDoubleSide=t.map(r=>{const s=this.cloneMaterial(r);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s.side=Ce,s})}}render(e,t,r){const s=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,je){const o=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(const u of o)u[0].material=u[1];this.meshCount!==o.size&&o.clear()}else{const o=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=o}e.shadowMap.enabled=s}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return je}static set workaroundEnabled(e){je=e}},re=-1,Q=class extends it{constructor(e,t=re,r=re,s=1){super(),this.resizable=e,this.baseSize=new G(1,1),this.preferredSize=new G(t,r),this.target=this.preferredSize,this.s=s,this.effectiveSize=new G,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,r=this.effectiveSize,s=this.scale;t.width!==re?r.width=t.width:t.height!==re?r.width=Math.round(t.height*(e.width/Math.max(e.height,1))):r.width=Math.round(e.width*s),t.height!==re?r.height=t.height:t.width!==re?r.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r.height=Math.round(e.height*s)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(re),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return re}},M={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},$s="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Ws="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",js="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Ks="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Qs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Xs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Ys="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Zs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Js="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",qs="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",ei="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",ti="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",ri="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",si="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",ii="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",ni="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",ai="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",oi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",li="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",ui="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",ci="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",fi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",hi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",di="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",vi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",pi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",mi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",gi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",_i="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",xi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Si="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",yi="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Ti=new Map([[M.ADD,$s],[M.ALPHA,Ws],[M.AVERAGE,js],[M.COLOR,Ks],[M.COLOR_BURN,Qs],[M.COLOR_DODGE,Xs],[M.DARKEN,Ys],[M.DIFFERENCE,Zs],[M.DIVIDE,Js],[M.DST,null],[M.EXCLUSION,qs],[M.HARD_LIGHT,ei],[M.HARD_MIX,ti],[M.HUE,ri],[M.INVERT,si],[M.INVERT_RGB,ii],[M.LIGHTEN,ni],[M.LINEAR_BURN,ai],[M.LINEAR_DODGE,oi],[M.LINEAR_LIGHT,li],[M.LUMINOSITY,ui],[M.MULTIPLY,ci],[M.NEGATION,fi],[M.NORMAL,hi],[M.OVERLAY,di],[M.PIN_LIGHT,vi],[M.REFLECT,pi],[M.SATURATION,mi],[M.SCREEN,gi],[M.SOFT_LIGHT,_i],[M.SRC,xi],[M.SUBTRACT,Si],[M.VIVID_LIGHT,yi]]),Ei=class extends it{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new C(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Ti.get(this.blendFunction)}},ke={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},wi=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Mi="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Ri=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],bi=class extends me{constructor(e=new dt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new C(null),texelSize:new C(new dt),scale:new C(1),kernel:new C(0)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:wi,vertexShader:Mi}),this.setTexelSize(e.x,e.y),this.kernelSize=ke.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return Ri[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const r=1/e,s=1/t;this.uniforms.texelSize.value.set(r,s,r*.5,s*.5)}},Ai=class extends K{constructor({kernelSize:e=ke.MEDIUM,resolutionScale:t=.5,width:r=Q.AUTO_SIZE,height:s=Q.AUTO_SIZE,resolutionX:o=r,resolutionY:u=s}={}){super("KawaseBlurPass"),this.renderTargetA=new le(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const d=this.resolution=new Q(this,o,u,t);d.addEventListener("change",m=>this.setSize(d.baseWidth,d.baseHeight)),this._blurMaterial=new bi,this._blurMaterial.kernelSize=e,this.copyMaterial=new Vt}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,s,o){const u=this.scene,d=this.camera,m=this.renderTargetA,l=this.renderTargetB,a=this.blurMaterial,v=a.kernelSequence;let i=t;this.fullscreenMaterial=a;for(let n=0,h=v.length;n<h;++n){const f=n&1?l:m;a.kernel=v[n],a.inputBuffer=i.texture,e.setRenderTarget(f),e.render(u,d),i=f}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=i.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(u,d)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t);const s=r.width,o=r.height;this.renderTargetA.setSize(s,o),this.renderTargetB.setSize(s,o),this.blurMaterial.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==ve?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===N&&(this.renderTargetA.texture.colorSpace=N,this.renderTargetB.texture.colorSpace=N))}static get AUTO_SIZE(){return Q.AUTO_SIZE}},Bi=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Ui=class extends me{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Rt.replace(/\D+/g,"")},uniforms:{inputBuffer:new C(null),threshold:new C(0),smoothing:new C(1),range:new C(null)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Bi,vertexShader:kt}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},zi=class extends K{constructor({renderTarget:e,luminanceRange:t,colorOutput:r,resolutionScale:s=1,width:o=Q.AUTO_SIZE,height:u=Q.AUTO_SIZE,resolutionX:d=o,resolutionY:m=u}={}){super("LuminancePass"),this.fullscreenMaterial=new Ui(r,t),this.needsSwap=!1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Q(this,d,m,s);l.addEventListener("change",a=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,s,o){const u=this.fullscreenMaterial;u.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==ve&&(this.renderTarget.texture.type=r,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Ci=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Pi="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Ii=class extends me{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new C(null),texelSize:new C(new G)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ci,vertexShader:Pi})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Di=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Oi="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Li=class extends me{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new C(null),supportBuffer:new C(null),texelSize:new C(new G),radius:new C(.85)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Di,vertexShader:Oi})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Ni=class extends K{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Ii,this.upsamplingMaterial=new Li,this.resolution=new G}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let r=0;r<e;++r){const s=t.clone();s.texture.name="Downsampling.Mipmap"+r,this.downsamplingMipmaps.push(s)}this.upsamplingMipmaps.push(t);for(let r=1,s=e-1;r<s;++r){const o=t.clone();o.texture.name="Upsampling.Mipmap"+r,this.upsamplingMipmaps.push(o)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,r,s,o){const{scene:u,camera:d}=this,{downsamplingMaterial:m,upsamplingMaterial:l}=this,{downsamplingMipmaps:a,upsamplingMipmaps:v}=this;let i=t;this.fullscreenMaterial=m;for(let n=0,h=a.length;n<h;++n){const f=a[n];m.setSize(i.width,i.height),m.inputBuffer=i.texture,e.setRenderTarget(f),e.render(u,d),i=f}this.fullscreenMaterial=l;for(let n=v.length-1;n>=0;--n){const h=v[n];l.setSize(i.width,i.height),l.inputBuffer=i.texture,l.supportBuffer=a[n].texture,e.setRenderTarget(h),e.render(u,d),i=h}}setSize(e,t){const r=this.resolution;r.set(e,t);let s=r.width,o=r.height;for(let u=0,d=this.downsamplingMipmaps.length;u<d;++u)s=Math.round(s*.5),o=Math.round(o*.5),this.downsamplingMipmaps[u].setSize(s,o),u<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[u].setSize(s,o)}initialize(e,t,r){if(r!==void 0){const s=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const o of s)o.texture.type=r;if(r!==ve)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e!==null&&e.outputColorSpace===N)for(const o of s)o.texture.colorSpace=N}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},Hi=class extends it{constructor(e,t,{attributes:r=de.NONE,blendFunction:s=M.NORMAL,defines:o=new Map,uniforms:u=new Map,extensions:d=null,vertexShader:m=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=m,this.defines=o,this.uniforms=u,this.extensions=d,this.blendMode=new Ei(s),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=wt,this._outputColorSpace=Mt}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=He){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof le||t instanceof bt||t instanceof At||t instanceof K)&&this[e].dispose()}}},Fi=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,Gi=class extends Hi{constructor({blendFunction:e=M.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,mipmapBlur:s=!1,intensity:o=1,radius:u=.85,levels:d=8,kernelSize:m=ke.LARGE,resolutionScale:l=.5,width:a=Q.AUTO_SIZE,height:v=Q.AUTO_SIZE,resolutionX:i=a,resolutionY:n=v}={}){super("BloomEffect",Fi,{blendFunction:e,uniforms:new Map([["map",new C(null)],["intensity",new C(o)]])}),this.renderTarget=new le(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Ai({kernelSize:m}),this.luminancePass=new zi({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r,this.mipmapBlurPass=new Ni,this.mipmapBlurPass.enabled=s,this.mipmapBlurPass.radius=u,this.mipmapBlurPass.levels=d,this.uniforms.get("map").value=s?this.mipmapBlurPass.texture:this.renderTarget.texture;const h=this.resolution=new Q(this,i,n,l);h.addEventListener("change",f=>this.setSize(h.baseWidth,h.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){const s=this.renderTarget,o=this.luminancePass;o.enabled?(o.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,o.renderTarget):this.blurPass.render(e,o.renderTarget,s)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,s)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.blurPass.resolution.copy(r),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,r){this.blurPass.initialize(e,t,r),this.luminancePass.initialize(e,t,r),this.mipmapBlurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e!==null&&e.outputColorSpace===N&&(this.renderTarget.texture.colorSpace=N))}},ki=class extends K{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new $t,this.overrideMaterialManager=r===null?null:new yt(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new yt(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,s,o){const u=this.scene,d=this.camera,m=this.selection,l=d.layers.mask,a=u.background,v=e.shadowMap.autoUpdate,i=this.renderToScreen?null:t;m!==null&&d.layers.set(m.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(u.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(i),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,u,d):e.render(u,d),d.layers.mask=l,u.background=a,e.shadowMap.autoUpdate=v}},Vi=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,$i="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Wi=class extends me{constructor(e,t,r,s,o=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Rt.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new G),texelSize:new C(new G),cameraNear:new C(.3),cameraFar:new C(1e3),aspect:new C(1),time:new C(0)},blending:Te,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:o}),e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.copyCameraSettings(s)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=He){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=Vi.replace(A.FRAGMENT_HEAD,e.get(A.FRAGMENT_HEAD)||"").replace(A.FRAGMENT_MAIN_UV,e.get(A.FRAGMENT_MAIN_UV)||"").replace(A.FRAGMENT_MAIN_IMAGE,e.get(A.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=$i.replace(A.VERTEX_HEAD,e.get(A.VERTEX_HEAD)||"").replace(A.VERTEX_MAIN_SUPPORT,e.get(A.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Pr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return A}};function Tt(e,t,r){for(const s of t){const o="$1"+e+s.charAt(0).toUpperCase()+s.slice(1),u=new RegExp("([^\\.])(\\b"+s+"\\b)","g");for(const d of r.entries())d[1]!==null&&r.set(d[0],d[1].replace(u,o))}}function ji(e,t,r){let s=t.getFragmentShader(),o=t.getVertexShader();const u=s!==void 0&&/mainImage/.test(s),d=s!==void 0&&/mainUv/.test(s);if(r.attributes|=t.getAttributes(),s===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(d&&r.attributes&de.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!u&&!d)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const m=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=r.shaderParts;let a=l.get(A.FRAGMENT_HEAD)||"",v=l.get(A.FRAGMENT_MAIN_UV)||"",i=l.get(A.FRAGMENT_MAIN_IMAGE)||"",n=l.get(A.VERTEX_HEAD)||"",h=l.get(A.VERTEX_MAIN_SUPPORT)||"";const f=new Set,c=new Set;if(d&&(v+=`	${e}MainUv(UV);
`,r.uvTransformation=!0),o!==null&&/mainSupport/.test(o)){const p=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o);h+=`	${e}MainSupport(`,h+=p?`vUv);
`:`);
`;for(const x of o.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const g of x[1].split(/\s*,\s*/))r.varyings.add(g),f.add(g),c.add(g);for(const x of o.matchAll(m))c.add(x[1])}for(const p of s.matchAll(m))c.add(p[1]);for(const p of t.defines.keys())c.add(p.replace(/\([\w\s,]*\)/g,""));for(const p of t.uniforms.keys())c.add(p);c.delete("while"),c.delete("for"),c.delete("if"),t.uniforms.forEach((p,x)=>r.uniforms.set(e+x.charAt(0).toUpperCase()+x.slice(1),p)),t.defines.forEach((p,x)=>r.defines.set(e+x.charAt(0).toUpperCase()+x.slice(1),p));const S=new Map([["fragment",s],["vertex",o]]);Tt(e,c,r.defines),Tt(e,c,S),s=S.get("fragment"),o=S.get("vertex");const y=t.blendMode;if(r.blendModes.set(y.blendFunction,y),u){t.inputColorSpace!==null&&t.inputColorSpace!==r.colorSpace&&(i+=t.inputColorSpace===N?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==Mt?r.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(r.colorSpace=t.inputColorSpace);const p=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;i+=`${e}MainImage(color0, UV, `,r.attributes&de.DEPTH&&p.test(s)&&(i+="depth, ",r.readDepth=!0),i+=`color1);
	`;const x=e+"BlendOpacity";r.uniforms.set(x,y.opacity),i+=`color0 = blend${y.blendFunction}(color0, color1, ${x});

	`,a+=`uniform float ${x};

`}if(a+=s+`
`,o!==null&&(n+=o+`
`),l.set(A.FRAGMENT_HEAD,a),l.set(A.FRAGMENT_MAIN_UV,v),l.set(A.FRAGMENT_MAIN_IMAGE,i),l.set(A.VERTEX_HEAD,n),l.set(A.VERTEX_MAIN_SUPPORT,h),t.extensions!==null)for(const p of t.extensions)r.extensions.add(p)}}var Ki=class extends K{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Wi(null,null,null,e),this.listener=r=>this.handleEvent(r),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,r)=>r.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new Vs;let t=0;for(const d of this.effects)if(d.blendMode.blendFunction===M.DST)e.attributes|=d.getAttributes()&de.DEPTH;else{if(e.attributes&d.getAttributes()&de.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${d.name})`);ji("e"+t++,d,e)}let r=e.shaderParts.get(A.FRAGMENT_HEAD),s=e.shaderParts.get(A.FRAGMENT_MAIN_IMAGE),o=e.shaderParts.get(A.FRAGMENT_MAIN_UV);const u=/\bblend\b/g;for(const d of e.blendModes.values())r+=d.getShaderCode().replace(u,`blend${d.blendFunction}`)+`
`;e.attributes&de.DEPTH?(e.readDepth&&(s=`float depth = readDepth(UV);

	`+s),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===N&&(s+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(o=`vec2 transformedUv = vUv;
`+o,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(A.FRAGMENT_HEAD,r),e.shaderParts.set(A.FRAGMENT_MAIN_IMAGE,s),e.shaderParts.set(A.FRAGMENT_MAIN_UV,o);for(const[d,m]of e.shaderParts)m!==null&&e.shaderParts.set(d,m.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=He){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,s,o){for(const u of this.effects)u.update(e,t,s);if(!this.skipRendering||this.renderToScreen){const u=this.fullscreenMaterial;u.inputBuffer=t.texture,u.time+=s*this.timeScale,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(const s of this.effects)s.initialize(e,t,r);this.updateMaterial(),r!==void 0&&r!==ve&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}};function Qi(e,t){W(t,!0);const r=Fr(),s=()=>vt(m,"$camera",r),o=()=>vt(l,"$size",r),{scene:u,renderer:d,camera:m,size:l,autoRender:a,renderStage:v}=Or(),i=new ks(d);ee(()=>{i.removeAllPasses(),i.addPass(new ki(u,s())),i.addPass(new Ki(s(),new Gi({intensity:.8,luminanceThreshold:.15,height:1024,width:1024,luminanceSmoothing:.5,mipmapBlur:!0,kernelSize:ke.MEDIUM})))}),ee(()=>{const n=o().width*window.devicePixelRatio,h=o().height*window.devicePixelRatio;i.setSize(n,h)}),ee(()=>{const n=a.current;return a.set(!1),()=>a.set(n)}),Lr(n=>{i.render(n)},{stage:v,autoInvalidate:!1}),j()}var Xi=O("<!> <!>",1);function Yi(e,t){W(t,!0);const r=new Ge("show-debug-tools",!1);var s=Xi();ye("keydown",Se,({key:d})=>{d===we.Debug&&(r.current=!r.current)});var o=H(s);Qi(o,{});var u=L(o,2);Ne(u,()=>t.children),U(e,s),j()}const Zi=(e,t)=>{const r=e.getTime()-Date.now();if(r>0){const s=setTimeout(t,r);return()=>clearTimeout(s)}else return console.error("Target time is in the past. Check system clock."),()=>{}},Ji=(e=1)=>{const t=new Date().getFullYear()+1,r=new Date(t,0,1,0,0,0);return new Date(r.getTime()-6e4*e)},qi=e=>{const t=Math.floor(e/1e3),r=Math.floor(t/60).toString(),s=(t%60).toString().padStart(2,"0");return`${r}:${s}`};var en=O('<div class="z-1 pointer-events-none absolute grid h-full w-full place-content-center text-8xl text-white svelte-xkzlrh"><div class="flex gap-2 svelte-xkzlrh">ð«² <div class="w-48 svelte-xkzlrh"> </div> ð«±</div></div>'),tn=O('<div class="emoji absolute svelte-xkzlrh"> </div>'),rn=O('<div class="z-1 pointer-events-none absolute h-full w-full place-content-center text-8xl text-white svelte-xkzlrh"></div>');function sn(e,t){W(t,!0);const r=["ðº","ð±","ð¤©","ð¥³","ð","ð¤","ð","ð«¶","ð¥","ð¾","ðº","ð»","ð","ð","ðª©","ðââï¸","ð¤","ð¤","ð«","ð¤¸","ð¸","ð","ð","ð§ââï¸","ðââï¸","ð«µ"];let s=ae([]),o=-1,u=X("idle"),d=X(""),m=X(!1);const l=()=>{const S=new Date().getTime(),y=o-S;k(d,ae(qi(y))),S<=o?requestAnimationFrame(l):k(u,"celebrating")},a=()=>{k(u,"counting"),requestAnimationFrame(l)},v=()=>{const c={emoji:r.at((Math.random()*r.length|0)-1)??"",x:Math.random()*100,y:Math.random()*100};s.push(c),s.length>50&&s.shift()};ee(()=>{const c=Ji(10);return o=c.getTime(),Zi(c,a)}),ee(()=>{if(R(u)==="celebrating"){setInterval(v,500);const c=1e3*60*3;setTimeout(()=>{k(m,!0),setTimeout(()=>{k(u,"idle")},c)},c)}});var i=Y(),n=H(i);{var h=c=>{var S=en(),y=D(S),p=L(D(y)),x=D(p,!0);I(p),or(),I(y),I(S),he(()=>Me(x,R(d))),U(c,S)},f=c=>{var S=Y(),y=H(S);{var p=x=>{var g=rn();zt(g,21,()=>s,Wr,(_,T)=>{let B=()=>R(T).emoji,b=()=>R(T).x,w=()=>R(T).y;var E=tn(),V=D(E,!0);I(E),he(()=>{De(E,"style",`left: ${b()??""}%; top: ${w()??""}%`),Me(V,B())}),U(_,E)}),I(g),he(()=>Jr(g,"fading",R(m))),U(x,g)};$(y,x=>{R(u)==="celebrating"&&x(p)},!0)}U(c,S)};$(n,c=>{R(u)==="counting"?c(h):c(f,!1)})}U(e,i),j()}let Wt=null;class jt{}jt.render=function(e,t){Wt(e,t)};self.QrCreator=jt;(function(e){function t(m,l,a,v){var i={},n=e(a,l);n.u(m),n.J(),v=v||0;var h=n.h(),f=n.h()+2*v;return i.text=m,i.level=l,i.version=a,i.O=f,i.a=function(c,S){return c-=v,S-=v,0>c||c>=h||0>S||S>=h?!1:n.a(c,S)},i}function r(m,l,a,v,i,n,h,f,c,S){function y(p,x,g,_,T,B,b){p?(m.lineTo(x+B,g+b),m.arcTo(x,g,_,T,n)):m.lineTo(x,g)}h?m.moveTo(l+n,a):m.moveTo(l,a),y(f,v,a,v,i,-n,0),y(c,v,i,l,i,0,-n),y(S,l,i,l,a,n,0),y(h,l,a,v,a,0,n)}function s(m,l,a,v,i,n,h,f,c,S){function y(p,x,g,_){m.moveTo(p+g,x),m.lineTo(p,x),m.lineTo(p,x+_),m.arcTo(p,x,p+g,x,n)}h&&y(l,a,n,n),f&&y(v,a,-n,n),c&&y(v,i,-n,-n),S&&y(l,i,n,-n)}function o(m,l){var a=l.fill;if(typeof a=="string")m.fillStyle=a;else{var v=a.type,i=a.colorStops;if(a=a.position.map(h=>Math.round(h*l.size)),v==="linear-gradient")var n=m.createLinearGradient.apply(m,a);else if(v==="radial-gradient")n=m.createRadialGradient.apply(m,a);else throw Error("Unsupported fill");i.forEach(([h,f])=>{n.addColorStop(h,f)}),m.fillStyle=n}}function u(m,l){e:{var a=l.text,v=l.v,i=l.N,n=l.K,h=l.P;for(i=Math.max(1,i||1),n=Math.min(40,n||40);i<=n;i+=1)try{var f=t(a,v,i,h);break e}catch{}f=void 0}if(!f)return null;for(a=m.getContext("2d"),l.background&&(a.fillStyle=l.background,a.fillRect(l.left,l.top,l.size,l.size)),v=f.O,n=l.size/v,a.beginPath(),h=0;h<v;h+=1)for(i=0;i<v;i+=1){var c=a,S=l.left+i*n,y=l.top+h*n,p=h,x=i,g=f.a,_=S+n,T=y+n,B=p-1,b=p+1,w=x-1,E=x+1,V=Math.floor(Math.min(.5,Math.max(0,l.R))*n),Z=g(p,x),ue=g(B,w),Be=g(B,x);B=g(B,E);var Ue=g(p,E);E=g(b,E),x=g(b,x),b=g(b,w),p=g(p,w),S=Math.round(S),y=Math.round(y),_=Math.round(_),T=Math.round(T),Z?r(c,S,y,_,T,V,!Be&&!p,!Be&&!Ue,!x&&!Ue,!x&&!p):s(c,S,y,_,T,V,Be&&p&&ue,Be&&Ue&&B,x&&Ue&&E,x&&p&&b)}return o(a,l),a.fill(),m}var d={minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:.5,quiet:0};Wt=function(m,l){var a={};Object.assign(a,d,m),a.N=a.minVersion,a.K=a.maxVersion,a.v=a.ecLevel,a.left=a.left,a.top=a.top,a.size=a.size,a.fill=a.fill,a.background=a.background,a.text=a.text,a.R=a.radius,a.P=a.quiet,l instanceof HTMLCanvasElement?((l.width!==a.size||l.height!==a.size)&&(l.width=a.size,l.height=a.size),l.getContext("2d").clearRect(0,0,l.width,l.height),u(l,a)):(m=document.createElement("canvas"),m.width=a.size,m.height=a.size,a=u(m,a),l.appendChild(a))}})(function(){function e(l){var a=r.s(l);return{S:function(){return 4},b:function(){return a.length},write:function(v){for(var i=0;i<a.length;i+=1)v.put(a[i],8)}}}function t(){var l=[],a=0,v={B:function(){return l},c:function(i){return(l[Math.floor(i/8)]>>>7-i%8&1)==1},put:function(i,n){for(var h=0;h<n;h+=1)v.m((i>>>n-h-1&1)==1)},f:function(){return a},m:function(i){var n=Math.floor(a/8);l.length<=n&&l.push(0),i&&(l[n]|=128>>>a%8),a+=1}};return v}function r(l,a){function v(p,x){for(var g=-1;7>=g;g+=1)if(!(-1>=p+g||f<=p+g))for(var _=-1;7>=_;_+=1)-1>=x+_||f<=x+_||(h[p+g][x+_]=0<=g&&6>=g&&(_==0||_==6)||0<=_&&6>=_&&(g==0||g==6)||2<=g&&4>=g&&2<=_&&4>=_)}function i(p,x){for(var g=f=4*l+17,_=Array(g),T=0;T<g;T+=1){_[T]=Array(g);for(var B=0;B<g;B+=1)_[T][B]=null}for(h=_,v(0,0),v(f-7,0),v(0,f-7),g=u.G(l),_=0;_<g.length;_+=1)for(T=0;T<g.length;T+=1){B=g[_];var b=g[T];if(h[B][b]==null)for(var w=-2;2>=w;w+=1)for(var E=-2;2>=E;E+=1)h[B+w][b+E]=w==-2||w==2||E==-2||E==2||w==0&&E==0}for(g=8;g<f-8;g+=1)h[g][6]==null&&(h[g][6]=g%2==0);for(g=8;g<f-8;g+=1)h[6][g]==null&&(h[6][g]=g%2==0);for(g=u.w(n<<3|x),_=0;15>_;_+=1)T=!p&&(g>>_&1)==1,h[6>_?_:8>_?_+1:f-15+_][8]=T,h[8][8>_?f-_-1:9>_?15-_:14-_]=T;if(h[f-8][8]=!p,7<=l){for(g=u.A(l),_=0;18>_;_+=1)T=!p&&(g>>_&1)==1,h[Math.floor(_/3)][_%3+f-8-3]=T;for(_=0;18>_;_+=1)T=!p&&(g>>_&1)==1,h[_%3+f-8-3][Math.floor(_/3)]=T}if(c==null){for(p=m.I(l,n),g=t(),_=0;_<S.length;_+=1)T=S[_],g.put(4,4),g.put(T.b(),u.f(4,l)),T.write(g);for(_=T=0;_<p.length;_+=1)T+=p[_].j;if(g.f()>8*T)throw Error("code length overflow. ("+g.f()+">"+8*T+")");for(g.f()+4<=8*T&&g.put(0,4);g.f()%8!=0;)g.m(!1);for(;!(g.f()>=8*T)&&(g.put(236,8),!(g.f()>=8*T));)g.put(17,8);var V=0;for(T=_=0,B=Array(p.length),b=Array(p.length),w=0;w<p.length;w+=1){var Z=p[w].j,ue=p[w].o-Z;for(_=Math.max(_,Z),T=Math.max(T,ue),B[w]=Array(Z),E=0;E<B[w].length;E+=1)B[w][E]=255&g.B()[E+V];for(V+=Z,E=u.C(ue),Z=s(B[w],E.b()-1).l(E),b[w]=Array(E.b()-1),E=0;E<b[w].length;E+=1)ue=E+Z.b()-b[w].length,b[w][E]=0<=ue?Z.c(ue):0}for(E=g=0;E<p.length;E+=1)g+=p[E].o;for(g=Array(g),E=V=0;E<_;E+=1)for(w=0;w<p.length;w+=1)E<B[w].length&&(g[V]=B[w][E],V+=1);for(E=0;E<T;E+=1)for(w=0;w<p.length;w+=1)E<b[w].length&&(g[V]=b[w][E],V+=1);c=g}for(p=c,g=-1,_=f-1,T=7,B=0,x=u.F(x),b=f-1;0<b;b-=2)for(b==6&&--b;;){for(w=0;2>w;w+=1)h[_][b-w]==null&&(E=!1,B<p.length&&(E=(p[B]>>>T&1)==1),x(_,b-w)&&(E=!E),h[_][b-w]=E,--T,T==-1&&(B+=1,T=7));if(_+=g,0>_||f<=_){_-=g,g=-g;break}}}var n=o[a],h=null,f=0,c=null,S=[],y={u:function(p){p=e(p),S.push(p),c=null},a:function(p,x){if(0>p||f<=p||0>x||f<=x)throw Error(p+","+x);return h[p][x]},h:function(){return f},J:function(){for(var p=0,x=0,g=0;8>g;g+=1){i(!0,g);var _=u.D(y);(g==0||p>_)&&(p=_,x=g)}i(!1,x)}};return y}function s(l,a){if(typeof l.length>"u")throw Error(l.length+"/"+a);var v=function(){for(var n=0;n<l.length&&l[n]==0;)n+=1;for(var h=Array(l.length-n+a),f=0;f<l.length-n;f+=1)h[f]=l[f+n];return h}(),i={c:function(n){return v[n]},b:function(){return v.length},multiply:function(n){for(var h=Array(i.b()+n.b()-1),f=0;f<i.b();f+=1)for(var c=0;c<n.b();c+=1)h[f+c]^=d.i(d.g(i.c(f))+d.g(n.c(c)));return s(h,0)},l:function(n){if(0>i.b()-n.b())return i;for(var h=d.g(i.c(0))-d.g(n.c(0)),f=Array(i.b()),c=0;c<i.b();c+=1)f[c]=i.c(c);for(c=0;c<n.b();c+=1)f[c]^=d.i(d.g(n.c(c))+h);return s(f,0).l(n)}};return i}r.s=function(l){for(var a=[],v=0;v<l.length;v++){var i=l.charCodeAt(v);128>i?a.push(i):2048>i?a.push(192|i>>6,128|i&63):55296>i||57344<=i?a.push(224|i>>12,128|i>>6&63,128|i&63):(v++,i=65536+((i&1023)<<10|l.charCodeAt(v)&1023),a.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return a};var o={L:1,M:0,Q:3,H:2},u=function(){function l(i){for(var n=0;i!=0;)n+=1,i>>>=1;return n}var a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],v={w:function(i){for(var n=i<<10;0<=l(n)-l(1335);)n^=1335<<l(n)-l(1335);return(i<<10|n)^21522},A:function(i){for(var n=i<<12;0<=l(n)-l(7973);)n^=7973<<l(n)-l(7973);return i<<12|n},G:function(i){return a[i-1]},F:function(i){switch(i){case 0:return function(n,h){return(n+h)%2==0};case 1:return function(n){return n%2==0};case 2:return function(n,h){return h%3==0};case 3:return function(n,h){return(n+h)%3==0};case 4:return function(n,h){return(Math.floor(n/2)+Math.floor(h/3))%2==0};case 5:return function(n,h){return n*h%2+n*h%3==0};case 6:return function(n,h){return(n*h%2+n*h%3)%2==0};case 7:return function(n,h){return(n*h%3+(n+h)%2)%2==0};default:throw Error("bad maskPattern:"+i)}},C:function(i){for(var n=s([1],0),h=0;h<i;h+=1)n=n.multiply(s([1,d.i(h)],0));return n},f:function(i,n){if(i!=4||1>n||40<n)throw Error("mode: "+i+"; type: "+n);return 10>n?8:16},D:function(i){for(var n=i.h(),h=0,f=0;f<n;f+=1)for(var c=0;c<n;c+=1){for(var S=0,y=i.a(f,c),p=-1;1>=p;p+=1)if(!(0>f+p||n<=f+p))for(var x=-1;1>=x;x+=1)0>c+x||n<=c+x||(p!=0||x!=0)&&y==i.a(f+p,c+x)&&(S+=1);5<S&&(h+=3+S-5)}for(f=0;f<n-1;f+=1)for(c=0;c<n-1;c+=1)S=0,i.a(f,c)&&(S+=1),i.a(f+1,c)&&(S+=1),i.a(f,c+1)&&(S+=1),i.a(f+1,c+1)&&(S+=1),(S==0||S==4)&&(h+=3);for(f=0;f<n;f+=1)for(c=0;c<n-6;c+=1)i.a(f,c)&&!i.a(f,c+1)&&i.a(f,c+2)&&i.a(f,c+3)&&i.a(f,c+4)&&!i.a(f,c+5)&&i.a(f,c+6)&&(h+=40);for(c=0;c<n;c+=1)for(f=0;f<n-6;f+=1)i.a(f,c)&&!i.a(f+1,c)&&i.a(f+2,c)&&i.a(f+3,c)&&i.a(f+4,c)&&!i.a(f+5,c)&&i.a(f+6,c)&&(h+=40);for(c=S=0;c<n;c+=1)for(f=0;f<n;f+=1)i.a(f,c)&&(S+=1);return h+=Math.abs(100*S/n/n-50)/5*10}};return v}(),d=function(){for(var l=Array(256),a=Array(256),v=0;8>v;v+=1)l[v]=1<<v;for(v=8;256>v;v+=1)l[v]=l[v-4]^l[v-5]^l[v-6]^l[v-8];for(v=0;255>v;v+=1)a[l[v]]=v;return{g:function(i){if(1>i)throw Error("glog("+i+")");return a[i]},i:function(i){for(;0>i;)i+=255;for(;256<=i;)i-=255;return l[i]}}}(),m=function(){function l(i,n){switch(n){case o.L:return a[4*(i-1)];case o.M:return a[4*(i-1)+1];case o.Q:return a[4*(i-1)+2];case o.H:return a[4*(i-1)+3]}}var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],v={I:function(i,n){var h=l(i,n);if(typeof h>"u")throw Error("bad rs block @ typeNumber:"+i+"/errorCorrectLevel:"+n);i=h.length/3,n=[];for(var f=0;f<i;f+=1)for(var c=h[3*f],S=h[3*f+1],y=h[3*f+2],p=0;p<c;p+=1){var x=y,g={};g.o=S,g.j=x,n.push(g)}return n}};return v}();return r}());const nn=QrCreator;var an=O('<div class="z-1 inline-flex w-24 p-4 svelte-x226nl"></div>');function on(e,t){W(t,!0);const r=new Ge("show-playlist-qr-code",!1),{track:s}=Lt();let o=X(void 0),u=lr(()=>{var a,v,i;return(i=(v=(a=s.current)==null?void 0:a.context)==null?void 0:v.external_urls)==null?void 0:i.spotify});ee(()=>{R(o)&&R(u)&&nn.render({text:R(u),radius:0,ecLevel:"H",fill:"#fff",background:null,size:128},R(o))});var d=Y();ye("keydown",Se,({key:a})=>{a.toLowerCase()===we.QRCode&&(r.current=!r.current)});var m=H(d);{var l=a=>{var v=an();Xe(v,i=>k(o,i),()=>R(o)),U(a,v)};$(m,a=>{r.current&&R(u)&&a(l)})}U(e,d),j()}var ln=()=>at("/lines"),un=()=>at("/about"),cn=O('<div class="absolute left-0 top-0 flex h-screen w-screen flex-col items-center justify-center"><!> <div class="flex gap-2"><button class="flex items-center gap-1 bg-slate-600 px-3 py-1 text-white"><span class="text-xs">get zesty</span> ð¤</button> <button class="flex items-center gap-1 bg-slate-600 px-3 py-1 text-white"><span class="text-xs">what the zest?</span> ð§</button></div></div>'),fn=O("<!> <!> <!> <!> <!> <!>",1),hn=O('<div class="absolute left-0 top-0 h-screen w-screen"><!></div> <!>',1);function dn(e,t){W(t,!0);const{startAnalyser:r}=Vr();ee(()=>{ms(),r()});let s=-1;Ut(v=>{clearTimeout(s),s=ps()});var o=hn(),u=H(o),d=D(u);us(d,{children:(v,i)=>{var n=Y(),h=H(n);{var f=c=>{Yi(c,{children:(S,y)=>{var p=Y(),x=H(p);Ne(x,()=>t.children),U(S,p)},$$slots:{default:!0}})};$(h,c=>{c(f,!1)})}U(v,n)},$$slots:{default:!0}}),I(u);var m=L(u,2);{var l=v=>{var i=cn(),n=D(i);Gt(n,{class:"w-1/2"});var h=L(n,2),f=D(h);f.__click=[ln];var c=L(f,2);c.__click=[un],I(h),I(i),U(v,i)},a=v=>{var i=fn(),n=H(i);gs(n,{});var h=L(n,2);Is(h,{});var f=L(h,2);Ps(f,{});var c=L(f,2);Ms(c,{});var S=L(c,2);sn(S,{});var y=L(S,2);on(y,{}),U(v,i)};$(m,v=>{Nr.route.id==="/"?v(l):v(a,!1)})}U(e,o),j()}Le(["click"]);const vn=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"}));export{dn as component,ns as universal};
